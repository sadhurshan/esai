RFQ from Digital Twin / Exploded View

Status review (2025-11-25):

| # | Requirement | Status | Findings |
|---|-------------|--------|----------|
| 1 | Ability to select parts/components from a digital twin or exploded diagram | ‚ùå Missing | Buyer-facing UIs (`resources/js/pages/digital-twins/library-page.tsx`, `resources/js/pages/digital-twins/detail-page.tsx`, `resources/js/pages/assets/assets-page.tsx`) only expose a "Use for RFQ" CTA per twin. There is no BOM/exploded view picker, no component-level selection, and no hooks into `AssetBomController` despite the backend service existing for asset BOM syncing. |
| 2 | Auto-population of RFQ lines with correct part metadata and linkage to the twin | ‚ö†Ô∏è Partial | The API builds a draft via `app/Http/Controllers/Api/Library/DigitalTwinController::buildRfqDraftPayload`, and the RFQ wizard ingests it (`mapDigitalTwinDraftLines` + `digitalTwinPrefill` in `resources/js/pages/rfqs/rfq-create-wizard.tsx`). However, the draft only infers a single line from specs, lacks explicit part IDs, and the linkage metadata is never passed along when saving the RFQ. |
| 3 | UI clearly indicates the RFQ is linked to a twin **and** the database stores that link | ‚ö†Ô∏è Partial | The wizard shows a "Digital twin linked" alert and surfaces linked specs/attachments (same file as above), but persistence is missing: `RFQStoreRequest` and `RFQController::store` never accept `digital_twin_id`, the `rfqs`/`rfq_items` tables have no related columns, and `RFQResource` cannot expose such linkage. Once saved, the RFQ loses all trace of the originating twin. |
| 4 | Related models, associations, and UI screens verified | ‚ö†Ô∏è Partial | Digital twin domain models/resources/controllers/tests exist (`app/Models/DigitalTwin*`, `tests/Feature/Library/DigitalTwinLibraryControllerTest.php`) and plan/access middleware is wired, but there is no association bridging `digital_twins` to `rfqs`/`rfq_items`, nor any UI beyond the basic library/detail pages‚Äîno exploded-view visualization, no per-component picking. |
| 5 | Flow status | üöß Partially implemented | Library browsing and RFQ prefill work end-to-end, yet the core "select components from digital twin/exploded view and keep the RFQ linked" requirement is not met. TODO: add component selection UX, propagate selected part context + `digital_twin_id` into the RFQ payload, extend migrations/resources, and surface the relationship throughout RFQ/PO screens per the spec. |