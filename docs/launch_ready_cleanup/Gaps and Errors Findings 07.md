1. Critical – Company KYC uploads bypass the documents pipeline (StoreCompanyDocumentAction.php L18-39, DeleteCompanyDocumentAction.php L13-29). Files are written straight to whatever filesystems.default happens to be (local in dev), never pass through DocumentStorer, skip virus scanning, and deletes only remove the DB row—binary blobs remain on disk. This violates the storage rules in copilot-instructions.md and documents.md (S3 + scanning + audit for every document), breaks download URL generation, and leaves orphaned files. **Status: Resolved**

2. High – Company document responses leak unusable paths & lack config-driven validation (StoreCompanyDocumentRequest.php L12-20, CompanyDocumentResource.php L13-24). The request hard-codes a 5 MB limit with only PDF/JPEG/PNG mimetypes instead of reading documents.max_size_mb / documents.allowed_extensions, so legitimate docx/step uploads get blocked. The resource returns the raw storage path with a TODO for signed URLs, meaning clients can’t actually download what they uploaded and S3 keys are exposed. **Status: Resolved**

3. High – Company KYC listing still ignores cursor pagination (CompanyDocumentController.php L24-41). The endpoint does latest()->get() and never passes meta to ok(), so collections violate the envelope contract (data.items + top-level meta.next_cursor per copilot-instructions.md). Large tenants can’t page through historical docs and the TS hooks can’t consume cursors. **Status: Resolved**

4. High – Several SaaS-critical listings still return unpaginated arrays (SupplierDocumentController@index L24-71, SupplierEsgController@index L23-67, SupplierRiskController@index L24-68, RfqAttachmentController@index L21-45). Each controller does a blunt ->get() and responds without envelope-level cursor metadata, which contradicts the platform contract and the React hooks (useSupplierDocuments, risk dashboards, RFQ attachments) that now expect { data: { items }, meta: { next_cursor… } }. **Status: Resolved**

5. Medium – Company document flows lack any regression tests (no references to CompanyDocument or its controller/actions in tests/**). Definition of Done requires at least one success + one forbidden path per feature; we currently have zero coverage for uploading/listing/deleting KYC docs, so regressions like the storage issues above will slip through unnoticed. **Status: Resolved**

Frontend gaps

1. High – Client upload widgets hard-code the wrong MIME list & size (register-page.tsx L333-380, supplier-application-panel.tsx L175-190 & L780-820). Both onboarding and supplier panels tell users “PDF/PNG/JPG up to 8 MB” and set <input accept>/DOCUMENT_ACCEPT_MIMES to those three types, ignoring the 50 MB multi-extension policy declared in documents.php. Buyers can’t submit CAD, DOCX, or XLS compliance files even though the backend (once fixed) will allow them. **Status: Resolved**

2. Medium – Company document hooks drop download URLs & pagination (useCompanyDocuments.ts, company.ts). We only map path and never surface download_url or cursor meta, so even after the backend starts returning signed URLs the UI has no way to link or page through them; path points to private storage and is unusable in-browser. **Status: Resolved**

3. Medium – Supplier documents panel can’t view uploads (supplier-application-panel.tsx L700-760). The list renders type/status and a delete icon but no anchor/button that uses document.download_url/path, contradicting documents.md (“Preview/download”) and preventing reviewers from opening the certificates they just uploaded. **Status: Resolved**