1. ~~UomConversionController.php lines 27‑55 and UomController.php lines 23‑41 still dump the full dataset with $query->get() and place a nested meta array inside data. Per /[REQUIREMENTS_FULL.md](http://_vscodecontentref_/2) §26 and the Copilot instructions (“collection endpoints default to cursor pagination … meta.next_cursor/meta.prev_cursor”), these endpoints must return { data: { items }, meta: { next_cursor… } } via the shared paginate() helper. Today they violate the API envelope (no envelope-level meta, no cursor tokens) and force clients to download the entire conversions/UoM catalogue. Replace the manual mapping with cursorPaginate($this->perPage(...)), feed the result into $this->paginate(), and pass the helper’s $meta to ok() so React hooks regain cursor support.~~ **(Fixed)** — Both localization index endpoints now use deterministic `cursorPaginate()` + `ApiController::paginate()`, so responses emit `{ data: { items }, meta.next_cursor }` per spec.

2. ~~UomConversionController::convertForPart() (lines 118‑150) authorizes access by comparing $part->company_id to $request->user()?->company_id. This bypasses the shared company-context resolver, so multi-company users (who switch tenants via company_user/persona) are always evaluated against their default users.company_id, not the active tenant. A buyer acting on Company B with an Active Persona from B can neither convert their own part (because $user->company_id is still A) nor stop themselves from enumerating Company A parts while impersonating Company B. Use $this->requireCompanyContext($request) to resolve the active company, set CompanyContext, and compare $part->company_id to that resolved $companyId.~~ **(Fixed)** — `convertForPart()` now calls `requireCompanyContext()` and compares the resolved `$companyId` against the part’s tenant before proceeding.

3. ~~The billing flows still ignore requireCompanyContext even though billing data is tenant-scoped. BillingPortalController::store (lines 17‑34), PlanCheckoutController::store (lines 20‑60), BillingInvoiceController::index (lines 15‑46), and CompanyPlanController::store (lines 24‑65) all read $request->user()?->company directly. For multi-company users, users.company_id often points at the original organization, so they cannot load invoices or start checkout for the tenant they actually selected, and CompanyContext is never set for downstream services/audit logging. Refactor these controllers to call $this->requireCompanyContext($request) and pass the resolved $companyId into the billing services; fall back to fail('company_context_missing',422) when the helper returns a JSON response. This aligns with the project bible’s “scope queries with shared BelongsToCompany patterns” rule.~~ **(Fixed)** — Every billing controller mentioned now derives the active tenant via `requireCompanyContext()`, loads the correct `Company` model, and returns the standard `{ status, message, data }` envelope when context is missing.

4. ~~AnalyticsController@overview and @generate (see lines 15‑120 & 122‑200) follow the same anti-pattern: they call resolveRequestUser() and immediately interrogate $user->company. No company context is resolved or stored, so persona switching and company_user overrides are ignored. Worse, the code never sets CompanyContext, meaning analytics snapshots can be queried without scoping guards and plan enforcement runs against whichever company relation happens to be loaded. Use requireCompanyContext() to obtain the active company id, set context, and feed that id into ensureAnalyticsPermission()/Eloquent queries to keep analytics multi-tenant safe.~~ **(Fixed)** — Both analytics endpoints now require the shared company context helper, fetch the scoped company (with plan) from the resolved ID, and only proceed once context is established.

5. ~~Locale settings share the same flaw. LocaleSettingsController::show and ::update (lines 20‑70) gate access by $user->company instead of the shared helper, so a user who belongs to multiple companies can only see/update the “primary” company’s locale configuration and cannot change the tenant they switched into. Replace the manual $user = $this->resolveRequestUser() logic with ['user' => $user, 'companyId' => $companyId] = $this->requireCompanyContext($request) and scope the CompanyLocaleSetting::firstOrNew() call to $companyId.~~ **(Fixed)** — Locale settings now resolve the active company via `requireCompanyContext()`, load the tenant’s locale setting, and persist updates against the resolved company ID.