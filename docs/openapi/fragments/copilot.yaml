paths:
  /api/copilot/analytics:
    post:
      tags:
        - Copilot
      summary: Generate analytics insight via Copilot
      operationId: copilotAnalytics
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Analytics insight with supporting narrative.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiSuccessResponse'
  /api/copilot/chat/completions:
    post:
      tags:
        - Copilot
      summary: Stream structured copilot response
      operationId: copilotChatCompletion
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        '200':
          description: Copilot generated completion payload.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiSuccessResponse'
  /api/copilot/search:
    post:
      tags:
        - Copilot
      summary: Run semantic search across indexed tenant documents
      operationId: copilotSemanticSearch
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CopilotQueryRequest'
      responses:
        '200':
          description: Ranked document chunks matching the supplied query.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiSuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CopilotSearchResult'
  /api/copilot/answer:
    post:
      tags:
        - Copilot
      summary: Generate grounded answers with citations
      operationId: copilotAnswer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CopilotQueryRequest'
      responses:
        '200':
          description: Answer assembled from the top semantic search hits plus citations.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiSuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CopilotAnswerResult'
  /api/copilot/prompts:
    get:
      tags:
        - Copilot
      summary: List available copilot prompts
      operationId: listCopilotPrompts
      responses:
        '200':
          description: Copilot prompt catalog.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiSuccessResponse'
