{
    "openapi": "3.1.0",
    "info": {
        "title": "Elements Supply API",
        "version": "2025.11.0",
        "summary": "Canonical contract for the Elements Supply public API.",
        "description": "Elements Supply is a multi-tenant sourcing and procurement platform that exposes a single\npublic API for authenticated buyers, suppliers, and platform administrators. All responses\nare wrapped in the standard envelope documented in `/docs/API_ENVELOPE.md` and conform to\nthe schemas defined in this spec. Unless noted otherwise, every path requires either a\nbearer token (Sanctum personal access token) or an API key issued by the platform admin\nconsole.\n",
        "contact": {
            "name": "Elements Supply Team",
            "url": "https://elements-supply.ai",
            "email": "support@elements-supply.ai"
        }
    },
    "servers": [
        {
            "url": "https://api.elements-supply.ai",
            "description": "Production API endpoint"
        },
        {
            "url": "https://{tenant}.elements-supply.ai",
            "description": "Tenant-scoped production endpoint",
            "variables": {
                "tenant": {
                    "description": "Subdomain slug for the tenant (e.g. `acme`)",
                    "default": "app"
                }
            }
        },
        {
            "url": "http://localhost/api",
            "description": "Local development"
        }
    ],
    "externalDocs": {
        "description": "Full product requirements",
        "url": "https://github.com/sadhurshan/elements-supply-ai/docs/REQUIREMENTS_FULL.md"
    },
    "tags": [
        {
            "name": "Health",
            "description": "Readiness and diagnostic endpoints"
        },
        {
            "name": "Auth",
            "description": "Authentication session management and API key usage"
        },
        {
            "name": "RFQs",
            "description": "Manage requests for quotation and related supplier interactions"
        },
        {
            "name": "RFPs",
            "description": "Project RFP authoring, publishing, and proposal workflows"
        },
        {
            "name": "Quotes",
            "description": "Quote submission, revision, and award workflows"
        },
        {
            "name": "Purchase Orders",
            "description": "Purchase order lifecycle, change orders, and totals"
        },
        {
            "name": "Orders",
            "description": "Supplier-facing order visibility endpoints"
        },
        {
            "name": "Invoices",
            "description": "Invoicing, credit notes, and financial reconciliation"
        },
        {
            "name": "Inventory",
            "description": "Goods receipt, issues, and warehouse movements"
        },
        {
            "name": "Exports",
            "description": "Bulk data export creation and download"
        },
        {
            "name": "Downloads",
            "description": "On-demand PDF or CSV document downloads queued from the workspace"
        },
        {
            "name": "CRM",
            "description": "Customer relationship data exports and insights"
        },
        {
            "name": "Suppliers",
            "description": "Supplier directory, segments, and applications"
        },
        {
            "name": "Notifications",
            "description": "In-app notification feeds and read state management"
        },
        {
            "name": "Risk",
            "description": "Supplier risk scoring and refresh workflows"
        },
        {
            "name": "Digital Twin",
            "description": "Asset telemetry, synchronization, and work orders"
        },
        {
            "name": "Analytics",
            "description": "Self-serve analytics reports and scheduled runs"
        },
        {
            "name": "Copilot",
            "description": "AI-assisted workflows and prompt catalogues"
        },
        {
            "name": "Documents",
            "description": "File uploads and document staging APIs"
        },
        {
            "name": "Settings",
            "description": "Tenant-level configuration (company profile, localization, numbering)"
        },
        {
            "name": "Localization",
            "description": "Localization settings, units of measure, and conversions"
        },
        {
            "name": "Money",
            "description": "Monetary settings, FX rates, and tax configuration"
        },
        {
            "name": "Billing",
            "description": "Subscription management, billing portal access, and plan checkout flows"
        },
        {
            "name": "Approvals",
            "description": "Purchase order approval rules, requests, and delegations"
        },
        {
            "name": "Admin",
            "description": "Platform administration (plans, health, read-only reference data)"
        },
        {
            "name": "Webhooks",
            "description": "Outbound webhook subscription formats and delivery expectations"
        }
    ],
    "security": [
        {
            "bearerAuth": []
        },
        {
            "apiKeyAuth": []
        }
    ],
    "components": {
        "securitySchemes": {
            "apiKeyAuth": {
                "type": "apiKey",
                "in": "header",
                "name": "X-API-Key",
                "description": "API keys are issued and rotated in the platform admin console. Include the value in the\n`X-API-Key` header to authenticate machine-to-machine integrations.\n"
            },
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT",
                "description": "Supply a bearer token acquired via Sanctum. All tokens are scoped to a specific\ncompany tenant and inherit the permissions assigned to the issuing user.\n"
            }
        },
        "parameters": {
            "AcceptLanguage": {
                "name": "Accept-Language",
                "in": "header",
                "required": false,
                "description": "Overrides language resolution when localization features are enabled.",
                "schema": {
                    "type": "string"
                }
            },
            "CursorQuery": {
                "name": "cursor",
                "in": "query",
                "required": false,
                "description": "Cursor token for pagination.",
                "schema": {
                    "type": "string"
                }
            },
            "PageQuery": {
                "name": "page",
                "in": "query",
                "required": false,
                "schema": {
                    "type": "integer",
                    "minimum": 1
                }
            },
            "PerPageQuery": {
                "name": "per_page",
                "in": "query",
                "required": false,
                "schema": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 100
                }
            },
            "XRequestId": {
                "name": "X-Request-Id",
                "in": "header",
                "required": false,
                "description": "Correlates requests across services. Echoed back on every response when supplied.",
                "schema": {
                    "type": "string"
                }
            }
        },
        "headers": {
            "XRateLimitLimit": {
                "description": "Maximum number of requests allowed in the current window.",
                "schema": {
                    "type": "integer"
                }
            },
            "XRateLimitRemaining": {
                "description": "Remaining requests available in the current window.",
                "schema": {
                    "type": "integer"
                }
            },
            "XRateLimitReset": {
                "description": "Seconds until the current rate limit window resets.",
                "schema": {
                    "type": "integer"
                }
            },
            "XRequestId": {
                "description": "Unique identifier for the current request.",
                "schema": {
                    "type": "string"
                }
            },
            "XTraceId": {
                "description": "Internal trace identifier for support escalations.",
                "schema": {
                    "type": "string"
                }
            }
        },
        "schemas": {
            "AcknowledgeOrderPayload": {
                "type": "object",
                "required": [
                    "decision"
                ],
                "properties": {
                    "decision": {
                        "type": "string",
                        "enum": [
                            "accept",
                            "decline"
                        ]
                    },
                    "reason": {
                        "type": "string",
                        "nullable": true,
                        "maxLength": 500
                    }
                }
            },
            "AdminHealth": {
                "type": "object",
                "properties": {
                    "app_version": {
                        "type": "string"
                    },
                    "php_version": {
                        "type": "string"
                    },
                    "queue_connection": {
                        "type": "string"
                    },
                    "database_connected": {
                        "type": "boolean"
                    },
                    "pending_webhook_deliveries": {
                        "type": "integer"
                    }
                }
            },
            "AiChatAttachment": {
                "type": "object",
                "additionalProperties": true,
                "description": "Arbitrary attachment metadata captured by the client."
            },
            "AiChatCreateThreadRequest": {
                "type": "object",
                "properties": {
                    "title": {
                        "type": "string",
                        "maxLength": 255,
                        "nullable": true
                    }
                }
            },
            "AiChatDraftAction": {
                "type": "object",
                "required": [
                    "action_type",
                    "summary",
                    "payload",
                    "citations",
                    "confidence",
                    "needs_human_review",
                    "warnings"
                ],
                "properties": {
                    "action_type": {
                        "type": "string"
                    },
                    "summary": {
                        "type": "string"
                    },
                    "payload": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "citations": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CopilotCitation"
                        }
                    },
                    "confidence": {
                        "type": "number",
                        "format": "float"
                    },
                    "needs_human_review": {
                        "type": "boolean"
                    },
                    "warnings": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "draft_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "status": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "AiChatGuidedResolution": {
                "type": "object",
                "required": [
                    "title",
                    "description",
                    "cta_label"
                ],
                "properties": {
                    "title": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "cta_label": {
                        "type": "string"
                    },
                    "cta_url": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "locale": {
                        "type": "string",
                        "maxLength": 10,
                        "description": "Language used to render the help content."
                    },
                    "available_locales": {
                        "type": "array",
                        "description": "Language codes Copilot can serve for this guide.",
                        "items": {
                            "type": "string",
                            "maxLength": 10
                        }
                    }
                }
            },
            "AiChatMessage": {
                "type": "object",
                "required": [
                    "id",
                    "thread_id",
                    "role",
                    "status",
                    "created_at"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "thread_id": {
                        "type": "integer"
                    },
                    "user_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "role": {
                        "type": "string",
                        "enum": [
                            "user",
                            "assistant",
                            "system",
                            "tool"
                        ]
                    },
                    "content_text": {
                        "type": "string",
                        "nullable": true
                    },
                    "content": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "citations": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CopilotCitation"
                        }
                    },
                    "tool_calls": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AiChatToolCall"
                        }
                    },
                    "tool_results": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AiChatToolResult"
                        }
                    },
                    "latency_ms": {
                        "type": "integer",
                        "nullable": true
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "pending",
                            "completed",
                            "failed"
                        ]
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "AiChatMessageContext": {
                "type": "object",
                "properties": {
                    "context": {
                        "type": "object",
                        "additionalProperties": true,
                        "description": "Domain-specific context supplied by the UI."
                    },
                    "ui_mode": {
                        "type": "string",
                        "maxLength": 50
                    },
                    "locale": {
                        "type": "string",
                        "maxLength": 10,
                        "description": "Preferred language tag (BCP 47) used when requesting localized help guides."
                    },
                    "attachments": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AiChatAttachment"
                        }
                    }
                },
                "additionalProperties": false
            },
            "AiChatResolveToolsRequest": {
                "type": "object",
                "required": [
                    "tool_calls"
                ],
                "properties": {
                    "tool_calls": {
                        "type": "array",
                        "minItems": 1,
                        "maxItems": 5,
                        "items": {
                            "$ref": "#/components/schemas/AiChatToolCall"
                        }
                    },
                    "context": {
                        "$ref": "#/components/schemas/AiChatMessageContext"
                    }
                }
            },
            "AiChatResponse": {
                "type": "object",
                "required": [
                    "type",
                    "assistant_message_markdown",
                    "citations",
                    "suggested_quick_replies",
                    "needs_human_review",
                    "confidence",
                    "warnings"
                ],
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "answer",
                            "draft_action",
                            "workflow_suggestion",
                            "guided_resolution",
                            "tool_request",
                            "review_rfq",
                            "review_quote",
                            "review_po",
                            "review_invoice",
                            "analytics",
                            "forecast_spend",
                            "forecast_supplier_performance",
                            "forecast_inventory",
                            "error"
                        ]
                    },
                    "assistant_message_markdown": {
                        "type": "string"
                    },
                    "citations": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CopilotCitation"
                        }
                    },
                    "suggested_quick_replies": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "draft": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/AiChatDraftAction"
                            },
                            {
                                "type": "null"
                            }
                        ]
                    },
                    "workflow": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/AiChatWorkflowSuggestion"
                            },
                            {
                                "type": "null"
                            }
                        ]
                    },
                    "guided_resolution": {
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/AiChatGuidedResolution"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "description": "Localized help metadata surfaced when Copilot cannot automate the requested task."
                    },
                    "tool_calls": {
                        "type": "array",
                        "nullable": true,
                        "items": {
                            "$ref": "#/components/schemas/AiChatToolCall"
                        }
                    },
                    "tool_results": {
                        "type": "array",
                        "nullable": true,
                        "items": {
                            "$ref": "#/components/schemas/AiChatToolResult"
                        }
                    },
                    "needs_human_review": {
                        "type": "boolean"
                    },
                    "confidence": {
                        "type": "number",
                        "format": "float"
                    },
                    "warnings": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "review": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true,
                        "description": "Structured checklist payload for review_* responses."
                    }
                }
            },
            "AiChatSendMessageRequest": {
                "type": "object",
                "required": [
                    "message"
                ],
                "properties": {
                    "message": {
                        "type": "string",
                        "maxLength": 4000
                    },
                    "context": {
                        "$ref": "#/components/schemas/AiChatMessageContext"
                    },
                    "ui_mode": {
                        "type": "string",
                        "maxLength": 50,
                        "nullable": true
                    },
                    "attachments": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AiChatAttachment"
                        }
                    },
                    "stream": {
                        "type": "boolean",
                        "description": "When true, the endpoint returns a stream token for SSE consumption."
                    }
                }
            },
            "AiChatSendMessageResult": {
                "type": "object",
                "required": [
                    "user_message",
                    "assistant_message",
                    "response"
                ],
                "properties": {
                    "user_message": {
                        "$ref": "#/components/schemas/AiChatMessage"
                    },
                    "assistant_message": {
                        "$ref": "#/components/schemas/AiChatMessage"
                    },
                    "response": {
                        "$ref": "#/components/schemas/AiChatResponse"
                    }
                }
            },
            "AiChatStreamSession": {
                "type": "object",
                "required": [
                    "user_message",
                    "stream_token",
                    "expires_in"
                ],
                "properties": {
                    "user_message": {
                        "$ref": "#/components/schemas/AiChatMessage"
                    },
                    "stream_token": {
                        "type": "string"
                    },
                    "expires_in": {
                        "type": "integer",
                        "description": "Lifetime of the stream token in seconds."
                    }
                }
            },
            "AiChatThread": {
                "type": "object",
                "required": [
                    "id",
                    "status",
                    "user_id",
                    "metadata",
                    "created_at",
                    "updated_at"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "title": {
                        "type": "string",
                        "nullable": true
                    },
                    "status": {
                        "$ref": "#/components/schemas/AiChatThreadStatus"
                    },
                    "user_id": {
                        "type": "integer"
                    },
                    "last_message_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "metadata": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "thread_summary": {
                        "type": "string",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "messages": {
                        "type": "array",
                        "nullable": true,
                        "items": {
                            "$ref": "#/components/schemas/AiChatMessage"
                        }
                    }
                }
            },
            "AiChatThreadStatus": {
                "type": "string",
                "enum": [
                    "open",
                    "closed"
                ]
            },
            "AiChatToolCall": {
                "type": "object",
                "required": [
                    "tool_name",
                    "call_id"
                ],
                "properties": {
                    "tool_name": {
                        "type": "string",
                        "enum": [
                            "workspace.search_rfqs",
                            "workspace.get_rfq",
                            "workspace.list_suppliers",
                            "workspace.get_quotes_for_rfq",
                            "workspace.get_inventory_item",
                            "workspace.low_stock",
                            "workspace.get_awards",
                            "workspace.get_receipts",
                            "workspace.get_invoices",
                            "workspace.award_quote",
                            "workspace.invoice_draft",
                            "workspace.approve_invoice",
                            "workspace.review_rfq",
                            "workspace.review_quote",
                            "workspace.review_po",
                            "workspace.review_invoice"
                        ]
                    },
                    "call_id": {
                        "type": "string",
                        "maxLength": 128
                    },
                    "arguments": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    }
                }
            },
            "AiChatToolResolveResult": {
                "type": "object",
                "required": [
                    "tool_message",
                    "assistant_message",
                    "response"
                ],
                "properties": {
                    "tool_message": {
                        "$ref": "#/components/schemas/AiChatMessage"
                    },
                    "assistant_message": {
                        "$ref": "#/components/schemas/AiChatMessage"
                    },
                    "response": {
                        "$ref": "#/components/schemas/AiChatResponse"
                    }
                }
            },
            "AiChatToolResult": {
                "type": "object",
                "required": [
                    "tool_name",
                    "call_id"
                ],
                "properties": {
                    "tool_name": {
                        "type": "string"
                    },
                    "call_id": {
                        "type": "string"
                    },
                    "result": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    }
                }
            },
            "AiChatWorkflowStep": {
                "type": "object",
                "required": [
                    "title",
                    "summary"
                ],
                "properties": {
                    "title": {
                        "type": "string"
                    },
                    "summary": {
                        "type": "string"
                    },
                    "payload": {
                        "type": "object",
                        "additionalProperties": true,
                        "description": "Structured metadata describing how to execute the step."
                    }
                }
            },
            "AiChatWorkflowSuggestion": {
                "type": "object",
                "required": [
                    "workflow_type",
                    "steps",
                    "payload"
                ],
                "properties": {
                    "workflow_type": {
                        "type": "string"
                    },
                    "steps": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AiChatWorkflowStep"
                        }
                    },
                    "payload": {
                        "type": "object",
                        "additionalProperties": true
                    }
                }
            },
            "AiDocumentReindexRequest": {
                "type": "object",
                "description": "Payload required to queue an AI reindex for a document.",
                "required": [
                    "doc_id",
                    "doc_version"
                ],
                "properties": {
                    "doc_id": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "doc_version": {
                        "type": "string",
                        "maxLength": 100
                    }
                }
            },
            "AiDocumentReindexStatus": {
                "type": "object",
                "description": "Echo payload describing the queued reindex operation.",
                "required": [
                    "doc_id",
                    "doc_version"
                ],
                "properties": {
                    "doc_id": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "doc_version": {
                        "type": "string",
                        "maxLength": 100
                    }
                }
            },
            "AiSettings": {
                "type": "object",
                "required": [
                    "llm_answers_enabled",
                    "llm_provider"
                ],
                "properties": {
                    "llm_answers_enabled": {
                        "type": "boolean",
                        "description": "Toggle that controls whether the tenant can receive LLM-composed assistant answers."
                    },
                    "llm_provider": {
                        "type": "string",
                        "description": "Active model provider backing the assistant (returns \"dummy\" when disabled).",
                        "enum": [
                            "dummy",
                            "openai"
                        ]
                    }
                }
            },
            "AiTrainingJob": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "feature",
                    "status",
                    "created_at",
                    "updated_at"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "feature": {
                        "type": "string",
                        "enum": [
                            "forecast",
                            "risk",
                            "rag",
                            "actions",
                            "workflows",
                            "chat"
                        ]
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "pending",
                            "running",
                            "completed",
                            "failed"
                        ]
                    },
                    "microservice_job_id": {
                        "type": "string",
                        "nullable": true
                    },
                    "parameters": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "result": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "started_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "finished_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "error_message": {
                        "type": "string",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "AiUsageActionMetrics": {
                "type": "object",
                "required": [
                    "planned",
                    "approved",
                    "approval_rate"
                ],
                "properties": {
                    "planned": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "approved": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "approval_rate": {
                        "type": "number",
                        "format": "float",
                        "nullable": true,
                        "description": "Percentage of planned Copilot drafts that were approved in the trailing window."
                    }
                }
            },
            "AiUsageForecastMetrics": {
                "type": "object",
                "required": [
                    "generated",
                    "errors"
                ],
                "properties": {
                    "generated": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "errors": {
                        "type": "integer",
                        "minimum": 0
                    }
                }
            },
            "AiUsageHelpMetrics": {
                "type": "object",
                "required": [
                    "total"
                ],
                "properties": {
                    "total": {
                        "type": "integer",
                        "minimum": 0
                    }
                }
            },
            "AiUsageMetrics": {
                "type": "object",
                "required": [
                    "window_days",
                    "window_start",
                    "window_end",
                    "actions",
                    "forecasts",
                    "help_requests",
                    "tool_errors"
                ],
                "properties": {
                    "window_days": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "window_start": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "window_end": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "actions": {
                        "$ref": "#/components/schemas/AiUsageActionMetrics"
                    },
                    "forecasts": {
                        "$ref": "#/components/schemas/AiUsageForecastMetrics"
                    },
                    "help_requests": {
                        "$ref": "#/components/schemas/AiUsageHelpMetrics"
                    },
                    "tool_errors": {
                        "$ref": "#/components/schemas/AiUsageToolErrorMetrics"
                    }
                }
            },
            "AiUsageToolErrorBreakdown": {
                "type": "object",
                "required": [
                    "feature",
                    "count"
                ],
                "properties": {
                    "feature": {
                        "type": "string"
                    },
                    "count": {
                        "type": "integer",
                        "minimum": 0
                    }
                }
            },
            "AiUsageToolErrorMetrics": {
                "type": "object",
                "required": [
                    "total",
                    "by_feature"
                ],
                "properties": {
                    "total": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "by_feature": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AiUsageToolErrorBreakdown"
                        }
                    }
                }
            },
            "AiWorkflow": {
                "type": "object",
                "required": [
                    "workflow_id",
                    "workflow_type",
                    "status",
                    "steps"
                ],
                "properties": {
                    "workflow_id": {
                        "type": "string"
                    },
                    "workflow_type": {
                        "type": "string"
                    },
                    "status": {
                        "$ref": "#/components/schemas/AiWorkflowStatus"
                    },
                    "current_step": {
                        "type": "integer",
                        "nullable": true
                    },
                    "last_event_type": {
                        "type": "string",
                        "nullable": true
                    },
                    "last_event_time": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "steps": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AiWorkflowStepSummary"
                        }
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "AiWorkflowCompleteRequest": {
                "type": "object",
                "required": [
                    "step_index",
                    "approval"
                ],
                "properties": {
                    "step_index": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "approval": {
                        "type": "boolean"
                    },
                    "output": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "notes": {
                        "type": "string",
                        "maxLength": 2000,
                        "nullable": true
                    }
                }
            },
            "AiWorkflowEvent": {
                "type": "object",
                "required": [
                    "event",
                    "status",
                    "timestamp"
                ],
                "properties": {
                    "event": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "message": {
                        "type": "string",
                        "nullable": true
                    },
                    "latency_ms": {
                        "type": "integer",
                        "nullable": true
                    },
                    "timestamp": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "workflow": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "payload": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "user": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer",
                                "nullable": true
                            },
                            "name": {
                                "type": "string",
                                "nullable": true
                            },
                            "email": {
                                "type": "string",
                                "nullable": true
                            }
                        }
                    }
                }
            },
            "AiWorkflowStartRequest": {
                "type": "object",
                "required": [
                    "workflow_type"
                ],
                "properties": {
                    "workflow_type": {
                        "type": "string"
                    },
                    "rfq_id": {
                        "type": "string",
                        "maxLength": 64,
                        "nullable": true
                    },
                    "goal": {
                        "type": "string",
                        "maxLength": 2000,
                        "nullable": true
                    },
                    "inputs": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "user_context": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "thread_id": {
                        "type": "integer",
                        "minimum": 1,
                        "nullable": true
                    }
                }
            },
            "AiWorkflowStatus": {
                "type": "string",
                "enum": [
                    "pending",
                    "in_progress",
                    "completed",
                    "failed",
                    "rejected",
                    "aborted"
                ]
            },
            "AiWorkflowStep": {
                "type": "object",
                "required": [
                    "workflow_id",
                    "step_index",
                    "action_type",
                    "approval_status"
                ],
                "properties": {
                    "workflow_id": {
                        "type": "string"
                    },
                    "step_index": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string",
                        "nullable": true
                    },
                    "action_type": {
                        "type": "string"
                    },
                    "inputs": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "draft": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "output": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "approval_status": {
                        "type": "string",
                        "enum": [
                            "pending",
                            "approved",
                            "rejected"
                        ]
                    },
                    "approved_by": {
                        "type": "integer",
                        "nullable": true
                    },
                    "approved_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "AiWorkflowStepSummary": {
                "type": "object",
                "properties": {
                    "step_index": {
                        "type": "integer",
                        "nullable": true
                    },
                    "action_type": {
                        "type": "string",
                        "nullable": true
                    },
                    "approval_status": {
                        "type": "string",
                        "nullable": true
                    },
                    "name": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "AnalyticsReportSummary": {
                "type": "object",
                "required": [
                    "summary_markdown",
                    "bullets",
                    "source",
                    "provider"
                ],
                "properties": {
                    "summary_markdown": {
                        "type": "string",
                        "description": "Markdown-formatted overview of key insights."
                    },
                    "bullets": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "source": {
                        "type": "string",
                        "description": "Indicates whether the content came from AI or deterministic fallback logic."
                    },
                    "provider": {
                        "type": "string",
                        "description": "Identifier for the model or fallback generator."
                    }
                }
            },
            "ApiErrorResponse": {
                "allOf": [
                    {
                        "$ref": "#/components/schemas/ErrorEnvelope"
                    }
                ]
            },
            "ApiKey": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "name",
                    "token_prefix"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "owner_user_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "name": {
                        "type": "string"
                    },
                    "token_prefix": {
                        "type": "string",
                        "description": "First six characters of the secret for display."
                    },
                    "scopes": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "active": {
                        "type": "boolean"
                    },
                    "last_used_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "expires_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "ApiKeyPreview": {
                "type": "object",
                "required": [
                    "id",
                    "prefix",
                    "created_at",
                    "last_used_at"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "prefix": {
                        "type": "string",
                        "description": "Safe-to-log key prefix (first 6 characters)."
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "last_used_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "ApiSuccessResponse": {
                "allOf": [
                    {
                        "$ref": "#/components/schemas/SuccessEnvelope"
                    }
                ]
            },
            "ApproveScrapedSupplierRequest": {
                "type": "object",
                "required": [
                    "name"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 255
                    },
                    "website": {
                        "type": "string",
                        "format": "uri",
                        "maxLength": 255,
                        "nullable": true
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "maxLength": 191,
                        "nullable": true
                    },
                    "phone": {
                        "type": "string",
                        "maxLength": 40,
                        "nullable": true
                    },
                    "address": {
                        "type": "string",
                        "maxLength": 255,
                        "nullable": true
                    },
                    "city": {
                        "type": "string",
                        "maxLength": 120,
                        "nullable": true
                    },
                    "state": {
                        "type": "string",
                        "maxLength": 120,
                        "nullable": true
                    },
                    "country": {
                        "type": "string",
                        "minLength": 2,
                        "maxLength": 2,
                        "nullable": true
                    },
                    "product_summary": {
                        "type": "string",
                        "nullable": true
                    },
                    "certifications": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "maxLength": 160
                        },
                        "nullable": true
                    },
                    "capabilities": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": false,
                        "properties": {
                            "methods": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "maxLength": 160
                                }
                            },
                            "materials": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "maxLength": 160
                                }
                            },
                            "finishes": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "maxLength": 160
                                }
                            },
                            "industries": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "maxLength": 160
                                }
                            },
                            "tolerances": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "maxLength": 120
                                }
                            },
                            "price_band": {
                                "type": "string",
                                "maxLength": 120,
                                "nullable": true
                            },
                            "summary": {
                                "type": "string",
                                "nullable": true
                            }
                        }
                    },
                    "notes": {
                        "type": "string",
                        "maxLength": 2000,
                        "nullable": true
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 365,
                        "nullable": true
                    },
                    "moq": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 1000000,
                        "nullable": true
                    },
                    "attachment_type": {
                        "type": "string",
                        "nullable": true,
                        "enum": [
                            "iso9001",
                            "iso14001",
                            "as9100",
                            "itar",
                            "reach",
                            "rohs",
                            "insurance",
                            "nda",
                            "other"
                        ]
                    },
                    "attachment": {
                        "type": "string",
                        "format": "binary",
                        "nullable": true
                    }
                }
            },
            "AuthForgotPasswordRequest": {
                "type": "object",
                "required": [
                    "email"
                ],
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email"
                    }
                },
                "additionalProperties": false
            },
            "AuthLoginRequest": {
                "type": "object",
                "required": [
                    "email",
                    "password"
                ],
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "password": {
                        "type": "string",
                        "format": "password"
                    },
                    "remember": {
                        "type": "boolean",
                        "description": "When true the session cookie is kept beyond the current browser session."
                    }
                },
                "additionalProperties": false
            },
            "AuthPersona": {
                "type": "object",
                "required": [
                    "key",
                    "type",
                    "company_id",
                    "company_name",
                    "company_status",
                    "is_default"
                ],
                "properties": {
                    "key": {
                        "type": "string",
                        "description": "Stable persona identifier combining the persona type and scoped identifiers."
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "buyer",
                            "supplier"
                        ]
                    },
                    "company_id": {
                        "type": "integer",
                        "description": "Identifier of the buyer company context for this persona. For supplier personas this is the buyer that issued the invite."
                    },
                    "company_name": {
                        "type": "string"
                    },
                    "company_status": {
                        "type": "string"
                    },
                    "company_supplier_status": {
                        "type": "string",
                        "nullable": true
                    },
                    "role": {
                        "type": "string",
                        "nullable": true,
                        "description": "Buyer role associated with the persona, when applicable."
                    },
                    "supplier_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "supplier_name": {
                        "type": "string",
                        "nullable": true
                    },
                    "supplier_company_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "supplier_company_name": {
                        "type": "string",
                        "nullable": true
                    },
                    "is_default": {
                        "type": "boolean",
                        "description": "Indicates whether this persona should be pre-selected after login."
                    }
                },
                "additionalProperties": false
            },
            "AuthResetPasswordRequest": {
                "type": "object",
                "required": [
                    "token",
                    "email",
                    "password",
                    "password_confirmation"
                ],
                "properties": {
                    "token": {
                        "type": "string",
                        "description": "Token issued via the password reset email."
                    },
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "password": {
                        "type": "string",
                        "format": "password",
                        "minLength": 8
                    },
                    "password_confirmation": {
                        "type": "string",
                        "format": "password",
                        "description": "Must match `password`."
                    }
                },
                "additionalProperties": false
            },
            "AuthSession": {
                "type": "object",
                "required": [
                    "token",
                    "user",
                    "feature_flags"
                ],
                "properties": {
                    "token": {
                        "type": "string",
                        "description": "Session identifier echoed in the `XSRF-TOKEN` cookie for SPA clients."
                    },
                    "user": {
                        "$ref": "#/components/schemas/AuthSessionUser"
                    },
                    "company": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/AuthSessionCompany"
                            }
                        ],
                        "nullable": true
                    },
                    "feature_flags": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "boolean"
                        },
                        "description": "Flattened feature flag map for the authenticated company."
                    },
                    "plan": {
                        "type": "string",
                        "nullable": true,
                        "description": "Active plan code assigned to the company, if any."
                    }
                },
                "additionalProperties": false
            },
            "AuthSessionCompany": {
                "type": "object",
                "required": [
                    "id",
                    "name",
                    "status"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "name": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "description": "Current buyer onboarding status."
                    },
                    "plan": {
                        "type": "string",
                        "nullable": true,
                        "description": "Plan code applied to the company."
                    }
                },
                "additionalProperties": false
            },
            "AuthSessionUser": {
                "type": "object",
                "required": [
                    "id",
                    "name",
                    "email",
                    "role"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "role": {
                        "type": "string",
                        "description": "Role assigned to the user (buyer_admin, supplier_user, etc.)."
                    },
                    "company_id": {
                        "type": "integer",
                        "format": "int64",
                        "nullable": true
                    }
                },
                "additionalProperties": false
            },
            "AuthSwitchPersonaRequest": {
                "type": "object",
                "required": [
                    "key"
                ],
                "properties": {
                    "key": {
                        "type": "string",
                        "description": "Persona key returned by the session payload (e.g. `buyer:12` or `supplier:45:77`)."
                    }
                },
                "additionalProperties": false
            },
            "AuthToken": {
                "type": "object",
                "required": [
                    "token",
                    "type",
                    "expires_at"
                ],
                "properties": {
                    "token": {
                        "type": "string",
                        "description": "Personal access token value. Store securely."
                    },
                    "type": {
                        "type": "string",
                        "description": "Token type indicator (always `Bearer`).",
                        "enum": [
                            "Bearer"
                        ]
                    },
                    "expires_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "AwardLinesRequest": {
                "type": "object",
                "required": [
                    "lines"
                ],
                "properties": {
                    "lines": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "required": [
                                "rfq_item_id",
                                "quote_id",
                                "quantity"
                            ],
                            "properties": {
                                "rfq_item_id": {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                "quote_id": {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                "quantity": {
                                    "type": "integer",
                                    "minimum": 1
                                }
                            }
                        }
                    }
                }
            },
            "BillingInvoice": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "nullable": true
                    },
                    "number": {
                        "type": "string",
                        "nullable": true
                    },
                    "status": {
                        "type": "string",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string",
                        "nullable": true
                    },
                    "amount_due": {
                        "type": "integer",
                        "nullable": true,
                        "description": "Minor units owed on the invoice."
                    },
                    "amount_paid": {
                        "type": "integer",
                        "nullable": true
                    },
                    "amount_remaining": {
                        "type": "integer",
                        "nullable": true
                    },
                    "total": {
                        "type": "integer",
                        "nullable": true
                    },
                    "hosted_invoice_url": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "invoice_pdf": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "due_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "period_start": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "period_end": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "collection_method": {
                        "type": "string",
                        "nullable": true
                    },
                    "attempt_count": {
                        "type": "integer",
                        "nullable": true
                    },
                    "next_payment_attempt_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "is_paid": {
                        "type": "boolean",
                        "nullable": true
                    },
                    "is_attempting_collection": {
                        "type": "boolean",
                        "nullable": true
                    }
                }
            },
            "BillingPortalSession": {
                "type": "object",
                "required": [
                    "portal"
                ],
                "properties": {
                    "portal": {
                        "type": "object",
                        "required": [
                            "provider",
                            "url"
                        ],
                        "properties": {
                            "provider": {
                                "type": "string"
                            },
                            "url": {
                                "type": "string",
                                "format": "uri"
                            }
                        }
                    }
                }
            },
            "CloseRfqRequest": {
                "type": "object",
                "properties": {
                    "reason": {
                        "type": "string",
                        "nullable": true,
                        "description": "Buyer-provided rationale for closing the RFQ."
                    },
                    "closed_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true,
                        "description": "Overrides the default (now) close timestamp if the backend permits backdating."
                    }
                }
            },
            "CompanyAddress": {
                "type": "object",
                "required": [
                    "line1",
                    "country"
                ],
                "properties": {
                    "attention": {
                        "type": "string",
                        "nullable": true
                    },
                    "line1": {
                        "type": "string"
                    },
                    "line2": {
                        "type": "string",
                        "nullable": true
                    },
                    "city": {
                        "type": "string",
                        "nullable": true
                    },
                    "state": {
                        "type": "string",
                        "nullable": true
                    },
                    "postal_code": {
                        "type": "string",
                        "nullable": true
                    },
                    "country": {
                        "type": "string"
                    }
                }
            },
            "CompanyGoodsReceiptLineInput": {
                "type": "object",
                "required": [
                    "po_line_id",
                    "qty_received"
                ],
                "properties": {
                    "po_line_id": {
                        "type": "integer"
                    },
                    "qty_received": {
                        "type": "number"
                    },
                    "notes": {
                        "type": "string",
                        "nullable": true
                    },
                    "uom": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "CompanyInvitation": {
                "type": "object",
                "required": [
                    "id",
                    "email",
                    "role",
                    "status",
                    "company_id"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "role": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "description": "Invitation lifecycle state (pending, accepted, revoked, expired)."
                    },
                    "expires_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "accepted_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "revoked_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "invited_by": {
                        "type": "integer",
                        "nullable": true
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "message": {
                        "type": "string",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "CompanyMember": {
                "type": "object",
                "required": [
                    "id",
                    "name",
                    "email",
                    "role",
                    "membership",
                    "role_conflict"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "role": {
                        "type": "string"
                    },
                    "job_title": {
                        "type": "string",
                        "nullable": true
                    },
                    "phone": {
                        "type": "string",
                        "nullable": true
                    },
                    "avatar_url": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "last_login_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "is_active_company": {
                        "type": "boolean"
                    },
                    "membership": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer",
                                "nullable": true
                            },
                            "company_id": {
                                "type": "integer",
                                "nullable": true
                            },
                            "is_default": {
                                "type": "boolean"
                            },
                            "last_used_at": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                            },
                            "created_at": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                            },
                            "updated_at": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                            }
                        }
                    },
                    "role_conflict": {
                        "type": "object",
                        "properties": {
                            "total_companies": {
                                "type": "integer"
                            },
                            "distinct_roles": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            },
                            "buyer_supplier_conflict": {
                                "type": "boolean"
                            },
                            "has_conflict": {
                                "type": "boolean"
                            }
                        }
                    }
                }
            },
            "CompanyProfile": {
                "type": "object",
                "required": [
                    "id",
                    "name",
                    "status"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "slug": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "description": "Buyer account status (pending, active, suspended, archived)."
                    },
                    "supplier_status": {
                        "type": "string",
                        "nullable": true
                    },
                    "email_domain": {
                        "type": "string",
                        "nullable": true
                    },
                    "primary_contact_name": {
                        "type": "string",
                        "nullable": true
                    },
                    "primary_contact_email": {
                        "type": "string",
                        "format": "email",
                        "nullable": true
                    },
                    "country": {
                        "type": "string",
                        "nullable": true
                    },
                    "website": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "has_completed_onboarding": {
                        "type": "boolean"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "CompanyRoleTemplateCatalog": {
                "type": "object",
                "required": [
                    "roles",
                    "permission_groups"
                ],
                "properties": {
                    "roles": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/RoleTemplate"
                        }
                    },
                    "permission_groups": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "CompanySettings": {
                "type": "object",
                "required": [
                    "legal_name",
                    "display_name",
                    "bill_to",
                    "ship_from"
                ],
                "properties": {
                    "legal_name": {
                        "type": "string"
                    },
                    "display_name": {
                        "type": "string"
                    },
                    "tax_id": {
                        "type": "string",
                        "nullable": true
                    },
                    "registration_number": {
                        "type": "string",
                        "nullable": true
                    },
                    "emails": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "format": "email"
                        }
                    },
                    "phones": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "bill_to": {
                        "$ref": "#/components/schemas/CompanyAddress"
                    },
                    "ship_from": {
                        "$ref": "#/components/schemas/CompanyAddress"
                    },
                    "logo_url": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "mark_url": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    }
                }
            },
            "CopilotActionDraft": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "action_type": {
                        "type": "string",
                        "enum": [
                            "rfq_draft",
                            "supplier_message",
                            "maintenance_checklist",
                            "inventory_whatif",
                            "award_quote",
                            "invoice_draft",
                            "approve_invoice"
                        ]
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "drafted",
                            "approved",
                            "rejected",
                            "expired"
                        ]
                    },
                    "summary": {
                        "type": "string",
                        "nullable": true
                    },
                    "payload": {
                        "type": "object",
                        "additionalProperties": true,
                        "description": "Structured payload Copilot proposes applying to the workspace."
                    },
                    "citations": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CopilotCitation"
                        }
                    },
                    "confidence": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "needs_human_review": {
                        "type": "boolean"
                    },
                    "warnings": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "output": {
                        "type": "object",
                        "additionalProperties": true,
                        "description": "Raw Copilot response for auditing and debugging."
                    },
                    "entity_type": {
                        "type": "string",
                        "nullable": true
                    },
                    "entity_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "CopilotActionFeedback": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "ai_action_draft_id": {
                        "type": "integer"
                    },
                    "rating": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 5
                    },
                    "comment": {
                        "type": "string",
                        "nullable": true
                    },
                    "user_id": {
                        "type": "integer"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "CopilotActionFeedbackRequest": {
                "type": "object",
                "required": [
                    "rating"
                ],
                "properties": {
                    "rating": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 5,
                        "description": "Rating on a five-point scale describing draft quality."
                    },
                    "comment": {
                        "type": "string",
                        "maxLength": 2000,
                        "nullable": true,
                        "description": "Optional free-form feedback for the AI team."
                    }
                }
            },
            "CopilotActionPlanRequest": {
                "type": "object",
                "required": [
                    "action_type",
                    "query"
                ],
                "properties": {
                    "action_type": {
                        "type": "string",
                        "description": "Type of Copilot action to execute.",
                        "enum": [
                            "rfq_draft",
                            "supplier_message",
                            "maintenance_checklist",
                            "inventory_whatif",
                            "award_quote",
                            "invoice_draft",
                            "approve_invoice"
                        ]
                    },
                    "query": {
                        "type": "string",
                        "maxLength": 2000,
                        "description": "Natural language instruction provided to Copilot."
                    },
                    "inputs": {
                        "type": "object",
                        "description": "Structured key/value pairs used to seed the draft payload.",
                        "additionalProperties": true
                    },
                    "user_context": {
                        "type": "object",
                        "description": "Supplemental context about the acting user and company.",
                        "additionalProperties": true
                    },
                    "top_k": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 25,
                        "default": 8,
                        "description": "Number of semantic search chunks retrieved upstream."
                    },
                    "filters": {
                        "type": "object",
                        "description": "Optional semantic search filters.",
                        "properties": {
                            "source_type": {
                                "type": "string",
                                "maxLength": 128
                            },
                            "doc_id": {
                                "type": "string",
                                "maxLength": 255
                            },
                            "tags": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "maxLength": 64
                                }
                            }
                        }
                    },
                    "entity_type": {
                        "type": "string",
                        "maxLength": 64,
                        "nullable": true,
                        "description": "Domain entity the draft references (e.g. `rfq`)."
                    },
                    "entity_id": {
                        "type": "integer",
                        "minimum": 1,
                        "nullable": true,
                        "description": "Identifier of the referenced entity when present."
                    }
                }
            },
            "CopilotActionRejectRequest": {
                "type": "object",
                "required": [
                    "reason"
                ],
                "properties": {
                    "reason": {
                        "type": "string",
                        "maxLength": 1000,
                        "description": "Human-readable explanation of why the draft was rejected."
                    }
                }
            },
            "CopilotAnswerResult": {
                "type": "object",
                "required": [
                    "answer",
                    "citations"
                ],
                "properties": {
                    "answer": {
                        "type": "string",
                        "description": "Structured natural language response assembled from the top chunks."
                    },
                    "citations": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CopilotCitation"
                        },
                        "description": "Source mapping each bullet point back to a document chunk."
                    }
                }
            },
            "CopilotCitation": {
                "type": "object",
                "required": [
                    "doc_id",
                    "doc_version",
                    "chunk_id",
                    "snippet",
                    "score"
                ],
                "properties": {
                    "doc_id": {
                        "type": "string"
                    },
                    "doc_version": {
                        "type": "string"
                    },
                    "chunk_id": {
                        "type": "string"
                    },
                    "score": {
                        "type": "number",
                        "format": "float"
                    },
                    "snippet": {
                        "type": "string"
                    }
                }
            },
            "CopilotQueryRequest": {
                "type": "object",
                "description": "Query payload accepted by copilot semantic search and answer endpoints.",
                "required": [
                    "query"
                ],
                "properties": {
                    "query": {
                        "type": "string",
                        "maxLength": 2000
                    },
                    "top_k": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 20,
                        "description": "Overrides the default number of chunks returned by the AI service."
                    },
                    "filters": {
                        "$ref": "#/components/schemas/CopilotSearchFilters"
                    }
                }
            },
            "CopilotSearchFilters": {
                "type": "object",
                "description": "Optional filters applied to copilot search and answer endpoints.",
                "properties": {
                    "source_type": {
                        "type": "string",
                        "maxLength": 100
                    },
                    "doc_id": {
                        "type": "string",
                        "description": "Document identifier as a string to match the AI index payloads."
                    },
                    "doc_version": {
                        "type": "string",
                        "maxLength": 100
                    },
                    "tags": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "maxLength": 100
                        },
                        "description": "Arbitrary metadata tags stored with the document index."
                    }
                }
            },
            "CopilotSearchHit": {
                "type": "object",
                "description": "Ranked chunk metadata returned from the semantic search endpoint.",
                "required": [
                    "doc_id",
                    "doc_version",
                    "chunk_id",
                    "score",
                    "snippet"
                ],
                "properties": {
                    "doc_id": {
                        "type": "string"
                    },
                    "doc_version": {
                        "type": "string"
                    },
                    "chunk_id": {
                        "type": "string"
                    },
                    "title": {
                        "type": "string"
                    },
                    "snippet": {
                        "type": "string",
                        "description": "Preview text trimmed to the first 250 characters."
                    },
                    "score": {
                        "type": "number",
                        "format": "float"
                    },
                    "metadata": {
                        "type": "object",
                        "additionalProperties": true,
                        "description": "Arbitrary metadata captured when the chunk was indexed."
                    }
                }
            },
            "CopilotSearchResult": {
                "type": "object",
                "required": [
                    "hits"
                ],
                "properties": {
                    "hits": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CopilotSearchHit"
                        },
                        "description": "Ordered by cosine similarity."
                    }
                }
            },
            "CreateAwardsRequest": {
                "type": "object",
                "required": [
                    "rfq_id",
                    "items"
                ],
                "properties": {
                    "rfq_id": {
                        "type": "integer",
                        "description": "Numeric RFQ identifier."
                    },
                    "items": {
                        "type": "array",
                        "minItems": 1,
                        "items": {
                            "type": "object",
                            "required": [
                                "rfq_item_id",
                                "quote_item_id"
                            ],
                            "properties": {
                                "rfq_item_id": {
                                    "type": "integer"
                                },
                                "quote_item_id": {
                                    "type": "integer"
                                },
                                "awarded_qty": {
                                    "type": "integer",
                                    "minimum": 1,
                                    "nullable": true,
                                    "description": "Optional awarded quantity for partial allocations."
                                }
                            }
                        }
                    }
                }
            },
            "CreatePurchaseOrdersFromAwardsRequest": {
                "type": "object",
                "required": [
                    "award_ids"
                ],
                "properties": {
                    "award_ids": {
                        "type": "array",
                        "minItems": 1,
                        "items": {
                            "type": "integer"
                        }
                    }
                }
            },
            "CreateShipmentPayload": {
                "type": "object",
                "required": [
                    "carrier",
                    "tracking_number",
                    "shipped_at",
                    "lines"
                ],
                "properties": {
                    "carrier": {
                        "type": "string"
                    },
                    "tracking_number": {
                        "type": "string"
                    },
                    "shipped_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "notes": {
                        "type": "string",
                        "nullable": true
                    },
                    "lines": {
                        "type": "array",
                        "minItems": 1,
                        "items": {
                            "$ref": "#/components/schemas/ShipmentLineInput"
                        }
                    }
                }
            },
            "CreditNote": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "invoice_id",
                    "credit_number",
                    "status",
                    "amount",
                    "amount_minor",
                    "currency"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "invoice_id": {
                        "type": "integer"
                    },
                    "purchase_order_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "grn_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "credit_number": {
                        "type": "string"
                    },
                    "currency": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "string"
                    },
                    "amount_minor": {
                        "type": "integer"
                    },
                    "reason": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "draft",
                            "pending_review",
                            "issued",
                            "approved",
                            "rejected"
                        ]
                    },
                    "review_comment": {
                        "type": "string",
                        "nullable": true
                    },
                    "issued_by": {
                        "type": "integer",
                        "nullable": true
                    },
                    "approved_by": {
                        "type": "integer",
                        "nullable": true
                    },
                    "approved_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "attachments": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/DocumentAttachment"
                        }
                    },
                    "lines": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CreditNoteLine"
                        }
                    },
                    "invoice": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "string",
                                "format": "uuid"
                            },
                            "invoice_number": {
                                "type": "string"
                            }
                        }
                    },
                    "purchase_order": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "po_number": {
                                "type": "string"
                            }
                        }
                    },
                    "goods_receipt_note": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "number": {
                                "type": "string"
                            }
                        }
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "CreditNoteCollection": {
                "type": "object",
                "required": [
                    "items",
                    "meta"
                ],
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CreditNote"
                        }
                    },
                    "meta": {
                        "$ref": "#/components/schemas/PageMeta"
                    }
                }
            },
            "CreditNoteLine": {
                "type": "object",
                "required": [
                    "id",
                    "invoice_line_id",
                    "qty_invoiced",
                    "qty_to_credit",
                    "unit_price_minor",
                    "currency"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "invoice_line_id": {
                        "type": "integer"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "qty_invoiced": {
                        "type": "number"
                    },
                    "qty_to_credit": {
                        "type": "number"
                    },
                    "qty_already_credited": {
                        "type": "number",
                        "nullable": true
                    },
                    "unit_price_minor": {
                        "type": "integer"
                    },
                    "currency": {
                        "type": "string"
                    },
                    "uom": {
                        "type": "string",
                        "nullable": true
                    },
                    "total_minor": {
                        "type": "integer"
                    }
                }
            },
            "CurrencyPreferences": {
                "type": "object",
                "required": [
                    "primary",
                    "display_fx"
                ],
                "properties": {
                    "primary": {
                        "type": "string",
                        "minLength": 3,
                        "maxLength": 3
                    },
                    "display_fx": {
                        "type": "boolean"
                    }
                }
            },
            "CursorMeta": {
                "type": "object",
                "description": "Pagination metadata for cursor endpoints.",
                "required": [
                    "next_cursor"
                ],
                "properties": {
                    "next_cursor": {
                        "type": "string",
                        "nullable": true
                    },
                    "prev_cursor": {
                        "type": "string",
                        "nullable": true
                    },
                    "has_next": {
                        "type": "boolean"
                    },
                    "has_prev": {
                        "type": "boolean"
                    }
                }
            },
            "DashboardMetrics": {
                "type": "object",
                "description": "Aggregated counts shown on the operations dashboard.",
                "required": [
                    "open_rfq_count",
                    "quotes_awaiting_review_count",
                    "pos_awaiting_acknowledgement_count",
                    "unpaid_invoice_count",
                    "low_stock_part_count"
                ],
                "properties": {
                    "open_rfq_count": {
                        "type": "integer",
                        "format": "int32",
                        "minimum": 0
                    },
                    "quotes_awaiting_review_count": {
                        "type": "integer",
                        "format": "int32",
                        "minimum": 0
                    },
                    "pos_awaiting_acknowledgement_count": {
                        "type": "integer",
                        "format": "int32",
                        "minimum": 0
                    },
                    "unpaid_invoice_count": {
                        "type": "integer",
                        "format": "int32",
                        "minimum": 0
                    },
                    "low_stock_part_count": {
                        "type": "integer",
                        "format": "int32",
                        "minimum": 0
                    }
                }
            },
            "DiscardScrapedSupplierRequest": {
                "type": "object",
                "properties": {
                    "notes": {
                        "type": "string",
                        "maxLength": 2000,
                        "nullable": true
                    }
                }
            },
            "Document": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "documentable_type",
                    "documentable_id",
                    "kind",
                    "category",
                    "filename",
                    "mime",
                    "size_bytes",
                    "hash",
                    "is_expired",
                    "is_public",
                    "download_url"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "documentable_type": {
                        "type": "string"
                    },
                    "documentable_id": {
                        "type": "integer"
                    },
                    "kind": {
                        "type": "string"
                    },
                    "category": {
                        "type": "string"
                    },
                    "visibility": {
                        "type": "string",
                        "nullable": true
                    },
                    "version": {
                        "type": "integer",
                        "nullable": true
                    },
                    "filename": {
                        "type": "string"
                    },
                    "mime": {
                        "type": "string"
                    },
                    "size_bytes": {
                        "type": "integer"
                    },
                    "hash": {
                        "type": "string"
                    },
                    "expires_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "meta": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "watermark": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "is_expired": {
                        "type": "boolean"
                    },
                    "is_public": {
                        "type": "boolean"
                    },
                    "download_url": {
                        "type": "string",
                        "format": "uri"
                    }
                }
            },
            "DocumentAttachment": {
                "type": "object",
                "required": [
                    "id",
                    "filename",
                    "mime",
                    "size_bytes"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "filename": {
                        "type": "string"
                    },
                    "mime": {
                        "type": "string"
                    },
                    "size_bytes": {
                        "type": "integer"
                    },
                    "version": {
                        "type": "integer",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "meta": {
                        "type": "object",
                        "additionalProperties": true,
                        "nullable": true
                    }
                }
            },
            "DocumentUploadRequest": {
                "type": "object",
                "required": [
                    "entity",
                    "entity_id",
                    "kind",
                    "category",
                    "file"
                ],
                "properties": {
                    "entity": {
                        "type": "string",
                        "description": "Target entity slug to associate with the uploaded document.",
                        "enum": [
                            "rfq",
                            "quote",
                            "po",
                            "invoice",
                            "supplier",
                            "part"
                        ]
                    },
                    "entity_id": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "kind": {
                        "type": "string",
                        "enum": [
                            "rfq",
                            "quote",
                            "po",
                            "grn_attachment",
                            "invoice",
                            "supplier",
                            "part",
                            "cad",
                            "manual",
                            "certificate",
                            "esg_pack",
                            "other"
                        ]
                    },
                    "category": {
                        "type": "string",
                        "enum": [
                            "technical",
                            "commercial",
                            "qa",
                            "logistics",
                            "financial",
                            "communication",
                            "esg",
                            "other"
                        ]
                    },
                    "visibility": {
                        "type": "string",
                        "nullable": true,
                        "description": "Visibility must match the configured `documents.allowed_visibilities` list (private, company, public)."
                    },
                    "expires_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "meta": {
                        "type": "object",
                        "additionalProperties": true,
                        "nullable": true
                    },
                    "watermark": {
                        "type": "object",
                        "additionalProperties": true,
                        "nullable": true
                    },
                    "file": {
                        "type": "string",
                        "format": "binary"
                    }
                },
                "additionalProperties": false
            },
            "DownloadJob": {
                "type": "object",
                "required": [
                    "id",
                    "document_type",
                    "document_id",
                    "format",
                    "status",
                    "attempts",
                    "requested_at"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "document_type": {
                        "type": "string",
                        "enum": [
                            "rfq",
                            "quote",
                            "purchase_order",
                            "invoice",
                            "grn",
                            "credit_note"
                        ]
                    },
                    "document_id": {
                        "type": "integer"
                    },
                    "reference": {
                        "type": "string",
                        "nullable": true
                    },
                    "format": {
                        "type": "string",
                        "enum": [
                            "pdf",
                            "csv"
                        ]
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "queued",
                            "processing",
                            "ready",
                            "failed"
                        ]
                    },
                    "filename": {
                        "type": "string",
                        "nullable": true
                    },
                    "attempts": {
                        "type": "integer"
                    },
                    "meta": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "error_message": {
                        "type": "string",
                        "nullable": true
                    },
                    "requested_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "ready_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "expires_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "last_attempted_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "requested_by": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            },
                            "email": {
                                "type": "string"
                            }
                        }
                    },
                    "download_url": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    }
                }
            },
            "EnvelopeMeta": {
                "allOf": [
                    {
                        "$ref": "#/components/schemas/RequestMeta"
                    }
                ],
                "description": "Legacy alias for response metadata."
            },
            "ErrorEnvelope": {
                "type": "object",
                "required": [
                    "status",
                    "message"
                ],
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "error"
                        ]
                    },
                    "message": {
                        "type": "string"
                    },
                    "code": {
                        "type": "string",
                        "nullable": true
                    },
                    "errors": {
                        "type": "object",
                        "description": "Field-level validation errors keyed by attribute.",
                        "additionalProperties": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    },
                    "data": {
                        "nullable": true,
                        "description": "Always null for error responses."
                    }
                },
                "additionalProperties": false
            },
            "EventDelivery": {
                "type": "object",
                "required": [
                    "id",
                    "subscription_id",
                    "event",
                    "status",
                    "attempts"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "subscription_id": {
                        "type": "integer"
                    },
                    "endpoint": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "event": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "pending",
                            "success",
                            "failed",
                            "dead_letter"
                        ]
                    },
                    "attempts": {
                        "type": "integer"
                    },
                    "max_attempts": {
                        "type": "integer",
                        "nullable": true
                    },
                    "latency_ms": {
                        "type": "integer",
                        "nullable": true
                    },
                    "response_code": {
                        "type": "integer",
                        "nullable": true
                    },
                    "response_body": {
                        "type": "string",
                        "nullable": true
                    },
                    "last_error": {
                        "type": "string",
                        "nullable": true
                    },
                    "payload": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "dead_lettered_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "dispatched_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "delivered_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "ExportPurchaseOrderResponse": {
                "type": "object",
                "required": [
                    "document",
                    "download_url"
                ],
                "properties": {
                    "document": {
                        "$ref": "#/components/schemas/PurchaseOrderPdfDocument"
                    },
                    "download_url": {
                        "type": "string",
                        "format": "uri"
                    }
                }
            },
            "ExportRequest": {
                "type": "object",
                "required": [
                    "id",
                    "type",
                    "status",
                    "filters",
                    "created_at"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "type": {
                        "type": "string",
                        "description": "Export payload type identifier."
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "queued",
                            "processing",
                            "completed",
                            "failed",
                            "expired"
                        ]
                    },
                    "filters": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "requested_by": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            },
                            "email": {
                                "type": "string"
                            }
                        }
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "completed_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "expires_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true,
                        "description": "Timestamp when the export artifact is purged from storage. Clients must requeue after expiry."
                    },
                    "download_url": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "error_message": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "ExtendRfqDeadlineRequest": {
                "type": "object",
                "required": [
                    "new_due_at",
                    "reason"
                ],
                "properties": {
                    "new_due_at": {
                        "type": "string",
                        "format": "date-time",
                        "description": "New due date for the RFQ. Must be later than the existing deadline."
                    },
                    "reason": {
                        "type": "string",
                        "description": "Buyer-visible explanation shared with suppliers."
                    },
                    "notify_suppliers": {
                        "type": "boolean",
                        "default": true,
                        "description": "Whether invited suppliers should receive notifications about the extension."
                    }
                }
            },
            "FeatureFlag": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "key",
                    "value"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "key": {
                        "type": "string"
                    },
                    "value": {
                        "type": "boolean"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "ForecastReport": {
                "type": "object",
                "required": [
                    "series",
                    "table",
                    "aggregates",
                    "filters_used"
                ],
                "properties": {
                    "series": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ForecastReportSeries"
                        }
                    },
                    "table": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ForecastReportTableRow"
                        }
                    },
                    "aggregates": {
                        "$ref": "#/components/schemas/ForecastReportAggregates"
                    },
                    "filters_used": {
                        "$ref": "#/components/schemas/ForecastReportFilters"
                    }
                }
            },
            "ForecastReportAggregates": {
                "type": "object",
                "required": [
                    "total_forecast",
                    "total_actual",
                    "mape",
                    "mae",
                    "avg_daily_demand",
                    "recommended_reorder_point",
                    "recommended_safety_stock"
                ],
                "properties": {
                    "total_forecast": {
                        "type": "number",
                        "format": "float"
                    },
                    "total_actual": {
                        "type": "number",
                        "format": "float"
                    },
                    "mape": {
                        "type": "number",
                        "format": "float"
                    },
                    "mae": {
                        "type": "number",
                        "format": "float"
                    },
                    "avg_daily_demand": {
                        "type": "number",
                        "format": "float"
                    },
                    "recommended_reorder_point": {
                        "type": "number",
                        "format": "float"
                    },
                    "recommended_safety_stock": {
                        "type": "number",
                        "format": "float"
                    }
                }
            },
            "ForecastReportFilters": {
                "type": "object",
                "required": [
                    "start_date",
                    "end_date",
                    "part_ids",
                    "category_ids",
                    "location_ids",
                    "bucket"
                ],
                "properties": {
                    "start_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "part_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        }
                    },
                    "category_ids": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "location_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        }
                    },
                    "bucket": {
                        "type": "string",
                        "enum": [
                            "daily",
                            "weekly"
                        ],
                        "description": "Time bucket applied to series data."
                    }
                }
            },
            "ForecastReportSeries": {
                "type": "object",
                "required": [
                    "part_id",
                    "part_name",
                    "data"
                ],
                "properties": {
                    "part_id": {
                        "type": "integer"
                    },
                    "part_name": {
                        "type": "string"
                    },
                    "data": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ForecastReportSeriesPoint"
                        }
                    }
                }
            },
            "ForecastReportSeriesPoint": {
                "type": "object",
                "description": "Time-bucketed actual versus forecast quantities for a part.",
                "required": [
                    "date",
                    "actual",
                    "forecast"
                ],
                "properties": {
                    "date": {
                        "type": "string",
                        "description": "ISO date or range label for the bucket."
                    },
                    "actual": {
                        "type": "number",
                        "format": "float"
                    },
                    "forecast": {
                        "type": "number",
                        "format": "float"
                    }
                }
            },
            "ForecastReportTableRow": {
                "type": "object",
                "required": [
                    "part_id",
                    "part_name",
                    "total_forecast",
                    "total_actual",
                    "mape",
                    "mae",
                    "reorder_point",
                    "safety_stock"
                ],
                "properties": {
                    "part_id": {
                        "type": "integer"
                    },
                    "part_name": {
                        "type": "string"
                    },
                    "total_forecast": {
                        "type": "number",
                        "format": "float"
                    },
                    "total_actual": {
                        "type": "number",
                        "format": "float"
                    },
                    "mape": {
                        "type": "number",
                        "format": "float",
                        "description": "Mean absolute percentage error for the part."
                    },
                    "mae": {
                        "type": "number",
                        "format": "float",
                        "description": "Mean absolute error in demand units."
                    },
                    "reorder_point": {
                        "type": "number",
                        "format": "float"
                    },
                    "safety_stock": {
                        "type": "number",
                        "format": "float"
                    }
                }
            },
            "FulfillmentSummary": {
                "type": "object",
                "required": [
                    "orderedQty",
                    "shippedQty",
                    "percent"
                ],
                "properties": {
                    "orderedQty": {
                        "type": "number"
                    },
                    "shippedQty": {
                        "type": "number"
                    },
                    "percent": {
                        "type": "number",
                        "format": "float"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "FxRate": {
                "type": "object",
                "required": [
                    "id",
                    "base_code",
                    "quote_code",
                    "rate",
                    "as_of"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "base_code": {
                        "type": "string"
                    },
                    "quote_code": {
                        "type": "string"
                    },
                    "rate": {
                        "type": "string"
                    },
                    "as_of": {
                        "type": "string",
                        "format": "date"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "GoodsReceiptLine": {
                "type": "object",
                "required": [
                    "id",
                    "purchase_order_line_id",
                    "received_qty"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "goods_receipt_note_id": {
                        "type": "integer"
                    },
                    "purchase_order_line_id": {
                        "type": "integer"
                    },
                    "po_line_id": {
                        "type": "integer"
                    },
                    "line_no": {
                        "type": "string",
                        "nullable": true
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "ordered_qty": {
                        "type": "number",
                        "nullable": true
                    },
                    "received_qty": {
                        "type": "number"
                    },
                    "accepted_qty": {
                        "type": "number",
                        "nullable": true
                    },
                    "rejected_qty": {
                        "type": "number",
                        "nullable": true
                    },
                    "previously_received": {
                        "type": "number",
                        "nullable": true
                    },
                    "remaining_qty": {
                        "type": "number",
                        "nullable": true
                    },
                    "defect_notes": {
                        "type": "string",
                        "nullable": true
                    },
                    "notes": {
                        "type": "string",
                        "nullable": true
                    },
                    "uom": {
                        "type": "string",
                        "nullable": true
                    },
                    "unit_price_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string",
                        "nullable": true
                    },
                    "variance": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "attachments": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/DocumentAttachment"
                        }
                    }
                }
            },
            "GoodsReceiptNote": {
                "type": "object",
                "required": [
                    "id",
                    "purchase_order_id",
                    "grn_number",
                    "status"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "purchase_order_id": {
                        "type": "integer"
                    },
                    "purchase_order_number": {
                        "type": "string",
                        "nullable": true
                    },
                    "po_number": {
                        "type": "string",
                        "nullable": true
                    },
                    "grn_number": {
                        "type": "string"
                    },
                    "number": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "draft",
                            "inspecting",
                            "posted",
                            "variance",
                            "rejected"
                        ]
                    },
                    "inspected_by_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "inspected_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "received_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "posted_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "reference": {
                        "type": "string",
                        "nullable": true
                    },
                    "notes": {
                        "type": "string",
                        "nullable": true
                    },
                    "supplier_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "supplier_name": {
                        "type": "string",
                        "nullable": true
                    },
                    "inspector": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            }
                        }
                    },
                    "created_by": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            }
                        }
                    },
                    "lines_count": {
                        "type": "integer",
                        "nullable": true
                    },
                    "attachments_count": {
                        "type": "integer",
                        "nullable": true
                    },
                    "lines": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/GoodsReceiptLine"
                        }
                    },
                    "attachments": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/DocumentAttachment"
                        }
                    },
                    "timeline": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "Invoice": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "purchase_order_id",
                    "invoice_number",
                    "status",
                    "currency",
                    "subtotal",
                    "tax_amount",
                    "total"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "purchase_order_id": {
                        "type": "integer"
                    },
                    "supplier_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "invoice_number": {
                        "type": "string"
                    },
                    "invoice_date": {
                        "type": "string",
                        "format": "date",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "pending",
                            "draft",
                            "submitted",
                            "approved",
                            "rejected",
                            "paid",
                            "overdue",
                            "disputed",
                            "posted"
                        ]
                    },
                    "subtotal": {
                        "type": "number",
                        "format": "float"
                    },
                    "tax_amount": {
                        "type": "number",
                        "format": "float"
                    },
                    "total": {
                        "type": "number",
                        "format": "float"
                    },
                    "match_summary": {
                        "type": "object",
                        "properties": {
                            "matched": {
                                "type": "integer"
                            },
                            "qty_mismatch": {
                                "type": "integer"
                            },
                            "price_mismatch": {
                                "type": "integer"
                            },
                            "unmatched": {
                                "type": "integer"
                            }
                        }
                    },
                    "supplier": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string",
                                "nullable": true
                            }
                        }
                    },
                    "purchase_order": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "po_number": {
                                "type": "string"
                            }
                        }
                    },
                    "lines": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/InvoiceLine"
                        }
                    },
                    "matches": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/InvoiceMatch"
                        }
                    },
                    "document": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "string",
                                "format": "uuid"
                            },
                            "filename": {
                                "type": "string"
                            },
                            "mime": {
                                "type": "string"
                            },
                            "size_bytes": {
                                "type": "integer"
                            },
                            "created_at": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                            }
                        }
                    },
                    "attachments": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/DocumentAttachment"
                        }
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "InvoiceCollection": {
                "type": "object",
                "required": [
                    "items",
                    "meta"
                ],
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Invoice"
                        }
                    },
                    "meta": {
                        "$ref": "#/components/schemas/PageMeta"
                    }
                }
            },
            "InvoiceLine": {
                "type": "object",
                "required": [
                    "id",
                    "description",
                    "quantity",
                    "unit_price"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "invoice_id": {
                        "type": "string",
                        "nullable": true
                    },
                    "po_line_id": {
                        "type": "string",
                        "nullable": true
                    },
                    "description": {
                        "type": "string"
                    },
                    "quantity": {
                        "type": "number"
                    },
                    "uom": {
                        "type": "string",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string"
                    },
                    "unit_price": {
                        "type": "number",
                        "format": "float"
                    },
                    "unit_price_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "line_subtotal": {
                        "type": "number",
                        "format": "float"
                    },
                    "tax_total": {
                        "type": "number",
                        "format": "float"
                    },
                    "line_total": {
                        "type": "number",
                        "format": "float"
                    },
                    "taxes": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "integer"
                                },
                                "tax_code_id": {
                                    "type": "integer"
                                },
                                "rate_percent": {
                                    "type": "number"
                                },
                                "amount_minor": {
                                    "type": "integer"
                                },
                                "amount": {
                                    "type": "number",
                                    "format": "float"
                                },
                                "sequence": {
                                    "type": "integer"
                                }
                            }
                        }
                    }
                }
            },
            "InvoiceLineInput": {
                "type": "object",
                "required": [
                    "po_line_id",
                    "quantity"
                ],
                "properties": {
                    "po_line_id": {
                        "type": "integer"
                    },
                    "quantity": {
                        "type": "integer"
                    },
                    "unit_price": {
                        "type": "number",
                        "format": "float"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "uom": {
                        "type": "string",
                        "nullable": true
                    },
                    "tax_code_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        }
                    }
                }
            },
            "InvoiceMatch": {
                "type": "object",
                "required": [
                    "id",
                    "result"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "invoice_id": {
                        "type": "integer"
                    },
                    "purchase_order_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "goods_receipt_note_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "result": {
                        "type": "string",
                        "enum": [
                            "matched",
                            "qty_mismatch",
                            "price_mismatch",
                            "unmatched"
                        ]
                    },
                    "details": {
                        "type": "object",
                        "additionalProperties": true,
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "LocalizationSettings": {
                "type": "object",
                "required": [
                    "timezone",
                    "locale",
                    "date_format",
                    "number_format",
                    "currency",
                    "uom"
                ],
                "properties": {
                    "timezone": {
                        "type": "string",
                        "description": "IANA timezone identifier applied to tenant data."
                    },
                    "locale": {
                        "type": "string",
                        "description": "BCP\u201147 locale for formatting dates and numerics."
                    },
                    "date_format": {
                        "type": "string",
                        "description": "Display pattern (e.g. YYYY-MM-DD, MM/DD/YYYY)."
                    },
                    "number_format": {
                        "type": "string",
                        "description": "Thousand separator style (e.g. 1,234.56)."
                    },
                    "currency": {
                        "$ref": "#/components/schemas/CurrencyPreferences"
                    },
                    "uom": {
                        "$ref": "#/components/schemas/UomMappings"
                    }
                }
            },
            "Money": {
                "type": "object",
                "description": "Monetary amount expressed in minor units. `amount` is derived from `amount_minor` and `currency` using the company rounding rules.",
                "required": [
                    "amount_minor",
                    "currency",
                    "amount"
                ],
                "properties": {
                    "amount_minor": {
                        "type": "integer"
                    },
                    "currency": {
                        "type": "string",
                        "minLength": 3,
                        "maxLength": 3
                    },
                    "amount": {
                        "type": "number",
                        "format": "float",
                        "description": "Derived major-unit representation. Submitters may omit; backend recalculates using company precision."
                    }
                }
            },
            "MoneySettings": {
                "type": "object",
                "required": [
                    "base_currency",
                    "pricing_currency",
                    "fx_source",
                    "price_round_rule",
                    "tax_regime",
                    "defaults"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "base_currency": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "code": {
                                "type": "string"
                            },
                            "name": {
                                "type": "string",
                                "nullable": true
                            },
                            "minor_unit": {
                                "type": "integer",
                                "nullable": true
                            },
                            "symbol": {
                                "type": "string",
                                "nullable": true
                            }
                        }
                    },
                    "pricing_currency": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "code": {
                                "type": "string"
                            },
                            "name": {
                                "type": "string",
                                "nullable": true
                            },
                            "minor_unit": {
                                "type": "integer",
                                "nullable": true
                            },
                            "symbol": {
                                "type": "string",
                                "nullable": true
                            }
                        }
                    },
                    "fx_source": {
                        "type": "string",
                        "enum": [
                            "manual",
                            "fixer",
                            "openexchangerates"
                        ]
                    },
                    "price_round_rule": {
                        "type": "string"
                    },
                    "tax_regime": {
                        "type": "string",
                        "enum": [
                            "exclusive",
                            "inclusive"
                        ]
                    },
                    "defaults": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "Ncr": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "grn_id",
                    "po_line_id",
                    "status",
                    "reason"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "grn_id": {
                        "type": "integer"
                    },
                    "po_line_id": {
                        "type": "integer"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "open",
                            "closed"
                        ]
                    },
                    "disposition": {
                        "type": "string",
                        "enum": [
                            "rework",
                            "return",
                            "accept_as_is"
                        ],
                        "nullable": true
                    },
                    "reason": {
                        "type": "string"
                    },
                    "attachments": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "integer"
                                }
                            }
                        }
                    },
                    "raised_by": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            }
                        }
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "NumberingRule": {
                "type": "object",
                "required": [
                    "prefix",
                    "seq_len",
                    "next",
                    "reset"
                ],
                "properties": {
                    "prefix": {
                        "type": "string",
                        "maxLength": 12
                    },
                    "seq_len": {
                        "type": "integer",
                        "minimum": 3,
                        "maximum": 10
                    },
                    "next": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "reset": {
                        "type": "string",
                        "enum": [
                            "never",
                            "yearly"
                        ]
                    },
                    "sample": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "NumberingSettings": {
                "type": "object",
                "required": [
                    "rfq",
                    "quote",
                    "po",
                    "invoice",
                    "grn",
                    "credit"
                ],
                "properties": {
                    "rfq": {
                        "$ref": "#/components/schemas/NumberingRule"
                    },
                    "quote": {
                        "$ref": "#/components/schemas/NumberingRule"
                    },
                    "po": {
                        "$ref": "#/components/schemas/NumberingRule"
                    },
                    "invoice": {
                        "$ref": "#/components/schemas/NumberingRule"
                    },
                    "grn": {
                        "$ref": "#/components/schemas/NumberingRule"
                    },
                    "credit": {
                        "$ref": "#/components/schemas/NumberingRule"
                    }
                }
            },
            "OrderShippingProfile": {
                "type": "object",
                "properties": {
                    "shipToName": {
                        "type": "string",
                        "nullable": true
                    },
                    "shipToAddress": {
                        "type": "string",
                        "nullable": true
                    },
                    "incoterm": {
                        "type": "string",
                        "nullable": true
                    },
                    "carrierPreference": {
                        "type": "string",
                        "nullable": true
                    },
                    "instructions": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "PageMeta": {
                "type": "object",
                "description": "Page/offset pagination metadata.",
                "required": [
                    "current_page",
                    "per_page",
                    "total",
                    "last_page"
                ],
                "properties": {
                    "total": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "per_page": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "current_page": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "last_page": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "page": {
                        "type": "integer",
                        "minimum": 1,
                        "readOnly": true,
                        "description": "Alias provided for SDK ergonomics. Mirrors `current_page`."
                    }
                }
            },
            "Plan": {
                "type": "object",
                "required": [
                    "id",
                    "code",
                    "name",
                    "price_usd"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "code": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "price_usd": {
                        "type": "number",
                        "format": "float"
                    },
                    "rfqs_per_month": {
                        "type": "integer",
                        "nullable": true
                    },
                    "users_max": {
                        "type": "integer",
                        "nullable": true
                    },
                    "analytics_enabled": {
                        "type": "boolean"
                    },
                    "inventory_enabled": {
                        "type": "boolean"
                    },
                    "multi_currency_enabled": {
                        "type": "boolean"
                    },
                    "tax_engine_enabled": {
                        "type": "boolean"
                    },
                    "localization_enabled": {
                        "type": "boolean"
                    },
                    "exports_enabled": {
                        "type": "boolean"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "PlanCatalogEntry": {
                "type": "object",
                "required": [
                    "code",
                    "name",
                    "analytics_enabled",
                    "exports_enabled",
                    "localization_enabled",
                    "multi_currency_enabled",
                    "tax_engine_enabled",
                    "is_free"
                ],
                "properties": {
                    "code": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "price_usd": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "rfqs_per_month": {
                        "type": "integer",
                        "nullable": true
                    },
                    "invoices_per_month": {
                        "type": "integer",
                        "nullable": true
                    },
                    "users_max": {
                        "type": "integer",
                        "nullable": true
                    },
                    "storage_gb": {
                        "type": "integer",
                        "nullable": true
                    },
                    "erp_integrations_max": {
                        "type": "integer",
                        "nullable": true
                    },
                    "analytics_enabled": {
                        "type": "boolean"
                    },
                    "analytics_history_months": {
                        "type": "integer",
                        "nullable": true
                    },
                    "risk_scores_enabled": {
                        "type": "boolean"
                    },
                    "risk_history_months": {
                        "type": "integer",
                        "nullable": true
                    },
                    "approvals_enabled": {
                        "type": "boolean"
                    },
                    "approval_levels_limit": {
                        "type": "integer",
                        "nullable": true
                    },
                    "rma_enabled": {
                        "type": "boolean"
                    },
                    "rma_monthly_limit": {
                        "type": "integer",
                        "nullable": true
                    },
                    "credit_notes_enabled": {
                        "type": "boolean"
                    },
                    "global_search_enabled": {
                        "type": "boolean"
                    },
                    "quote_revisions_enabled": {
                        "type": "boolean"
                    },
                    "digital_twin_enabled": {
                        "type": "boolean"
                    },
                    "maintenance_enabled": {
                        "type": "boolean"
                    },
                    "inventory_enabled": {
                        "type": "boolean"
                    },
                    "inventory_history_months": {
                        "type": "integer",
                        "nullable": true
                    },
                    "pr_enabled": {
                        "type": "boolean"
                    },
                    "multi_currency_enabled": {
                        "type": "boolean"
                    },
                    "tax_engine_enabled": {
                        "type": "boolean"
                    },
                    "localization_enabled": {
                        "type": "boolean"
                    },
                    "exports_enabled": {
                        "type": "boolean"
                    },
                    "export_row_limit": {
                        "type": "integer",
                        "nullable": true
                    },
                    "data_export_enabled": {
                        "type": "boolean"
                    },
                    "export_history_days": {
                        "type": "integer",
                        "nullable": true
                    },
                    "is_free": {
                        "type": "boolean"
                    }
                }
            },
            "PlanCheckoutResult": {
                "type": "object",
                "required": [
                    "requires_checkout"
                ],
                "properties": {
                    "requires_checkout": {
                        "type": "boolean"
                    },
                    "plan": {
                        "type": "string",
                        "nullable": true,
                        "description": "Present when the selected plan does not require an external checkout session."
                    },
                    "checkout": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "provider": {
                                "type": "string"
                            },
                            "session_id": {
                                "type": "string",
                                "nullable": true
                            },
                            "checkout_url": {
                                "type": "string",
                                "format": "uri",
                                "nullable": true
                            },
                            "status": {
                                "type": "string",
                                "nullable": true
                            }
                        }
                    }
                }
            },
            "PlanSelectionResult": {
                "type": "object",
                "required": [
                    "company",
                    "plan"
                ],
                "properties": {
                    "company": {
                        "type": "object",
                        "required": [
                            "id",
                            "plan",
                            "billing_status",
                            "requires_plan_selection"
                        ],
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "plan": {
                                "type": "string",
                                "nullable": true
                            },
                            "billing_status": {
                                "type": "string"
                            },
                            "requires_plan_selection": {
                                "type": "boolean"
                            }
                        }
                    },
                    "plan": {
                        "$ref": "#/components/schemas/PlanCatalogEntry"
                    }
                }
            },
            "PoChangeOrder": {
                "type": "object",
                "required": [
                    "id",
                    "purchase_order_id",
                    "status",
                    "reason"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "purchase_order_id": {
                        "type": "integer"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "proposed",
                            "accepted",
                            "rejected"
                        ]
                    },
                    "reason": {
                        "type": "string"
                    },
                    "po_revision_no": {
                        "type": "integer",
                        "nullable": true
                    },
                    "proposed_by_user_id": {
                        "type": "integer"
                    },
                    "proposed_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "changes_json": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "proposed_by_user": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "PublishRfqRequest": {
                "type": "object",
                "required": [
                    "due_at"
                ],
                "properties": {
                    "due_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "publish_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "notify_suppliers": {
                        "type": "boolean",
                        "default": true
                    },
                    "message": {
                        "type": "string",
                        "nullable": true,
                        "description": "Optional note sent with publish notifications."
                    }
                }
            },
            "PurchaseOrder": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "po_number",
                    "status",
                    "currency",
                    "total_minor"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "po_number": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "draft",
                            "sent",
                            "acknowledged",
                            "fulfilled",
                            "closed",
                            "cancelled"
                        ]
                    },
                    "ack_status": {
                        "type": "string",
                        "enum": [
                            "draft",
                            "sent",
                            "acknowledged",
                            "declined"
                        ]
                    },
                    "currency": {
                        "type": "string"
                    },
                    "incoterm": {
                        "type": "string",
                        "nullable": true
                    },
                    "tax_percent": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "subtotal": {
                        "type": "string"
                    },
                    "subtotal_minor": {
                        "type": "integer"
                    },
                    "tax_amount": {
                        "type": "string"
                    },
                    "tax_amount_minor": {
                        "type": "integer"
                    },
                    "total": {
                        "type": "string"
                    },
                    "total_minor": {
                        "type": "integer"
                    },
                    "sent_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "acknowledged_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "ack_reason": {
                        "type": "string",
                        "nullable": true
                    },
                    "revision_no": {
                        "type": "integer"
                    },
                    "rfq_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "quote_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "supplier": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string",
                                "nullable": true
                            }
                        }
                    },
                    "rfq": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "number": {
                                "type": "string"
                            },
                            "title": {
                                "type": "string",
                                "nullable": true
                            }
                        }
                    },
                    "lines": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PurchaseOrderLine"
                        }
                    },
                    "change_orders": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PoChangeOrder"
                        }
                    },
                    "deliveries": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PurchaseOrderDelivery"
                        }
                    },
                    "latest_delivery": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "purchase_order_id": {
                                "type": "integer"
                            },
                            "channel": {
                                "type": "string",
                                "enum": [
                                    "email",
                                    "webhook"
                                ]
                            },
                            "status": {
                                "type": "string",
                                "enum": [
                                    "queued",
                                    "sent",
                                    "failed"
                                ]
                            },
                            "recipients_to": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "format": "email"
                                },
                                "nullable": true
                            },
                            "recipients_cc": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "format": "email"
                                },
                                "nullable": true
                            },
                            "message": {
                                "type": "string",
                                "nullable": true
                            },
                            "delivery_reference": {
                                "type": "string",
                                "nullable": true
                            },
                            "response_meta": {
                                "type": "object",
                                "additionalProperties": true,
                                "nullable": true
                            },
                            "error_reason": {
                                "type": "string",
                                "nullable": true
                            },
                            "sent_at": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                            },
                            "created_at": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                            },
                            "updated_at": {
                                "type": "string",
                                "format": "date-time",
                                "nullable": true
                            },
                            "sent_by": {
                                "type": "object",
                                "nullable": true,
                                "properties": {
                                    "id": {
                                        "type": "integer"
                                    },
                                    "name": {
                                        "type": "string"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    }
                                }
                            }
                        }
                    },
                    "pdf_document_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "pdf_document": {
                        "type": "object",
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/PurchaseOrderPdfDocument"
                            }
                        ],
                        "nullable": true
                    },
                    "cancelled_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "PurchaseOrderDelivery": {
                "type": "object",
                "required": [
                    "id",
                    "purchase_order_id",
                    "channel",
                    "status"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "purchase_order_id": {
                        "type": "integer"
                    },
                    "channel": {
                        "type": "string",
                        "enum": [
                            "email",
                            "webhook"
                        ]
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "queued",
                            "sent",
                            "failed"
                        ]
                    },
                    "recipients_to": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "format": "email"
                        },
                        "nullable": true
                    },
                    "recipients_cc": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "format": "email"
                        },
                        "nullable": true
                    },
                    "message": {
                        "type": "string",
                        "nullable": true
                    },
                    "delivery_reference": {
                        "type": "string",
                        "nullable": true
                    },
                    "response_meta": {
                        "type": "object",
                        "additionalProperties": true,
                        "nullable": true
                    },
                    "error_reason": {
                        "type": "string",
                        "nullable": true
                    },
                    "sent_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "sent_by": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            },
                            "email": {
                                "type": "string",
                                "format": "email"
                            }
                        }
                    }
                }
            },
            "PurchaseOrderEvent": {
                "type": "object",
                "required": [
                    "id",
                    "purchase_order_id",
                    "type",
                    "summary"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "purchase_order_id": {
                        "type": "integer"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "sent",
                            "supplier_ack",
                            "supplier_decline",
                            "invoice_created",
                            "invoice_attachment"
                        ]
                    },
                    "summary": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "metadata": {
                        "type": "object",
                        "additionalProperties": true,
                        "nullable": true
                    },
                    "actor": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            },
                            "email": {
                                "type": "string",
                                "format": "email",
                                "nullable": true
                            },
                            "type": {
                                "type": "string",
                                "enum": [
                                    "buyer",
                                    "supplier",
                                    "system"
                                ]
                            }
                        }
                    },
                    "occurred_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "PurchaseOrderLine": {
                "type": "object",
                "required": [
                    "id",
                    "line_no",
                    "quantity",
                    "unit_price_minor",
                    "line_total_minor"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "line_no": {
                        "type": "integer"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "quantity": {
                        "type": "number"
                    },
                    "uom": {
                        "type": "string",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string"
                    },
                    "unit_price": {
                        "type": "number",
                        "format": "float"
                    },
                    "unit_price_minor": {
                        "type": "integer"
                    },
                    "line_subtotal": {
                        "type": "number",
                        "format": "float"
                    },
                    "line_subtotal_minor": {
                        "type": "integer"
                    },
                    "tax_total": {
                        "type": "number",
                        "format": "float"
                    },
                    "tax_total_minor": {
                        "type": "integer"
                    },
                    "line_total": {
                        "type": "number",
                        "format": "float"
                    },
                    "line_total_minor": {
                        "type": "integer"
                    },
                    "delivery_date": {
                        "type": "string",
                        "format": "date",
                        "nullable": true
                    },
                    "invoiced_quantity": {
                        "type": "integer",
                        "nullable": true
                    },
                    "remaining_quantity": {
                        "type": "integer",
                        "nullable": true
                    },
                    "taxes": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "integer"
                                },
                                "tax_code_id": {
                                    "type": "integer"
                                },
                                "rate_percent": {
                                    "type": "number"
                                },
                                "amount_minor": {
                                    "type": "integer"
                                },
                                "amount": {
                                    "type": "number",
                                    "format": "float"
                                },
                                "sequence": {
                                    "type": "integer"
                                }
                            }
                        }
                    }
                }
            },
            "PurchaseOrderPdfDocument": {
                "type": "object",
                "required": [
                    "id",
                    "filename",
                    "version",
                    "download_url"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "filename": {
                        "type": "string"
                    },
                    "version": {
                        "type": "integer"
                    },
                    "download_url": {
                        "type": "string",
                        "format": "uri"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "Quote": {
                "type": "object",
                "required": [
                    "id",
                    "rfq_id",
                    "supplier_id",
                    "status",
                    "currency",
                    "total_minor"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "rfq_id": {
                        "type": "integer"
                    },
                    "supplier_id": {
                        "type": "integer"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "draft",
                            "submitted",
                            "awarded",
                            "withdrawn",
                            "expired",
                            "lost"
                        ]
                    },
                    "currency": {
                        "type": "string"
                    },
                    "unit_price": {
                        "type": "number",
                        "format": "float"
                    },
                    "subtotal": {
                        "type": "string"
                    },
                    "subtotal_minor": {
                        "type": "integer"
                    },
                    "tax_amount": {
                        "type": "string"
                    },
                    "tax_amount_minor": {
                        "type": "integer"
                    },
                    "total": {
                        "type": "string"
                    },
                    "total_minor": {
                        "type": "integer"
                    },
                    "min_order_qty": {
                        "type": "integer",
                        "nullable": true
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "nullable": true
                    },
                    "note": {
                        "type": "string",
                        "nullable": true
                    },
                    "revision_no": {
                        "type": "integer"
                    },
                    "submitted_by": {
                        "type": "integer",
                        "nullable": true
                    },
                    "submitted_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "withdrawn_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "withdraw_reason": {
                        "type": "string",
                        "nullable": true
                    },
                    "supplier": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            }
                        }
                    },
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/QuoteItem"
                        }
                    },
                    "attachments": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                "filename": {
                                    "type": "string"
                                },
                                "path": {
                                    "type": "string"
                                },
                                "mime": {
                                    "type": "string"
                                },
                                "size_bytes": {
                                    "type": "integer"
                                }
                            }
                        }
                    },
                    "revisions": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/QuoteRevision"
                        }
                    }
                }
            },
            "QuoteComparisonRow": {
                "type": "object",
                "required": [
                    "quote_id",
                    "rfq_id",
                    "currency",
                    "status",
                    "scores"
                ],
                "properties": {
                    "quote_id": {
                        "type": "integer"
                    },
                    "rfq_id": {
                        "type": "integer"
                    },
                    "supplier": {
                        "type": "object",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string",
                        "minLength": 3,
                        "maxLength": 3
                    },
                    "total_price_minor": {
                        "type": "integer"
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "nullable": true
                    },
                    "status": {
                        "type": "string"
                    },
                    "attachments_count": {
                        "type": "integer"
                    },
                    "submitted_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "scores": {
                        "type": "object",
                        "required": [
                            "price",
                            "lead_time",
                            "rating",
                            "composite",
                            "rank"
                        ],
                        "properties": {
                            "price": {
                                "type": "number",
                                "format": "float"
                            },
                            "lead_time": {
                                "type": "number",
                                "format": "float"
                            },
                            "rating": {
                                "type": "number",
                                "format": "float"
                            },
                            "composite": {
                                "type": "number",
                                "format": "float"
                            },
                            "rank": {
                                "type": "integer"
                            }
                        }
                    },
                    "quote": {
                        "$ref": "#/components/schemas/Quote"
                    }
                }
            },
            "QuoteItem": {
                "type": "object",
                "required": [
                    "id",
                    "quote_id",
                    "rfq_item_id",
                    "unit_price_minor"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "quote_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "rfq_item_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "currency": {
                        "type": "string"
                    },
                    "quantity": {
                        "type": "number",
                        "format": "float"
                    },
                    "unit_price": {
                        "type": "number",
                        "format": "float"
                    },
                    "unit_price_minor": {
                        "type": "integer"
                    },
                    "line_subtotal": {
                        "type": "number",
                        "format": "float"
                    },
                    "line_subtotal_minor": {
                        "type": "integer"
                    },
                    "tax_total": {
                        "type": "number",
                        "format": "float"
                    },
                    "tax_total_minor": {
                        "type": "integer"
                    },
                    "line_total": {
                        "type": "number",
                        "format": "float"
                    },
                    "line_total_minor": {
                        "type": "integer"
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "nullable": true
                    },
                    "note": {
                        "type": "string",
                        "nullable": true
                    },
                    "status": {
                        "type": "string",
                        "nullable": true
                    },
                    "taxes": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                "tax_code_id": {
                                    "type": "integer"
                                },
                                "rate_percent": {
                                    "type": "number",
                                    "format": "float"
                                },
                                "amount_minor": {
                                    "type": "integer"
                                }
                            }
                        }
                    }
                }
            },
            "QuoteLineRequest": {
                "type": "object",
                "required": [
                    "rfq_item_id",
                    "lead_time_days"
                ],
                "properties": {
                    "rfq_item_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "unit_price_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "unit_price": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string",
                        "minLength": 3,
                        "maxLength": 3,
                        "nullable": true
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "note": {
                        "type": "string",
                        "nullable": true
                    },
                    "tax_code_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        }
                    },
                    "status": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "QuoteLineUpdateRequest": {
                "type": "object",
                "properties": {
                    "unit_price_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "unit_price": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string",
                        "minLength": 3,
                        "maxLength": 3,
                        "nullable": true
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "note": {
                        "type": "string",
                        "nullable": true
                    },
                    "tax_code_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        }
                    },
                    "status": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "QuoteRevision": {
                "type": "object",
                "required": [
                    "id",
                    "quote_id",
                    "revision_no",
                    "status"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "quote_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "revision_no": {
                        "type": "integer"
                    },
                    "status": {
                        "type": "string"
                    },
                    "submitted_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "note": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "QuoteSubmissionRequest": {
                "type": "object",
                "required": [
                    "supplier_id",
                    "currency",
                    "unit_price",
                    "items"
                ],
                "properties": {
                    "supplier_id": {
                        "type": "integer"
                    },
                    "currency": {
                        "type": "string",
                        "minLength": 3,
                        "maxLength": 3
                    },
                    "unit_price": {
                        "type": "number",
                        "format": "float"
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "minimum": 1,
                        "nullable": true
                    },
                    "min_order_qty": {
                        "type": "integer",
                        "minimum": 1,
                        "nullable": true
                    },
                    "notes": {
                        "type": "string",
                        "nullable": true
                    },
                    "note": {
                        "type": "string",
                        "nullable": true
                    },
                    "items": {
                        "type": "array",
                        "minItems": 1,
                        "items": {
                            "$ref": "#/components/schemas/QuoteLineRequest"
                        }
                    },
                    "attachment": {
                        "type": "string",
                        "format": "binary",
                        "nullable": true,
                        "description": "Optional supporting document uploaded with the quote."
                    }
                }
            },
            "QuoteSummary": {
                "type": "object",
                "required": [
                    "id",
                    "rfq_id",
                    "supplier_id",
                    "status",
                    "total_minor"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "rfq_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "supplier_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "status": {
                        "type": "string"
                    },
                    "total": {
                        "type": "string"
                    },
                    "total_minor": {
                        "type": "integer"
                    },
                    "currency": {
                        "type": "string"
                    },
                    "submitted_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "RateLimitRule": {
                "type": "object",
                "required": [
                    "id",
                    "scope",
                    "window_seconds",
                    "max_requests"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "scope": {
                        "type": "string",
                        "description": "Logical grouping (e.g. `tenant`, `api_key`)."
                    },
                    "window_seconds": {
                        "type": "integer"
                    },
                    "max_requests": {
                        "type": "integer"
                    },
                    "active": {
                        "type": "boolean"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "RequestMeta": {
                "type": "object",
                "description": "Metadata applied to every successful response. Includes request correlation identifiers and pagination cursors.",
                "required": [
                    "request_id"
                ],
                "properties": {
                    "request_id": {
                        "type": "string",
                        "description": "UUID assigned to the request (matches `X-Request-Id`)."
                    },
                    "pagination": {
                        "$ref": "#/components/schemas/PageMeta"
                    },
                    "cursor": {
                        "$ref": "#/components/schemas/CursorMeta"
                    }
                },
                "additionalProperties": false
            },
            "Rfp": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "title",
                    "status",
                    "problem_objectives",
                    "scope",
                    "timeline",
                    "evaluation_criteria",
                    "proposal_format",
                    "ai_assist_enabled"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "title": {
                        "type": "string",
                        "maxLength": 200
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "draft",
                            "published",
                            "in_review",
                            "awarded",
                            "no_award"
                        ]
                    },
                    "problem_objectives": {
                        "type": "string"
                    },
                    "scope": {
                        "type": "string"
                    },
                    "timeline": {
                        "type": "string"
                    },
                    "evaluation_criteria": {
                        "type": "string"
                    },
                    "proposal_format": {
                        "type": "string"
                    },
                    "ai_assist_enabled": {
                        "type": "boolean"
                    },
                    "ai_suggestions": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "meta": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "published_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "in_review_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "awarded_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "closed_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "RfpCollection": {
                "type": "object",
                "required": [
                    "items",
                    "meta"
                ],
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Rfp"
                        }
                    },
                    "meta": {
                        "type": "object",
                        "properties": {
                            "per_page": {
                                "type": "integer"
                            },
                            "next_cursor": {
                                "type": "string",
                                "nullable": true
                            },
                            "prev_cursor": {
                                "type": "string",
                                "nullable": true
                            }
                        }
                    }
                }
            },
            "RfpProposal": {
                "type": "object",
                "required": [
                    "id",
                    "rfp_id",
                    "company_id",
                    "supplier_company_id",
                    "status",
                    "lead_time_days",
                    "approach_summary",
                    "schedule_summary"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "rfp_id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "supplier_company_id": {
                        "type": "integer"
                    },
                    "status": {
                        "type": "string"
                    },
                    "price_total": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "price_total_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string",
                        "minLength": 3,
                        "maxLength": 3,
                        "nullable": true
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "approach_summary": {
                        "type": "string"
                    },
                    "schedule_summary": {
                        "type": "string"
                    },
                    "value_add_summary": {
                        "type": "string",
                        "nullable": true
                    },
                    "attachments_count": {
                        "type": "integer"
                    },
                    "meta": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "supplier_company": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer",
                                "nullable": true
                            },
                            "name": {
                                "type": "string",
                                "nullable": true
                            }
                        }
                    },
                    "attachments": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Document"
                        }
                    },
                    "submitted_by": {
                        "type": "integer",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "RfpProposalCollection": {
                "type": "object",
                "required": [
                    "items",
                    "summary"
                ],
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/RfpProposal"
                        }
                    },
                    "summary": {
                        "$ref": "#/components/schemas/RfpProposalSummary"
                    }
                }
            },
            "RfpProposalRequest": {
                "type": "object",
                "required": [
                    "currency",
                    "lead_time_days",
                    "approach_summary",
                    "schedule_summary"
                ],
                "properties": {
                    "supplier_company_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "price_total": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "price_total_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string",
                        "minLength": 3,
                        "maxLength": 3
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 3650
                    },
                    "approach_summary": {
                        "type": "string"
                    },
                    "schedule_summary": {
                        "type": "string"
                    },
                    "value_add_summary": {
                        "type": "string",
                        "nullable": true
                    },
                    "attachments": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "format": "binary"
                        }
                    },
                    "meta": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    }
                }
            },
            "RfpProposalSummary": {
                "type": "object",
                "required": [
                    "total"
                ],
                "properties": {
                    "total": {
                        "type": "integer"
                    },
                    "min_price_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "max_price_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "min_lead_time_days": {
                        "type": "integer",
                        "nullable": true
                    },
                    "max_lead_time_days": {
                        "type": "integer",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "RfpRequest": {
                "type": "object",
                "required": [
                    "title",
                    "problem_objectives",
                    "scope",
                    "timeline",
                    "evaluation_criteria",
                    "proposal_format"
                ],
                "properties": {
                    "title": {
                        "type": "string",
                        "maxLength": 200
                    },
                    "problem_objectives": {
                        "type": "string"
                    },
                    "scope": {
                        "type": "string"
                    },
                    "timeline": {
                        "type": "string",
                        "maxLength": 1000
                    },
                    "evaluation_criteria": {
                        "type": "string"
                    },
                    "proposal_format": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "draft",
                            "published",
                            "in_review",
                            "awarded",
                            "no_award"
                        ]
                    },
                    "ai_assist_enabled": {
                        "type": "boolean"
                    },
                    "ai_suggestions": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "meta": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    }
                }
            },
            "RfpUpdateRequest": {
                "type": "object",
                "properties": {
                    "title": {
                        "type": "string",
                        "maxLength": 200
                    },
                    "problem_objectives": {
                        "type": "string"
                    },
                    "scope": {
                        "type": "string"
                    },
                    "timeline": {
                        "type": "string",
                        "maxLength": 1000
                    },
                    "evaluation_criteria": {
                        "type": "string"
                    },
                    "proposal_format": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "draft",
                            "published",
                            "in_review",
                            "awarded",
                            "no_award"
                        ]
                    },
                    "ai_assist_enabled": {
                        "type": "boolean"
                    },
                    "ai_suggestions": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "meta": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    }
                }
            },
            "Rfq": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "number",
                    "title",
                    "method",
                    "quantity_total",
                    "status"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "company_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "number": {
                        "type": "string"
                    },
                    "title": {
                        "type": "string"
                    },
                    "item_name": {
                        "type": "string",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `title` kept for downstream clients until they migrate to the new resource."
                    },
                    "method": {
                        "type": "string",
                        "enum": [
                            "cnc",
                            "sheet_metal",
                            "injection_molding",
                            "3d_printing",
                            "casting",
                            "other"
                        ]
                    },
                    "material": {
                        "type": "string",
                        "nullable": true
                    },
                    "tolerance": {
                        "type": "string",
                        "nullable": true
                    },
                    "finish": {
                        "type": "string",
                        "nullable": true
                    },
                    "quantity_total": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "quantity": {
                        "type": "integer",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `quantity_total`."
                    },
                    "delivery_location": {
                        "type": "string",
                        "nullable": true
                    },
                    "client_company": {
                        "type": "string",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `delivery_location`."
                    },
                    "incoterm": {
                        "type": "string",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string",
                        "nullable": true,
                        "minLength": 3,
                        "maxLength": 3
                    },
                    "notes": {
                        "type": "string",
                        "nullable": true
                    },
                    "open_bidding": {
                        "type": "boolean"
                    },
                    "is_open_bidding": {
                        "type": "boolean",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `open_bidding`."
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "draft",
                            "open",
                            "closed",
                            "awarded",
                            "cancelled"
                        ]
                    },
                    "publish_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "sent_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `publish_at`."
                    },
                    "due_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "deadline_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `due_at`."
                    },
                    "close_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "rfq_version": {
                        "type": "integer"
                    },
                    "attachments_count": {
                        "type": "integer"
                    },
                    "meta": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "cad_document_id": {
                        "type": "string",
                        "format": "uuid",
                        "nullable": true
                    },
                    "cad_document": {
                        "type": "object",
                        "nullable": true,
                        "description": "Condensed document metadata for the attached CAD file."
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/RfqItem"
                        }
                    },
                    "quotes": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/QuoteSummary"
                        }
                    }
                }
            },
            "RfqAttachment": {
                "type": "object",
                "description": "Document attached to an RFQ per the documents deep spec.",
                "required": [
                    "id",
                    "filename",
                    "url",
                    "uploaded_at"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "document_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Identifier of the underlying Document resource."
                    },
                    "filename": {
                        "type": "string"
                    },
                    "mime": {
                        "type": "string",
                        "nullable": true
                    },
                    "size_bytes": {
                        "type": "integer",
                        "nullable": true
                    },
                    "url": {
                        "type": "string",
                        "format": "uri"
                    },
                    "uploaded_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "uploaded_by": {
                        "type": "object",
                        "nullable": true,
                        "description": "Condensed user summary for audit surfaces.",
                        "properties": {
                            "id": {
                                "type": "string",
                                "format": "uuid"
                            },
                            "name": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "RfqAwardCandidateBestPrice": {
                "type": "object",
                "nullable": true,
                "properties": {
                    "quote_id": {
                        "type": "integer"
                    },
                    "quote_item_id": {
                        "type": "integer"
                    },
                    "supplier_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "supplier_name": {
                        "type": "string",
                        "nullable": true
                    },
                    "unit_price_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "unit_price_currency": {
                        "type": "string",
                        "nullable": true
                    },
                    "converted_unit_price_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "converted_currency": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "RfqAwardCandidateExistingAward": {
                "type": "object",
                "nullable": true,
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "status": {
                        "type": "string"
                    },
                    "po_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "awarded_qty": {
                        "type": "integer",
                        "nullable": true
                    },
                    "awarded_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "RfqAwardCandidateLine": {
                "type": "object",
                "required": [
                    "id",
                    "line_no",
                    "part_name",
                    "quantity",
                    "currency",
                    "candidates"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "line_no": {
                        "type": "integer"
                    },
                    "part_name": {
                        "type": "string"
                    },
                    "spec": {
                        "type": "string",
                        "nullable": true
                    },
                    "quantity": {
                        "type": "integer"
                    },
                    "uom": {
                        "type": "string",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string"
                    },
                    "target_price_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "candidates": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/RfqAwardCandidateOption"
                        }
                    },
                    "best_price": {
                        "$ref": "#/components/schemas/RfqAwardCandidateBestPrice"
                    }
                }
            },
            "RfqAwardCandidateOption": {
                "type": "object",
                "required": [
                    "quote_id",
                    "quote_item_id",
                    "unit_price_minor",
                    "unit_price_currency",
                    "converted_currency"
                ],
                "properties": {
                    "quote_id": {
                        "type": "integer"
                    },
                    "quote_item_id": {
                        "type": "integer"
                    },
                    "supplier_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "supplier_name": {
                        "type": "string",
                        "nullable": true
                    },
                    "unit_price_minor": {
                        "type": "integer"
                    },
                    "unit_price_currency": {
                        "type": "string"
                    },
                    "converted_unit_price_minor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "converted_currency": {
                        "type": "string"
                    },
                    "conversion_unavailable": {
                        "type": "boolean"
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "nullable": true
                    },
                    "quote_revision": {
                        "type": "integer",
                        "nullable": true
                    },
                    "quote_status": {
                        "type": "string"
                    },
                    "submitted_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "award": {
                        "$ref": "#/components/schemas/RfqAwardCandidateExistingAward"
                    }
                }
            },
            "RfqClarification": {
                "type": "object",
                "required": [
                    "id",
                    "rfq_id",
                    "type",
                    "body",
                    "created_at"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "rfq_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "question",
                            "answer",
                            "amendment"
                        ]
                    },
                    "body": {
                        "type": "string"
                    },
                    "author": {
                        "type": "object",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "attachments": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "string",
                                    "format": "uuid"
                                },
                                "filename": {
                                    "type": "string"
                                },
                                "url": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            },
            "RfqCollection": {
                "type": "object",
                "required": [
                    "items",
                    "meta"
                ],
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Rfq"
                        }
                    },
                    "meta": {
                        "$ref": "#/components/schemas/PageMeta"
                    }
                }
            },
            "RfqCursorCollection": {
                "type": "object",
                "required": [
                    "items",
                    "meta"
                ],
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Rfq"
                        }
                    },
                    "meta": {
                        "type": "object",
                        "required": [
                            "per_page"
                        ],
                        "properties": {
                            "next_cursor": {
                                "type": "string",
                                "nullable": true
                            },
                            "prev_cursor": {
                                "type": "string",
                                "nullable": true
                            },
                            "per_page": {
                                "type": "integer"
                            }
                        }
                    }
                }
            },
            "RfqDeadlineExtension": {
                "type": "object",
                "required": [
                    "id",
                    "rfq_id",
                    "new_due_at",
                    "created_at"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "rfq_id": {
                        "type": "integer"
                    },
                    "previous_due_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "new_due_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "reason": {
                        "type": "string",
                        "nullable": true
                    },
                    "extended_by": {
                        "type": "integer",
                        "nullable": true
                    },
                    "extended_by_user": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer"
                            },
                            "name": {
                                "type": "string"
                            },
                            "role": {
                                "type": "string"
                            }
                        }
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "RfqInvitation": {
                "type": "object",
                "required": [
                    "id",
                    "supplier_id",
                    "status"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "supplier_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "status": {
                        "type": "string"
                    },
                    "invited_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "responded_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "RfqItem": {
                "type": "object",
                "required": [
                    "id",
                    "line_no",
                    "part_number",
                    "qty"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "line_no": {
                        "type": "integer"
                    },
                    "part_number": {
                        "type": "string"
                    },
                    "part_name": {
                        "type": "string",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `part_number`."
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "spec": {
                        "type": "string",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `description`."
                    },
                    "method": {
                        "type": "string",
                        "nullable": true
                    },
                    "material": {
                        "type": "string",
                        "nullable": true
                    },
                    "tolerance": {
                        "type": "string",
                        "nullable": true
                    },
                    "finish": {
                        "type": "string",
                        "nullable": true
                    },
                    "qty": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "quantity": {
                        "type": "integer",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `qty`."
                    },
                    "uom": {
                        "type": "string",
                        "nullable": true
                    },
                    "target_price": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "cad_doc_id": {
                        "type": "string",
                        "format": "uuid",
                        "nullable": true
                    },
                    "specs_json": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    }
                }
            },
            "RfqItemAwardSummary": {
                "type": "object",
                "required": [
                    "id",
                    "rfq_item_id",
                    "supplier_id",
                    "quote_id",
                    "quote_item_id",
                    "status"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "rfq_item_id": {
                        "type": "integer"
                    },
                    "supplier_id": {
                        "type": "integer"
                    },
                    "supplier_name": {
                        "type": "string",
                        "nullable": true
                    },
                    "quote_id": {
                        "type": "integer"
                    },
                    "quote_item_id": {
                        "type": "integer"
                    },
                    "po_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "awarded_qty": {
                        "type": "integer",
                        "nullable": true
                    },
                    "status": {
                        "type": "string"
                    },
                    "awarded_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "RfqLinePayload": {
                "type": "object",
                "required": [
                    "part_number",
                    "qty"
                ],
                "properties": {
                    "part_number": {
                        "type": "string"
                    },
                    "part_name": {
                        "type": "string",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `part_number`."
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "spec": {
                        "type": "string",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `description`."
                    },
                    "method": {
                        "type": "string",
                        "nullable": true
                    },
                    "material": {
                        "type": "string",
                        "nullable": true
                    },
                    "tolerance": {
                        "type": "string",
                        "nullable": true
                    },
                    "finish": {
                        "type": "string",
                        "nullable": true
                    },
                    "qty": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "quantity": {
                        "type": "integer",
                        "nullable": true,
                        "deprecated": true,
                        "description": "Legacy alias of `qty`."
                    },
                    "uom": {
                        "type": "string",
                        "nullable": true
                    },
                    "target_price": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "cad_doc_id": {
                        "type": "string",
                        "format": "uuid",
                        "nullable": true
                    },
                    "specs_json": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    }
                }
            },
            "RfqQuote": {
                "type": "object",
                "required": [
                    "id",
                    "rfq_id",
                    "supplier_id",
                    "unit_price_usd",
                    "lead_time_days",
                    "via",
                    "status",
                    "submitted_at"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "rfq_id": {
                        "type": "integer"
                    },
                    "supplier_id": {
                        "type": "integer"
                    },
                    "supplier_name": {
                        "type": "string",
                        "nullable": true
                    },
                    "unit_price_usd": {
                        "type": "number",
                        "format": "float"
                    },
                    "total_price_usd": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "revision": {
                        "type": "integer"
                    },
                    "lead_time_days": {
                        "type": "integer"
                    },
                    "note": {
                        "type": "string",
                        "nullable": true
                    },
                    "attachment_path": {
                        "type": "string",
                        "nullable": true
                    },
                    "via": {
                        "type": "string",
                        "enum": [
                            "direct",
                            "bidding"
                        ]
                    },
                    "status": {
                        "type": "string"
                    },
                    "submitted_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "RfqQuoteCollection": {
                "type": "object",
                "required": [
                    "items",
                    "meta"
                ],
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/RfqQuote"
                        }
                    },
                    "meta": {
                        "type": "object",
                        "required": [
                            "per_page"
                        ],
                        "properties": {
                            "next_cursor": {
                                "type": "string",
                                "nullable": true
                            },
                            "prev_cursor": {
                                "type": "string",
                                "nullable": true
                            },
                            "per_page": {
                                "type": "integer"
                            }
                        }
                    }
                }
            },
            "RfqQuoteRequest": {
                "type": "object",
                "required": [
                    "supplier_id",
                    "unit_price_usd",
                    "lead_time_days",
                    "via"
                ],
                "properties": {
                    "supplier_id": {
                        "type": "integer"
                    },
                    "unit_price_usd": {
                        "type": "number",
                        "format": "float"
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "note": {
                        "type": "string",
                        "nullable": true
                    },
                    "via": {
                        "type": "string",
                        "enum": [
                            "direct",
                            "bidding"
                        ]
                    },
                    "attachment": {
                        "type": "string",
                        "format": "binary",
                        "nullable": true
                    }
                }
            },
            "RfqTimelineEntry": {
                "allOf": [
                    {
                        "$ref": "#/components/schemas/Timeline"
                    },
                    {
                        "type": "object",
                        "required": [
                            "event"
                        ],
                        "properties": {
                            "event": {
                                "type": "string",
                                "description": "Machine-readable event identifier (e.g., created, published, invitation_sent)."
                            },
                            "actor": {
                                "type": "object",
                                "nullable": true,
                                "properties": {
                                    "id": {
                                        "type": "string",
                                        "format": "uuid"
                                    },
                                    "name": {
                                        "type": "string"
                                    }
                                }
                            },
                            "context": {
                                "type": "object",
                                "additionalProperties": true,
                                "nullable": true,
                                "description": "Arbitrary metadata for UI rendering."
                            }
                        }
                    }
                ]
            },
            "Rma": {
                "type": "object",
                "required": [
                    "id",
                    "status",
                    "purchase_order_id"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "draft",
                            "submitted",
                            "reviewing",
                            "approved",
                            "rejected",
                            "closed"
                        ]
                    },
                    "purchase_order_id": {
                        "type": "integer"
                    },
                    "reason": {
                        "type": "string"
                    },
                    "resolution": {
                        "type": "string",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "RoleTemplate": {
                "type": "object",
                "required": [
                    "id",
                    "slug",
                    "name",
                    "permissions"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "slug": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "permissions": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "is_system": {
                        "type": "boolean"
                    }
                }
            },
            "SalesOrderAcknowledgement": {
                "type": "object",
                "required": [
                    "decision"
                ],
                "properties": {
                    "decision": {
                        "type": "string",
                        "enum": [
                            "accept",
                            "decline"
                        ]
                    },
                    "reason": {
                        "type": "string",
                        "nullable": true
                    },
                    "acknowledgedAt": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "actorName": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "SalesOrderCursorCollection": {
                "type": "object",
                "required": [
                    "items",
                    "meta"
                ],
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/SalesOrderSummary"
                        }
                    },
                    "meta": {
                        "type": "object",
                        "required": [
                            "per_page"
                        ],
                        "properties": {
                            "next_cursor": {
                                "type": "string",
                                "nullable": true
                            },
                            "prev_cursor": {
                                "type": "string",
                                "nullable": true
                            },
                            "per_page": {
                                "type": "integer"
                            }
                        }
                    }
                }
            },
            "SalesOrderDetail": {
                "allOf": [
                    {
                        "$ref": "#/components/schemas/SalesOrderSummary"
                    },
                    {
                        "type": "object",
                        "required": [
                            "lines",
                            "shipments",
                            "timeline"
                        ],
                        "properties": {
                            "lines": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/SalesOrderLine"
                                }
                            },
                            "shipments": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/SalesOrderShipment"
                                }
                            },
                            "timeline": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/SalesOrderTimelineEntry"
                                }
                            },
                            "acknowledgements": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/SalesOrderAcknowledgement"
                                },
                                "nullable": true
                            }
                        }
                    }
                ]
            },
            "SalesOrderLine": {
                "type": "object",
                "required": [
                    "id",
                    "description",
                    "qtyOrdered"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "soLineId": {
                        "type": "integer",
                        "nullable": true
                    },
                    "poLineId": {
                        "type": "integer",
                        "nullable": true
                    },
                    "itemId": {
                        "type": "integer",
                        "nullable": true
                    },
                    "sku": {
                        "type": "string",
                        "nullable": true
                    },
                    "description": {
                        "type": "string"
                    },
                    "uom": {
                        "type": "string",
                        "nullable": true
                    },
                    "qtyOrdered": {
                        "type": "number"
                    },
                    "qtyAllocated": {
                        "type": "number",
                        "nullable": true
                    },
                    "qtyShipped": {
                        "type": "number",
                        "nullable": true
                    },
                    "unitPriceMinor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "currency": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "SalesOrderShipment": {
                "type": "object",
                "required": [
                    "id",
                    "soId",
                    "shipmentNo",
                    "status",
                    "lines"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "soId": {
                        "type": "integer"
                    },
                    "shipmentNo": {
                        "type": "string"
                    },
                    "status": {
                        "$ref": "#/components/schemas/ShipmentStatus"
                    },
                    "carrier": {
                        "type": "string",
                        "nullable": true
                    },
                    "trackingNumber": {
                        "type": "string",
                        "nullable": true
                    },
                    "shippedAt": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "deliveredAt": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "notes": {
                        "type": "string",
                        "nullable": true
                    },
                    "lines": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ShipmentLineItem"
                        }
                    }
                }
            },
            "SalesOrderStatus": {
                "type": "string",
                "enum": [
                    "draft",
                    "pending_ack",
                    "accepted",
                    "partially_fulfilled",
                    "fulfilled",
                    "cancelled"
                ]
            },
            "SalesOrderSummary": {
                "type": "object",
                "required": [
                    "id",
                    "soNumber",
                    "poId",
                    "buyerCompanyId",
                    "supplierCompanyId",
                    "status",
                    "currency"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "soNumber": {
                        "type": "string"
                    },
                    "poId": {
                        "type": "integer"
                    },
                    "buyerCompanyId": {
                        "type": "integer"
                    },
                    "buyerCompanyName": {
                        "type": "string",
                        "nullable": true
                    },
                    "supplierCompanyId": {
                        "type": "integer"
                    },
                    "supplierCompanyName": {
                        "type": "string",
                        "nullable": true
                    },
                    "status": {
                        "$ref": "#/components/schemas/SalesOrderStatus"
                    },
                    "currency": {
                        "type": "string"
                    },
                    "totals": {
                        "$ref": "#/components/schemas/SalesOrderTotals"
                    },
                    "issueDate": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "dueDate": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "notes": {
                        "type": "string",
                        "nullable": true
                    },
                    "shipping": {
                        "allOf": [
                            {
                                "$ref": "#/components/schemas/OrderShippingProfile"
                            }
                        ],
                        "nullable": true
                    },
                    "fulfillment": {
                        "$ref": "#/components/schemas/FulfillmentSummary"
                    },
                    "shipmentsCount": {
                        "type": "integer",
                        "nullable": true
                    },
                    "lastEventAt": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "SalesOrderTimelineEntry": {
                "type": "object",
                "required": [
                    "id",
                    "type",
                    "summary"
                ],
                "properties": {
                    "id": {
                        "oneOf": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "string"
                            }
                        ]
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "acknowledged",
                            "shipment",
                            "status_change",
                            "note"
                        ]
                    },
                    "summary": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "occurredAt": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "actor": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "id": {
                                "type": "integer",
                                "nullable": true
                            },
                            "name": {
                                "type": "string",
                                "nullable": true
                            },
                            "email": {
                                "type": "string",
                                "format": "email",
                                "nullable": true
                            }
                        }
                    },
                    "metadata": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    }
                }
            },
            "SalesOrderTotals": {
                "type": "object",
                "required": [
                    "currency"
                ],
                "properties": {
                    "currency": {
                        "type": "string"
                    },
                    "subtotalMinor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "taxMinor": {
                        "type": "integer",
                        "nullable": true
                    },
                    "totalMinor": {
                        "type": "integer",
                        "nullable": true
                    }
                }
            },
            "SavedSearch": {
                "type": "object",
                "required": [
                    "id",
                    "name",
                    "query"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "query": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "shared": {
                        "type": "boolean"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "ScrapedSupplier": {
                "type": "object",
                "required": [
                    "id",
                    "scrape_job_id",
                    "company_id",
                    "name",
                    "status",
                    "created_at",
                    "updated_at"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "scrape_job_id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "website": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "industry_tags": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "nullable": true
                    },
                    "address": {
                        "type": "string",
                        "nullable": true
                    },
                    "city": {
                        "type": "string",
                        "nullable": true
                    },
                    "state": {
                        "type": "string",
                        "nullable": true
                    },
                    "country": {
                        "type": "string",
                        "nullable": true
                    },
                    "phone": {
                        "type": "string",
                        "nullable": true
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "nullable": true
                    },
                    "contact_person": {
                        "type": "string",
                        "nullable": true
                    },
                    "certifications": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "nullable": true
                    },
                    "product_summary": {
                        "type": "string",
                        "nullable": true
                    },
                    "source_url": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "confidence": {
                        "type": "number",
                        "format": "double",
                        "nullable": true
                    },
                    "metadata": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "pending",
                            "approved",
                            "discarded"
                        ]
                    },
                    "approved_supplier_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "reviewed_by": {
                        "type": "integer",
                        "nullable": true
                    },
                    "reviewed_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "review_notes": {
                        "type": "string",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "SearchResult": {
                "type": "object",
                "required": [
                    "id",
                    "type",
                    "title",
                    "url"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "description": "Result type identifier (rfq, quote, supplier, purchase_order, etc.)."
                    },
                    "title": {
                        "type": "string"
                    },
                    "subtitle": {
                        "type": "string",
                        "nullable": true
                    },
                    "snippet": {
                        "type": "string",
                        "nullable": true
                    },
                    "url": {
                        "type": "string",
                        "format": "uri"
                    }
                }
            },
            "SelfRegistrationRequest": {
                "type": "object",
                "required": [
                    "name",
                    "email",
                    "password",
                    "password_confirmation",
                    "company_name",
                    "company_domain",
                    "registration_no",
                    "tax_id",
                    "website",
                    "company_documents"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 160
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "maxLength": 191
                    },
                    "password": {
                        "type": "string",
                        "format": "password",
                        "minLength": 8
                    },
                    "password_confirmation": {
                        "type": "string",
                        "format": "password",
                        "description": "Must match `password`."
                    },
                    "company_name": {
                        "type": "string",
                        "maxLength": 160
                    },
                    "company_domain": {
                        "type": "string",
                        "description": "Public email domain used for verification.",
                        "pattern": "^(?!-)(?:[a-z0-9-]+\\.)+[a-z]{2,}$"
                    },
                    "registration_no": {
                        "type": "string",
                        "maxLength": 120
                    },
                    "tax_id": {
                        "type": "string",
                        "maxLength": 120
                    },
                    "website": {
                        "type": "string",
                        "format": "uri",
                        "maxLength": 191
                    },
                    "address": {
                        "type": "string",
                        "maxLength": 500,
                        "nullable": true
                    },
                    "phone": {
                        "type": "string",
                        "maxLength": 60,
                        "nullable": true
                    },
                    "country": {
                        "type": "string",
                        "description": "ISO 3166-1 alpha-2 country code.",
                        "minLength": 2,
                        "maxLength": 2,
                        "nullable": true
                    },
                    "company_documents": {
                        "type": "array",
                        "minItems": 1,
                        "maxItems": 5,
                        "items": {
                            "type": "object",
                            "required": [
                                "type",
                                "file"
                            ],
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "enum": [
                                        "registration",
                                        "tax",
                                        "esg",
                                        "other"
                                    ]
                                },
                                "file": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    }
                },
                "additionalProperties": false
            },
            "ShipmentLineInput": {
                "type": "object",
                "required": [
                    "so_line_id",
                    "qty_shipped"
                ],
                "properties": {
                    "so_line_id": {
                        "type": "integer"
                    },
                    "qty_shipped": {
                        "type": "number"
                    }
                }
            },
            "ShipmentLineItem": {
                "type": "object",
                "required": [
                    "soLineId",
                    "qtyShipped"
                ],
                "properties": {
                    "soLineId": {
                        "type": "integer"
                    },
                    "qtyShipped": {
                        "type": "number"
                    }
                }
            },
            "ShipmentStatus": {
                "type": "string",
                "enum": [
                    "pending",
                    "in_transit",
                    "delivered",
                    "cancelled"
                ]
            },
            "StartAiTrainingRequest": {
                "type": "object",
                "required": [
                    "feature",
                    "company_id"
                ],
                "properties": {
                    "feature": {
                        "type": "string",
                        "enum": [
                            "forecast",
                            "risk",
                            "rag",
                            "actions",
                            "workflows",
                            "chat"
                        ]
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date",
                        "nullable": true
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date",
                        "nullable": true
                    },
                    "horizon": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 365,
                        "nullable": true
                    },
                    "reindex_all": {
                        "type": "boolean",
                        "nullable": true
                    },
                    "dataset_upload_id": {
                        "type": "string",
                        "nullable": true
                    },
                    "parameters": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    }
                }
            },
            "StartSupplierScrapeRequest": {
                "type": "object",
                "required": [
                    "company_id",
                    "query",
                    "max_results"
                ],
                "properties": {
                    "company_id": {
                        "type": "integer"
                    },
                    "query": {
                        "type": "string",
                        "maxLength": 255
                    },
                    "region": {
                        "type": "string",
                        "maxLength": 255,
                        "nullable": true
                    },
                    "max_results": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 25
                    }
                }
            },
            "SuccessEnvelope": {
                "type": "object",
                "required": [
                    "status",
                    "data"
                ],
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "success"
                        ]
                    },
                    "message": {
                        "type": "string",
                        "nullable": true
                    },
                    "data": {
                        "description": "Module-specific payload."
                    },
                    "meta": {
                        "$ref": "#/components/schemas/RequestMeta"
                    }
                },
                "additionalProperties": false,
                "description": "Wrapper for all successful responses. `meta.request_id` always echoes the inbound `X-Request-Id` or an internally generated UUID."
            },
            "Supplier": {
                "type": "object",
                "required": [
                    "id",
                    "name"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "description": "Supplier onboarding status."
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "SupplierApplication": {
                "type": "object",
                "required": [
                    "id",
                    "supplier_name",
                    "status"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "supplier_name": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "submitted_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "SupplierApplicationPayload": {
                "type": "object",
                "required": [
                    "capabilities"
                ],
                "properties": {
                    "capabilities": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "methods": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "maxLength": 160
                                }
                            },
                            "materials": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "maxLength": 160
                                }
                            },
                            "tolerances": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "maxLength": 120
                                }
                            },
                            "finishes": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "maxLength": 160
                                }
                            },
                            "industries": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "maxLength": 160
                                }
                            }
                        }
                    },
                    "description": {
                        "type": "string",
                        "maxLength": 500,
                        "nullable": true
                    },
                    "address": {
                        "type": "string",
                        "maxLength": 191,
                        "nullable": true
                    },
                    "country": {
                        "type": "string",
                        "minLength": 2,
                        "maxLength": 2,
                        "nullable": true
                    },
                    "city": {
                        "type": "string",
                        "maxLength": 160,
                        "nullable": true
                    },
                    "moq": {
                        "type": "integer",
                        "minimum": 1,
                        "nullable": true
                    },
                    "min_order_qty": {
                        "type": "integer",
                        "minimum": 1,
                        "nullable": true
                    },
                    "lead_time_days": {
                        "type": "integer",
                        "minimum": 1,
                        "nullable": true
                    },
                    "geo": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "lat": {
                                "type": "number",
                                "format": "double"
                            },
                            "lng": {
                                "type": "number",
                                "format": "double"
                            }
                        }
                    },
                    "certifications": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "maxLength": 160
                        },
                        "nullable": true
                    },
                    "facilities": {
                        "type": "string",
                        "maxLength": 500,
                        "nullable": true
                    },
                    "website": {
                        "type": "string",
                        "format": "uri",
                        "maxLength": 191,
                        "nullable": true
                    },
                    "contact": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                            "name": {
                                "type": "string",
                                "maxLength": 160
                            },
                            "email": {
                                "type": "string",
                                "format": "email",
                                "maxLength": 191
                            },
                            "phone": {
                                "type": "string",
                                "maxLength": 60
                            }
                        }
                    },
                    "notes": {
                        "type": "string",
                        "maxLength": 255,
                        "nullable": true
                    },
                    "documents": {
                        "type": "array",
                        "items": {
                            "type": "integer"
                        },
                        "nullable": true
                    }
                },
                "additionalProperties": false
            },
            "SupplierDocument": {
                "type": "object",
                "required": [
                    "id",
                    "type",
                    "status",
                    "filename"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "supplier_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "document_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "type": {
                        "type": "string",
                        "description": "Document classification (iso9001, nda, other, etc.)."
                    },
                    "status": {
                        "type": "string"
                    },
                    "path": {
                        "type": "string",
                        "nullable": true
                    },
                    "download_url": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "mime": {
                        "type": "string",
                        "nullable": true
                    },
                    "filename": {
                        "type": "string"
                    },
                    "size_bytes": {
                        "type": "integer"
                    },
                    "issued_at": {
                        "type": "string",
                        "format": "date",
                        "nullable": true
                    },
                    "expires_at": {
                        "type": "string",
                        "format": "date",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "SupplierPerformanceFilters": {
                "type": "object",
                "required": [
                    "start_date",
                    "end_date",
                    "bucket",
                    "supplier_id"
                ],
                "properties": {
                    "start_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "bucket": {
                        "type": "string",
                        "enum": [
                            "weekly",
                            "monthly"
                        ]
                    },
                    "supplier_id": {
                        "type": "integer"
                    }
                }
            },
            "SupplierPerformanceReport": {
                "type": "object",
                "required": [
                    "series",
                    "table",
                    "filters_used"
                ],
                "properties": {
                    "series": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/SupplierPerformanceSeries"
                        }
                    },
                    "table": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/SupplierPerformanceTableRow"
                        }
                    },
                    "filters_used": {
                        "$ref": "#/components/schemas/SupplierPerformanceFilters"
                    }
                }
            },
            "SupplierPerformanceSeries": {
                "type": "object",
                "required": [
                    "metric_name",
                    "label",
                    "data"
                ],
                "properties": {
                    "metric_name": {
                        "type": "string",
                        "enum": [
                            "on_time_delivery_rate",
                            "defect_rate",
                            "lead_time_variance",
                            "price_volatility",
                            "service_responsiveness"
                        ]
                    },
                    "label": {
                        "type": "string"
                    },
                    "data": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/SupplierPerformanceSeriesPoint"
                        }
                    }
                }
            },
            "SupplierPerformanceSeriesPoint": {
                "type": "object",
                "required": [
                    "date",
                    "value"
                ],
                "properties": {
                    "date": {
                        "type": "string",
                        "description": "Week or month label applied to the metric bucket."
                    },
                    "value": {
                        "type": "number",
                        "format": "float"
                    }
                }
            },
            "SupplierPerformanceTableRow": {
                "type": "object",
                "required": [
                    "supplier_id",
                    "on_time_delivery_rate",
                    "defect_rate",
                    "lead_time_variance",
                    "price_volatility",
                    "service_responsiveness"
                ],
                "properties": {
                    "supplier_id": {
                        "type": "integer"
                    },
                    "supplier_name": {
                        "type": "string",
                        "nullable": true
                    },
                    "on_time_delivery_rate": {
                        "type": "number",
                        "format": "float"
                    },
                    "defect_rate": {
                        "type": "number",
                        "format": "float"
                    },
                    "lead_time_variance": {
                        "type": "number",
                        "format": "float",
                        "description": "Standard deviation of lead times expressed in days."
                    },
                    "price_volatility": {
                        "type": "number",
                        "format": "float"
                    },
                    "service_responsiveness": {
                        "type": "number",
                        "format": "float",
                        "description": "Average acknowledgement time in hours."
                    },
                    "risk_score": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "risk_category": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "SupplierScrapeJob": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "query",
                    "status",
                    "created_at",
                    "updated_at"
                ],
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "user_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "query": {
                        "type": "string"
                    },
                    "region": {
                        "type": "string",
                        "nullable": true
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "pending",
                            "running",
                            "completed",
                            "failed"
                        ]
                    },
                    "result_count": {
                        "type": "integer",
                        "nullable": true
                    },
                    "error_message": {
                        "type": "string",
                        "nullable": true
                    },
                    "parameters": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    },
                    "started_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "finished_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "TaxCode": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "code",
                    "name",
                    "type"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "code": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "vat",
                            "gst",
                            "sales",
                            "withholding",
                            "custom"
                        ]
                    },
                    "rate_percent": {
                        "type": "number",
                        "nullable": true
                    },
                    "is_compound": {
                        "type": "boolean"
                    },
                    "active": {
                        "type": "boolean"
                    },
                    "meta": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "Timeline": {
                "type": "object",
                "properties": {
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "description": "ISO 8601 timestamp in the tenant's configured timezone."
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "description": "ISO 8601 timestamp in the tenant's configured timezone."
                    },
                    "deleted_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true,
                        "description": "ISO 8601 timestamp in the tenant's configured timezone."
                    }
                }
            },
            "Uom": {
                "type": "object",
                "required": [
                    "code",
                    "name",
                    "dimension",
                    "symbol",
                    "si_base"
                ],
                "properties": {
                    "code": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "dimension": {
                        "type": "string"
                    },
                    "symbol": {
                        "type": "string",
                        "nullable": true
                    },
                    "si_base": {
                        "type": "boolean"
                    }
                }
            },
            "UomConversion": {
                "type": "object",
                "required": [
                    "from_code",
                    "to_code",
                    "factor"
                ],
                "properties": {
                    "from_code": {
                        "type": "string"
                    },
                    "to_code": {
                        "type": "string"
                    },
                    "factor": {
                        "type": "number",
                        "format": "float"
                    },
                    "offset": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    }
                }
            },
            "UomMappings": {
                "type": "object",
                "required": [
                    "base_uom",
                    "maps"
                ],
                "properties": {
                    "base_uom": {
                        "type": "string"
                    },
                    "maps": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "string"
                        }
                    }
                }
            },
            "UpdateShipmentStatusPayload": {
                "type": "object",
                "required": [
                    "status"
                ],
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "in_transit",
                            "delivered"
                        ]
                    },
                    "delivered_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true,
                        "description": "Required when `status` is `delivered`."
                    }
                }
            },
            "UserCompany": {
                "type": "object",
                "required": [
                    "id",
                    "name",
                    "status",
                    "role",
                    "is_default",
                    "is_active"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    },
                    "supplier_status": {
                        "type": "string",
                        "nullable": true
                    },
                    "role": {
                        "type": "string",
                        "nullable": true
                    },
                    "is_default": {
                        "type": "boolean"
                    },
                    "is_active": {
                        "type": "boolean"
                    }
                }
            },
            "UserProfile": {
                "type": "object",
                "required": [
                    "id",
                    "name",
                    "email",
                    "role"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "name": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "role": {
                        "type": "string"
                    },
                    "company_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "job_title": {
                        "type": "string",
                        "nullable": true
                    },
                    "phone": {
                        "type": "string",
                        "nullable": true
                    },
                    "locale": {
                        "type": "string",
                        "nullable": true
                    },
                    "timezone": {
                        "type": "string",
                        "nullable": true
                    },
                    "avatar_url": {
                        "type": "string",
                        "format": "uri",
                        "nullable": true
                    },
                    "avatar_path": {
                        "type": "string",
                        "nullable": true
                    },
                    "email_verified_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "WebhookDelivery": {
                "type": "object",
                "required": [
                    "id",
                    "subscription_id",
                    "event",
                    "status",
                    "attempts"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "subscription_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "company_id": {
                        "type": "integer",
                        "nullable": true
                    },
                    "event": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "pending",
                            "dispatched",
                            "delivered",
                            "failed",
                            "dead_letter"
                        ]
                    },
                    "attempts": {
                        "type": "integer"
                    },
                    "last_error": {
                        "type": "string",
                        "nullable": true
                    },
                    "dispatched_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "delivered_at": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "WebhookSubscription": {
                "type": "object",
                "required": [
                    "id",
                    "company_id",
                    "url",
                    "events",
                    "active"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "company_id": {
                        "type": "integer"
                    },
                    "url": {
                        "type": "string",
                        "format": "uri"
                    },
                    "secret_hint": {
                        "type": "string",
                        "nullable": true
                    },
                    "events": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "active": {
                        "type": "boolean"
                    },
                    "retry_policy": {
                        "type": "object",
                        "additionalProperties": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "WithdrawQuoteRequest": {
                "type": "object",
                "required": [
                    "reason"
                ],
                "properties": {
                    "reason": {
                        "type": "string",
                        "minLength": 3
                    }
                }
            }
        },
        "responses": {
            "Forbidden": {
                "description": "Authenticated but lacking required permissions.",
                "headers": {
                    "X-Request-Id": {
                        "$ref": "#/components/headers/XRequestId"
                    }
                },
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ApiErrorResponse"
                        },
                        "example": {
                            "status": "error",
                            "message": "Forbidden.",
                            "data": null
                        }
                    }
                }
            },
            "NotFound": {
                "description": "Resource not found.",
                "headers": {
                    "X-Request-Id": {
                        "$ref": "#/components/headers/XRequestId"
                    }
                },
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ApiErrorResponse"
                        },
                        "example": {
                            "status": "error",
                            "message": "Not found",
                            "data": null
                        }
                    }
                }
            },
            "ServerError": {
                "description": "Unexpected server error. Contact support with the supplied request identifier.",
                "headers": {
                    "X-Request-Id": {
                        "$ref": "#/components/headers/XRequestId"
                    }
                },
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ApiErrorResponse"
                        },
                        "example": {
                            "status": "error",
                            "message": "Unexpected error occurred.",
                            "data": null
                        }
                    }
                }
            },
            "TooManyRequests": {
                "description": "Rate limit exceeded for the current identity.",
                "headers": {
                    "X-Request-Id": {
                        "$ref": "#/components/headers/XRequestId"
                    },
                    "X-RateLimit-Limit": {
                        "$ref": "#/components/headers/XRateLimitLimit"
                    },
                    "X-RateLimit-Remaining": {
                        "$ref": "#/components/headers/XRateLimitRemaining"
                    },
                    "X-RateLimit-Reset": {
                        "$ref": "#/components/headers/XRateLimitReset"
                    }
                },
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ApiErrorResponse"
                        },
                        "example": {
                            "status": "error",
                            "message": "Request limit exceeded, retry later.",
                            "code": "RATE_LIMIT_EXCEEDED",
                            "data": null
                        }
                    }
                }
            },
            "Unauthorized": {
                "description": "Missing or invalid credentials.",
                "headers": {
                    "X-Request-Id": {
                        "$ref": "#/components/headers/XRequestId"
                    }
                },
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ApiErrorResponse"
                        },
                        "example": {
                            "status": "error",
                            "message": "Unauthorized.",
                            "data": null
                        }
                    }
                }
            },
            "ValidationError": {
                "description": "Payload validation failed.",
                "headers": {
                    "X-Request-Id": {
                        "$ref": "#/components/headers/XRequestId"
                    }
                },
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/ApiErrorResponse"
                        },
                        "example": {
                            "status": "error",
                            "message": "The given data was invalid.",
                            "errors": {
                                "item_name": [
                                    "The item name field is required."
                                ]
                            },
                            "data": null
                        }
                    }
                }
            }
        }
    },
    "paths": {
        "/api/admin/api-keys": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "List API keys",
                "operationId": "adminListApiKeys",
                "parameters": [
                    {
                        "name": "company_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginated API keys filtered by company when provided.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/ApiKey"
                                                            }
                                                        },
                                                        "meta": {
                                                            "$ref": "#/components/schemas/PageMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Issue API key for company",
                "operationId": "adminCreateApiKey",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "company_id",
                                    "name"
                                ],
                                "properties": {
                                    "company_id": {
                                        "type": "integer"
                                    },
                                    "name": {
                                        "type": "string"
                                    },
                                    "scopes": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "expires_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "API key created. Plaintext secret returned once.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "api_key": {
                                                            "$ref": "#/components/schemas/ApiKey"
                                                        },
                                                        "token": {
                                                            "type": "string",
                                                            "description": "Plaintext API key value. Display once."
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/api-keys/{keyId}": {
            "delete": {
                "tags": [
                    "Admin"
                ],
                "summary": "Delete API key",
                "operationId": "adminDeleteApiKey",
                "parameters": [
                    {
                        "name": "keyId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "API key deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/api-keys/{keyId}/rotate": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Rotate API key secret",
                "operationId": "adminRotateApiKey",
                "parameters": [
                    {
                        "name": "keyId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "API key secret rotated. Returns new token.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "api_key": {
                                                            "$ref": "#/components/schemas/ApiKey"
                                                        },
                                                        "token": {
                                                            "type": "string"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/api-keys/{keyId}/toggle": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Toggle API key activation",
                "operationId": "adminToggleApiKey",
                "parameters": [
                    {
                        "name": "keyId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "API key status toggled.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/companies/{companyId}/assign-plan": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Assign plan to company",
                "operationId": "adminAssignPlan",
                "parameters": [
                    {
                        "name": "companyId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "plan_id"
                                ],
                                "properties": {
                                    "plan_id": {
                                        "type": "integer"
                                    },
                                    "trial_ends_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true
                                    },
                                    "seats_purchased": {
                                        "type": "integer",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "202": {
                        "description": "Plan assignment queued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/companies/{companyId}/feature-flags": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "List company feature flags",
                "operationId": "adminListFeatureFlags",
                "parameters": [
                    {
                        "name": "companyId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Collection of company-scoped feature toggles.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/FeatureFlag"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Create feature flag override",
                "operationId": "adminCreateFeatureFlag",
                "parameters": [
                    {
                        "name": "companyId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "key",
                                    "value"
                                ],
                                "properties": {
                                    "key": {
                                        "type": "string"
                                    },
                                    "value": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Feature flag created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/companies/{companyId}/feature-flags/{flagId}": {
            "delete": {
                "tags": [
                    "Admin"
                ],
                "summary": "Remove feature flag override",
                "operationId": "adminDeleteFeatureFlag",
                "responses": {
                    "200": {
                        "description": "Feature flag removed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                },
                {
                    "name": "flagId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Admin"
                ],
                "summary": "Update feature flag override",
                "operationId": "adminUpdateFeatureFlag",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "value": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Feature flag updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/companies/{companyId}/status": {
            "put": {
                "tags": [
                    "Admin"
                ],
                "summary": "Update company lifecycle status",
                "operationId": "adminUpdateCompanyStatus",
                "parameters": [
                    {
                        "name": "companyId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "status"
                                ],
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "pending",
                                            "active",
                                            "suspended",
                                            "archived"
                                        ]
                                    },
                                    "note": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Company status updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/health": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Platform health summary",
                "operationId": "adminHealthSummary",
                "responses": {
                    "200": {
                        "description": "Platform health metrics.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/AdminHealth"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/plans": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "List subscription plans",
                "operationId": "adminPlansIndex",
                "responses": {
                    "200": {
                        "description": "Paginated plans configured in the platform.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/Plan"
                                                            }
                                                        },
                                                        "meta": {
                                                            "$ref": "#/components/schemas/PageMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Create subscription plan",
                "operationId": "adminPlansStore",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "code",
                                    "name",
                                    "price_usd"
                                ],
                                "properties": {
                                    "code": {
                                        "type": "string"
                                    },
                                    "name": {
                                        "type": "string"
                                    },
                                    "price_usd": {
                                        "type": "number",
                                        "format": "float"
                                    },
                                    "rfqs_per_month": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "users_max": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "analytics_enabled": {
                                        "type": "boolean"
                                    },
                                    "inventory_enabled": {
                                        "type": "boolean"
                                    },
                                    "multi_currency_enabled": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Plan created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/plans/{planId}": {
            "delete": {
                "tags": [
                    "Admin"
                ],
                "summary": "Archive subscription plan",
                "operationId": "adminPlansDestroy",
                "responses": {
                    "204": {
                        "description": "Plan archived. Response body omitted."
                    }
                }
            },
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Retrieve subscription plan",
                "operationId": "adminPlansShow",
                "responses": {
                    "200": {
                        "description": "Subscription plan details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Plan"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "planId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Admin"
                ],
                "summary": "Update subscription plan",
                "operationId": "adminPlansUpdate",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "price_usd": {
                                        "type": "number",
                                        "format": "float"
                                    },
                                    "analytics_enabled": {
                                        "type": "boolean"
                                    },
                                    "inventory_enabled": {
                                        "type": "boolean"
                                    },
                                    "multi_currency_enabled": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Plan updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/rate-limits": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "List rate limit rules",
                "operationId": "adminListRateLimits",
                "parameters": [
                    {
                        "name": "company_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "$ref": "#/components/parameters/PageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginated rate limit definitions.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/RateLimitRule"
                                                            }
                                                        },
                                                        "meta": {
                                                            "$ref": "#/components/schemas/PageMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Create rate limit rule",
                "operationId": "adminCreateRateLimit",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "scope",
                                    "window_seconds",
                                    "max_requests"
                                ],
                                "properties": {
                                    "company_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "scope": {
                                        "type": "string"
                                    },
                                    "window_seconds": {
                                        "type": "integer"
                                    },
                                    "max_requests": {
                                        "type": "integer"
                                    },
                                    "active": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Rate limit created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/rate-limits/{rateLimitId}": {
            "delete": {
                "tags": [
                    "Admin"
                ],
                "summary": "Delete rate limit rule",
                "operationId": "adminDeleteRateLimit",
                "responses": {
                    "200": {
                        "description": "Rate limit removed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Show rate limit rule",
                "operationId": "adminShowRateLimit",
                "responses": {
                    "200": {
                        "description": "Rate limit rule detail.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/RateLimitRule"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "rateLimitId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Admin"
                ],
                "summary": "Update rate limit rule",
                "operationId": "adminUpdateRateLimit",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "window_seconds": {
                                        "type": "integer"
                                    },
                                    "max_requests": {
                                        "type": "integer"
                                    },
                                    "active": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Rate limit updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/suppliers": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "List suppliers in admin console",
                "operationId": "adminListSuppliers",
                "responses": {
                    "200": {
                        "description": "Paginated suppliers scoped to current filters.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Create supplier on behalf of tenant",
                "operationId": "adminCreateSupplier",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Supplier created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/suppliers/{supplierId}": {
            "delete": {
                "tags": [
                    "Admin"
                ],
                "summary": "Archive supplier",
                "operationId": "adminDeleteSupplier",
                "responses": {
                    "200": {
                        "description": "Supplier archived.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Show supplier details in admin console",
                "operationId": "adminShowSupplier",
                "responses": {
                    "200": {
                        "description": "Supplier detail for admin review.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "supplierId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Admin"
                ],
                "summary": "Update supplier attributes in admin console",
                "operationId": "adminUpdateSupplier",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Supplier updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/webhook-deliveries": {
            "get": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "List webhook deliveries",
                "operationId": "adminListWebhookDeliveries",
                "parameters": [
                    {
                        "name": "subscription_id",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "$ref": "#/components/parameters/PageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginated history of webhook delivery attempts.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/WebhookDelivery"
                                                            }
                                                        },
                                                        "meta": {
                                                            "$ref": "#/components/schemas/PageMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/webhook-deliveries/{deliveryId}/retry": {
            "post": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Retry failed webhook delivery",
                "operationId": "adminRetryWebhookDelivery",
                "parameters": [
                    {
                        "name": "deliveryId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "202": {
                        "description": "Delivery queued for retry.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/webhook-subscriptions": {
            "get": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "List webhook subscriptions",
                "operationId": "adminListWebhookSubscriptions",
                "responses": {
                    "200": {
                        "description": "Paginated webhook subscriptions.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/WebhookSubscription"
                                                            }
                                                        },
                                                        "meta": {
                                                            "$ref": "#/components/schemas/PageMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Create webhook subscription",
                "operationId": "adminCreateWebhookSubscription",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "company_id",
                                    "url",
                                    "events"
                                ],
                                "properties": {
                                    "company_id": {
                                        "type": "integer"
                                    },
                                    "url": {
                                        "type": "string",
                                        "format": "uri"
                                    },
                                    "secret": {
                                        "type": "string"
                                    },
                                    "events": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "active": {
                                        "type": "boolean"
                                    },
                                    "retry_policy": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Webhook subscription created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/admin/webhook-subscriptions/{subscriptionId}": {
            "delete": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Remove webhook subscription",
                "operationId": "adminDeleteWebhookSubscription",
                "responses": {
                    "200": {
                        "description": "Webhook subscription removed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Retrieve webhook subscription",
                "operationId": "adminShowWebhookSubscription",
                "responses": {
                    "200": {
                        "description": "Webhook subscription detail.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/WebhookSubscription"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "subscriptionId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Update webhook subscription",
                "operationId": "adminUpdateWebhookSubscription",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "url": {
                                        "type": "string",
                                        "format": "uri"
                                    },
                                    "events": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "active": {
                                        "type": "boolean"
                                    },
                                    "retry_policy": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Webhook subscription updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/ai/forecast": {
            "post": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Request AI forecast insights",
                "operationId": "aiForecast",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Forecast projections returned from the AI service.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/ai/supplier-risk": {
            "post": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Request AI supplier risk insights",
                "operationId": "aiSupplierRisk",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Supplier risk insight payload from the AI service.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/analytics/generate": {
            "post": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Generate ad-hoc analytics export",
                "operationId": "analyticsGenerate",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "202": {
                        "description": "Analytics generation queued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/analytics/overview": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Fetch analytics overview dashboard",
                "operationId": "analyticsOverview",
                "responses": {
                    "200": {
                        "description": "Aggregate metrics for the analytics overview screen.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/analytics/reports": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "List analytics reports",
                "operationId": "listAnalyticsReports",
                "responses": {
                    "200": {
                        "description": "Available analytics reports for the current plan.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/analytics/reports/{reportKey}": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Show report configuration",
                "operationId": "showAnalyticsReport",
                "responses": {
                    "200": {
                        "description": "Report definition including filters.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "reportKey",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }
            ]
        },
        "/api/analytics/reports/{reportKey}/run": {
            "parameters": [
                {
                    "name": "reportKey",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Run analytics report",
                "operationId": "runAnalyticsReport",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "202": {
                        "description": "Report execution queued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/approvals/delegations": {
            "get": {
                "tags": [
                    "Approvals"
                ],
                "summary": "List approval delegations",
                "operationId": "listApprovalDelegations",
                "responses": {
                    "200": {
                        "description": "Active approval delegation rules.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Approvals"
                ],
                "summary": "Create approval delegation",
                "operationId": "createApprovalDelegation",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Approval delegation created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/approvals/delegations/{delegationId}": {
            "delete": {
                "tags": [
                    "Approvals"
                ],
                "summary": "Delete approval delegation",
                "operationId": "deleteApprovalDelegation",
                "responses": {
                    "200": {
                        "description": "Approval delegation removed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "delegationId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Approvals"
                ],
                "summary": "Update approval delegation",
                "operationId": "updateApprovalDelegation",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Approval delegation updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/approvals/requests": {
            "get": {
                "tags": [
                    "Approvals"
                ],
                "summary": "List approval requests",
                "operationId": "listApprovalRequests",
                "responses": {
                    "200": {
                        "description": "Pending approval requests.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/approvals/requests/{approvalId}": {
            "get": {
                "tags": [
                    "Approvals"
                ],
                "summary": "Show approval request",
                "operationId": "showApprovalRequest",
                "responses": {
                    "200": {
                        "description": "Approval request detail.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "approvalId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/approvals/requests/{approvalId}/action": {
            "parameters": [
                {
                    "name": "approvalId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Approvals"
                ],
                "summary": "Take action on approval request",
                "operationId": "actOnApprovalRequest",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Approval decision recorded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/approvals/rules": {
            "get": {
                "tags": [
                    "Approvals"
                ],
                "summary": "List approval rules",
                "operationId": "listApprovalRules",
                "responses": {
                    "200": {
                        "description": "Approval rules configured for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Approvals"
                ],
                "summary": "Create approval rule",
                "operationId": "createApprovalRule",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Approval rule created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/approvals/rules/{ruleId}": {
            "delete": {
                "tags": [
                    "Approvals"
                ],
                "summary": "Delete approval rule",
                "operationId": "deleteApprovalRule",
                "responses": {
                    "200": {
                        "description": "Approval rule removed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Approvals"
                ],
                "summary": "Show approval rule",
                "operationId": "showApprovalRule",
                "responses": {
                    "200": {
                        "description": "Approval rule detail.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "ruleId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Approvals"
                ],
                "summary": "Update approval rule",
                "operationId": "updateApprovalRule",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Approval rule updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/forgot-password": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Send password reset link",
                "description": "Sends a password reset link email if the account exists. The response is identical whether or not the email belongs to an account.",
                "operationId": "authForgotPassword",
                "security": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AuthForgotPasswordRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Reset email dispatched (or suppressed for privacy).",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Invalid email payload.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/login": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Create an authenticated session",
                "description": "Authenticates a user with email and password credentials and returns the enriched session payload used by Inertia and the SDK.",
                "operationId": "authLogin",
                "security": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AuthLoginRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Authenticated session payload.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/AuthSession"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Invalid credentials supplied.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/logout": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Terminate the authenticated session",
                "operationId": "authLogout",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Session destroyed successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No active session.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/me": {
            "get": {
                "tags": [
                    "Auth"
                ],
                "summary": "Inspect the current authenticated session",
                "description": "Returns the authenticated user, company context, feature flags, and active plan code associated with the current session.",
                "operationId": "authSession",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Session metadata.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/AuthSession"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Missing or invalid session.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/persona": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Switch the active persona for the session",
                "description": "Updates the active buyer or supplier persona for the authenticated session and returns the full persona list so the client can re-render navigation.",
                "operationId": "authSwitchPersona",
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AuthSwitchPersonaRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Persona updated and the session payload refreshed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "personas",
                                                        "active_persona"
                                                    ],
                                                    "properties": {
                                                        "personas": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/AuthPersona"
                                                            }
                                                        },
                                                        "active_persona": {
                                                            "$ref": "#/components/schemas/AuthPersona"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                },
                                "examples": {
                                    "switched": {
                                        "summary": "Supplier persona selection response",
                                        "value": {
                                            "status": "success",
                                            "message": "Persona updated.",
                                            "data": {
                                                "personas": [
                                                    {
                                                        "key": "buyer:12",
                                                        "type": "buyer",
                                                        "company_id": 12,
                                                        "company_name": "Jim Enterprise",
                                                        "company_status": "active",
                                                        "company_supplier_status": "approved",
                                                        "role": "owner",
                                                        "is_default": true
                                                    },
                                                    {
                                                        "key": "supplier:45:77",
                                                        "type": "supplier",
                                                        "company_id": 45,
                                                        "company_name": "Acme Manufacturing",
                                                        "company_status": "active",
                                                        "supplier_id": 77,
                                                        "supplier_name": "Jim Enterprise Machining",
                                                        "supplier_company_id": 12,
                                                        "supplier_company_name": "Jim Enterprise",
                                                        "is_default": false
                                                    }
                                                ],
                                                "active_persona": {
                                                    "key": "supplier:45:77",
                                                    "type": "supplier",
                                                    "company_id": 45,
                                                    "company_name": "Acme Manufacturing",
                                                    "company_status": "active",
                                                    "supplier_id": 77,
                                                    "supplier_name": "Jim Enterprise Machining",
                                                    "supplier_company_id": 12,
                                                    "supplier_company_name": "Jim Enterprise",
                                                    "is_default": false
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "The request is not authenticated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "The provided persona key was invalid or expired.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/register": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Self-register a buyer company and primary owner",
                "description": "Creates a user + company record, uploads supporting documents, and returns an authenticated session payload for immediate onboarding.",
                "operationId": "authRegister",
                "security": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/SelfRegistrationRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Registration succeeded and the caller is authenticated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "token": {
                                                            "type": "string"
                                                        },
                                                        "user": {
                                                            "$ref": "#/components/schemas/AuthSessionUser"
                                                        },
                                                        "company": {
                                                            "$ref": "#/components/schemas/AuthSessionCompany"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Attempted to register while already authenticated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Invalid registration payload.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/reset-password": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Reset password with token",
                "description": "Verifies the password reset token issued via email and sets a new password for the user.",
                "operationId": "authResetPassword",
                "security": [],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AuthResetPasswordRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Password reset successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Invalid reset token or password payload.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/awards": {
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Create RFQ line awards without generating purchase orders",
                "operationId": "createAwards",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateAwardsRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Awards persisted successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "awards"
                                                    ],
                                                    "properties": {
                                                        "awards": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/RfqItemAwardSummary"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "402": {
                        "description": "Plan upgrade required to award RFQs.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/Forbidden"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/awards/{awardId}": {
            "delete": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Delete an RFQ line award and reopen the associated line",
                "operationId": "deleteAward",
                "parameters": [
                    {
                        "name": "awardId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Award deleted and current awards returned.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "awards"
                                                    ],
                                                    "properties": {
                                                        "awards": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/RfqItemAwardSummary"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "402": {
                        "description": "Plan upgrade required to manage RFQ awards.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/Forbidden"
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/billing/checkout": {
            "post": {
                "tags": [
                    "Billing"
                ],
                "summary": "Start a checkout session for paid subscription plans",
                "operationId": "startPlanCheckout",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "plan_code"
                                ],
                                "properties": {
                                    "plan_code": {
                                        "type": "string",
                                        "description": "Plan code returned by the plan catalog endpoint."
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Checkout session metadata or confirmation that checkout is unnecessary.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/PlanCheckoutResult"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/billing/invoices": {
            "get": {
                "tags": [
                    "Billing"
                ],
                "summary": "List recent billing invoices for the authenticated company",
                "operationId": "listBillingInvoices",
                "responses": {
                    "200": {
                        "description": "Stripe invoice history limited by configuration.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/BillingInvoice"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Stripe invoice service is unavailable.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/billing/portal": {
            "post": {
                "tags": [
                    "Billing"
                ],
                "summary": "Create a Stripe billing portal session for the authenticated company",
                "operationId": "createBillingPortalSession",
                "responses": {
                    "200": {
                        "description": "Billing portal session created successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/BillingPortalSession"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Stripe billing portal is unavailable.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/billing/stripe/webhook": {
            "post": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Stripe catch-all billing webhook",
                "operationId": "stripeBillingCatchAll",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Webhook received and optionally processed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid Stripe signature or malformed payload.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/buyer/orders": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "List sales orders for the buyer company",
                "operationId": "listBuyerOrders",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/components/schemas/SalesOrderStatus"
                            }
                        },
                        "style": "form",
                        "explode": true,
                        "description": "Filter by normalized sales order status."
                    },
                    {
                        "name": "supplier_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        },
                        "required": false,
                        "description": "Restrict to orders issued to the specified supplier company ID."
                    },
                    {
                        "name": "date_from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "required": false
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "required": false
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 200
                        },
                        "required": false,
                        "description": "Search by PO number or supplier name."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor-paginated list of buyer sales orders.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SalesOrderCursorCollection"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/buyer/orders/{orderId}": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Show a buyer-owned sales order",
                "operationId": "showBuyerOrder",
                "responses": {
                    "200": {
                        "description": "Detailed sales order payload for the buyer company.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SalesOrderDetail"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "orderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/change-orders/{changeOrderId}/approve": {
            "put": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "Approve change order",
                "operationId": "approvePurchaseOrderChangeOrder",
                "parameters": [
                    {
                        "name": "changeOrderId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Change order approved and applied.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/change-orders/{changeOrderId}/reject": {
            "put": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "Reject change order",
                "operationId": "rejectPurchaseOrderChangeOrder",
                "parameters": [
                    {
                        "name": "changeOrderId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Change order rejected.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/companies": {
            "post": {
                "tags": [
                    "Companies"
                ],
                "summary": "Register company and request onboarding",
                "operationId": "registerCompany",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "name",
                                    "country",
                                    "primary_contact_name",
                                    "primary_contact_email"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "country": {
                                        "type": "string"
                                    },
                                    "primary_contact_name": {
                                        "type": "string"
                                    },
                                    "primary_contact_email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "primary_contact_phone": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "website": {
                                        "type": "string",
                                        "format": "uri",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Company onboarding request accepted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "company": {
                                                            "$ref": "#/components/schemas/CompanyProfile"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/companies/current": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "Retrieve profile for authenticated company",
                "operationId": "showCurrentCompany",
                "responses": {
                    "200": {
                        "description": "Current tenant company profile.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "company": {
                                                            "$ref": "#/components/schemas/CompanyProfile"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Companies"
                ],
                "summary": "Update profile for authenticated company",
                "operationId": "updateCurrentCompany",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Current company updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/companies/{companyId}": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "Retrieve company profile",
                "operationId": "showCompany",
                "responses": {
                    "200": {
                        "description": "Company profile visible to the authenticated tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "company": {
                                                            "$ref": "#/components/schemas/CompanyProfile"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Companies"
                ],
                "summary": "Update company profile",
                "operationId": "updateCompany",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "registration_no": {
                                        "type": "string"
                                    },
                                    "tax_id": {
                                        "type": "string"
                                    },
                                    "country": {
                                        "type": "string"
                                    },
                                    "email_domain": {
                                        "type": "string"
                                    },
                                    "primary_contact_name": {
                                        "type": "string"
                                    },
                                    "primary_contact_email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "primary_contact_phone": {
                                        "type": "string"
                                    },
                                    "address": {
                                        "type": "string"
                                    },
                                    "phone": {
                                        "type": "string"
                                    },
                                    "website": {
                                        "type": "string",
                                        "format": "uri"
                                    },
                                    "region": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Company profile updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/companies/{companyId}/documents": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "List company documents",
                "operationId": "listCompanyDocuments",
                "responses": {
                    "200": {
                        "description": "Documents associated with the company.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Companies"
                ],
                "summary": "Upload company document",
                "operationId": "createCompanyDocument",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "file"
                                ],
                                "properties": {
                                    "file": {
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "label": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Company document stored.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/companies/{companyId}/documents/{documentId}": {
            "delete": {
                "tags": [
                    "Companies"
                ],
                "summary": "Delete company document",
                "operationId": "deleteCompanyDocument",
                "responses": {
                    "200": {
                        "description": "Company document removed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                },
                {
                    "name": "documentId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/company-invitations": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "List pending invitations for current company",
                "operationId": "listInvitations",
                "responses": {
                    "200": {
                        "description": "Invitations collection.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/CompanyInvitation"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Companies"
                ],
                "summary": "Invite user to company",
                "operationId": "createInvitation",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Invitation created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/CompanyInvitation"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/company-invitations/{invitation}": {
            "delete": {
                "tags": [
                    "Companies"
                ],
                "summary": "Revoke invitation by id",
                "operationId": "deleteInvitation",
                "responses": {
                    "200": {
                        "description": "Invitation revoked.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "invitation",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/company-invitations/{token}/accept": {
            "parameters": [
                {
                    "name": "token",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Companies"
                ],
                "summary": "Accept invitation using token",
                "operationId": "acceptInvitation",
                "responses": {
                    "200": {
                        "description": "Invitation accepted and membership added.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/company-members": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "List members for the authenticated company",
                "operationId": "listCompanyMembers",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Company members collection.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/CompanyMember"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/company-members/{member}": {
            "delete": {
                "tags": [
                    "Companies"
                ],
                "summary": "Remove a member from the company",
                "operationId": "deleteCompanyMember",
                "responses": {
                    "200": {
                        "description": "Member removed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "member",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Companies"
                ],
                "summary": "Update a member's role within the company",
                "operationId": "updateCompanyMember",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "role"
                                ],
                                "properties": {
                                    "role": {
                                        "type": "string",
                                        "description": "Must be one of owner, buyer_admin, buyer_member, buyer_requester, supplier_admin, supplier_estimator, finance."
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Member updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/CompanyMember"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/company-role-templates": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "Retrieve available role templates and permission group metadata",
                "operationId": "listCompanyRoleTemplates",
                "responses": {
                    "200": {
                        "description": "Role template catalog.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/CompanyRoleTemplateCatalog"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/company/plan-selection": {
            "post": {
                "tags": [
                    "Companies"
                ],
                "summary": "Select a subscription plan for the authenticated company",
                "operationId": "selectCompanyPlan",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "plan_code"
                                ],
                                "properties": {
                                    "plan_code": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Plan selection saved for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/PlanSelectionResult"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/copilot/analytics": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Generate analytics insight via Copilot",
                "operationId": "copilotAnalytics",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Analytics insight with supporting narrative.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/copilot/answer": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Generate grounded answers with citations",
                "operationId": "copilotAnswer",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CopilotQueryRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Answer assembled from the top semantic search hits plus citations.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/CopilotAnswerResult"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/copilot/chat/completions": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Stream structured copilot response",
                "operationId": "copilotChatCompletion",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Copilot generated completion payload.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/copilot/prompts": {
            "get": {
                "tags": [
                    "Copilot"
                ],
                "summary": "List available copilot prompts",
                "operationId": "listCopilotPrompts",
                "responses": {
                    "200": {
                        "description": "Copilot prompt catalog.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/copilot/search": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Run semantic search across indexed tenant documents",
                "operationId": "copilotSemanticSearch",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CopilotQueryRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Ranked document chunks matching the supplied query.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/CopilotSearchResult"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/credit-notes": {
            "get": {
                "tags": [
                    "Credit Notes"
                ],
                "summary": "List credit notes for tenant",
                "operationId": "listCreditNotes",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/PageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "draft",
                                "pending_review",
                                "issued",
                                "approved",
                                "rejected"
                            ]
                        }
                    },
                    {
                        "name": "invoice_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "created_from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "created_to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginated credit notes scoped to the current company.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/CreditNoteCollection"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/credit-notes/invoices/{invoiceId}": {
            "post": {
                "tags": [
                    "Credit Notes"
                ],
                "summary": "Draft credit note from invoice",
                "operationId": "createCreditNote",
                "parameters": [
                    {
                        "name": "invoiceId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "reason",
                                    "amount_minor"
                                ],
                                "properties": {
                                    "reason": {
                                        "type": "string"
                                    },
                                    "amount_minor": {
                                        "type": "integer"
                                    },
                                    "attachments": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "binary"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Credit note created in draft state.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/credit-notes/{creditNoteId}": {
            "get": {
                "tags": [
                    "Credit Notes"
                ],
                "summary": "Retrieve credit note",
                "operationId": "showCreditNote",
                "responses": {
                    "200": {
                        "description": "Credit note detail with invoice linkage.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/CreditNote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "creditNoteId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ]
        },
        "/api/credit-notes/{creditNoteId}/approve": {
            "post": {
                "tags": [
                    "Credit Notes"
                ],
                "summary": "Approve or reject credit note",
                "operationId": "approveCreditNote",
                "parameters": [
                    {
                        "name": "creditNoteId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "decision"
                                ],
                                "properties": {
                                    "decision": {
                                        "type": "string",
                                        "enum": [
                                            "approve",
                                            "reject"
                                        ]
                                    },
                                    "comment": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Credit note review captured.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/credit-notes/{creditNoteId}/attachments": {
            "post": {
                "tags": [
                    "Credit Notes"
                ],
                "summary": "Upload attachment for credit note",
                "operationId": "attachCreditNoteFile",
                "parameters": [
                    {
                        "name": "creditNoteId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "file"
                                ],
                                "properties": {
                                    "file": {
                                        "type": "string",
                                        "format": "binary"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Credit note attachment uploaded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "credit_note": {
                                                            "$ref": "#/components/schemas/CreditNote"
                                                        },
                                                        "attachment": {
                                                            "$ref": "#/components/schemas/DocumentAttachment"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/credit-notes/{creditNoteId}/issue": {
            "post": {
                "tags": [
                    "Credit Notes"
                ],
                "summary": "Issue credit note to supplier",
                "operationId": "issueCreditNote",
                "parameters": [
                    {
                        "name": "creditNoteId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Credit note marked as issued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/credit-notes/{creditNoteId}/lines": {
            "put": {
                "tags": [
                    "Credit Notes"
                ],
                "summary": "Update credit note lines",
                "operationId": "updateCreditNoteLines",
                "parameters": [
                    {
                        "name": "creditNoteId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "lines"
                                ],
                                "properties": {
                                    "lines": {
                                        "type": "array",
                                        "minItems": 1,
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "invoice_line_id",
                                                "qty_to_credit"
                                            ],
                                            "properties": {
                                                "invoice_line_id": {
                                                    "type": "integer"
                                                },
                                                "qty_to_credit": {
                                                    "type": "number"
                                                },
                                                "description": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "uom": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Credit note lines updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/CreditNote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/credit-notes/{creditNoteId}/recalculate": {
            "post": {
                "tags": [
                    "Money"
                ],
                "summary": "Recalculate credit note totals",
                "operationId": "recalcCreditNoteTotals",
                "parameters": [
                    {
                        "name": "creditNoteId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Credit note totals recalculated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/crm/export-preview": {
            "get": {
                "tags": [
                    "CRM"
                ],
                "summary": "Preview CRM export payload",
                "operationId": "crmExportPreview",
                "responses": {
                    "200": {
                        "description": "Preview of CRM export in JSON form.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "CRM"
                ],
                "summary": "Generate CRM export preview with filters",
                "operationId": "crmExportPreviewFilter",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Filtered CRM export preview.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/dashboard/metrics": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Retrieve dashboard KPI metrics",
                "description": "Returns key sourcing and downstream execution counts for the authenticated company. Requires analytics plan access.",
                "operationId": "getDashboardMetrics",
                "responses": {
                    "200": {
                        "description": "Dashboard metric counts for the current company.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/DashboardMetrics"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "402": {
                        "description": "Analytics plan required.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/assets": {
            "get": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "List registered digital twin assets",
                "operationId": "listDigitalTwinAssets",
                "responses": {
                    "200": {
                        "description": "Paginated assets for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Create digital twin asset",
                "operationId": "createDigitalTwinAsset",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Asset created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/assets/{assetId}": {
            "delete": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Delete digital twin asset",
                "operationId": "deleteDigitalTwinAsset",
                "responses": {
                    "200": {
                        "description": "Asset deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Show digital twin asset",
                "operationId": "showDigitalTwinAsset",
                "responses": {
                    "200": {
                        "description": "Asset details with status telemetry.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "assetId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Partially update digital twin asset",
                "operationId": "patchDigitalTwinAsset",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Asset updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Replace digital twin asset",
                "operationId": "updateDigitalTwinAsset",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Asset updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/assets/{assetId}/bom": {
            "parameters": [
                {
                    "name": "assetId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Sync asset bill of materials",
                "operationId": "syncDigitalTwinAssetBom",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Asset BOM synchronized.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/assets/{assetId}/procedures/{procedureId}": {
            "delete": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Detach maintenance procedure from asset",
                "operationId": "detachDigitalTwinProcedure",
                "responses": {
                    "200": {
                        "description": "Procedure detached from asset.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "assetId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                },
                {
                    "name": "procedureId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Link maintenance procedure to asset",
                "operationId": "linkDigitalTwinProcedure",
                "responses": {
                    "200": {
                        "description": "Procedure linked to asset.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/assets/{assetId}/procedures/{procedureId}/complete": {
            "parameters": [
                {
                    "name": "assetId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                },
                {
                    "name": "procedureId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Complete maintenance procedure for asset",
                "operationId": "completeDigitalTwinProcedure",
                "responses": {
                    "200": {
                        "description": "Procedure completion recorded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/assets/{assetId}/status": {
            "parameters": [
                {
                    "name": "assetId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Update asset operational status",
                "operationId": "updateDigitalTwinAssetStatus",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Asset status updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/assets/{assetId}/sync": {
            "parameters": [
                {
                    "name": "assetId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Trigger asset synchronization",
                "operationId": "syncDigitalTwinAsset",
                "responses": {
                    "202": {
                        "description": "Synchronization job queued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/assets/{assetId}/work-orders": {
            "parameters": [
                {
                    "name": "assetId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Create work order for asset",
                "operationId": "createDigitalTwinWorkOrder",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Work order created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/locations": {
            "get": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "List digital twin locations",
                "operationId": "listDigitalTwinLocations",
                "responses": {
                    "200": {
                        "description": "Locations in the digital twin module.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Create digital twin location",
                "operationId": "createDigitalTwinLocation",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Location created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/locations/{locationId}": {
            "delete": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Delete digital twin location",
                "operationId": "deleteDigitalTwinLocation",
                "responses": {
                    "200": {
                        "description": "Location deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Show digital twin location",
                "operationId": "showDigitalTwinLocation",
                "responses": {
                    "200": {
                        "description": "Location details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "locationId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Partially update digital twin location",
                "operationId": "patchDigitalTwinLocation",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Location updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Replace digital twin location",
                "operationId": "updateDigitalTwinLocation",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Location updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/procedures": {
            "get": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "List maintenance procedures",
                "operationId": "listDigitalTwinProcedures",
                "responses": {
                    "200": {
                        "description": "Maintenance procedures configured for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Create maintenance procedure",
                "operationId": "createDigitalTwinProcedure",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Procedure created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/procedures/{procedureId}": {
            "delete": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Delete maintenance procedure",
                "operationId": "deleteDigitalTwinProcedure",
                "responses": {
                    "200": {
                        "description": "Procedure deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Show maintenance procedure",
                "operationId": "showDigitalTwinProcedure",
                "responses": {
                    "200": {
                        "description": "Procedure details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "procedureId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Partially update maintenance procedure",
                "operationId": "patchDigitalTwinProcedure",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Procedure updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Replace maintenance procedure",
                "operationId": "updateDigitalTwinProcedure",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Procedure updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/systems": {
            "get": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "List digital twin systems",
                "operationId": "listDigitalTwinSystems",
                "responses": {
                    "200": {
                        "description": "Systems registered in the digital twin module.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Create digital twin system",
                "operationId": "createDigitalTwinSystem",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "System created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/digital-twin/systems/{systemId}": {
            "delete": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Delete digital twin system",
                "operationId": "deleteDigitalTwinSystem",
                "responses": {
                    "200": {
                        "description": "System deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Show digital twin system",
                "operationId": "showDigitalTwinSystem",
                "responses": {
                    "200": {
                        "description": "System details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "systemId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Partially update digital twin system",
                "operationId": "patchDigitalTwinSystem",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "System updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Replace digital twin system",
                "operationId": "updateDigitalTwinSystem",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "System updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/docs/openapi.json": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Download compiled OpenAPI document",
                "description": "Returns the compiled OpenAPI JSON artifact produced by the `api:spec:build` command.",
                "operationId": "downloadOpenApi",
                "security": [],
                "responses": {
                    "200": {
                        "description": "OpenAPI document.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                },
                                "examples": {
                                    "reference": {
                                        "summary": "Fragment of the OpenAPI document",
                                        "value": {
                                            "openapi": "3.1.0",
                                            "info": {
                                                "title": "Elements Supply API",
                                                "version": "2025.11.0"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No compiled document found.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/docs/postman.json": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Download Postman collection",
                "description": "Returns the Postman collection generated from the compiled OpenAPI document.",
                "operationId": "downloadPostmanCollection",
                "security": [],
                "responses": {
                    "200": {
                        "description": "Postman v2.1 collection file.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                },
                                "examples": {
                                    "metadata": {
                                        "summary": "Example collection info",
                                        "value": {
                                            "info": {
                                                "name": "Elements Supply API",
                                                "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No generated Postman collection found.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/documents": {
            "post": {
                "tags": [
                    "Documents"
                ],
                "summary": "Persist document to entity",
                "operationId": "storeDocument",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/DocumentUploadRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Document stored and linked to record.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Document"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/documents/{document}": {
            "delete": {
                "tags": [
                    "Documents"
                ],
                "summary": "Delete a document",
                "operationId": "deleteDocument",
                "responses": {
                    "200": {
                        "description": "Document deleted successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Caller is not authorized to delete the requested document.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Document not found within the tenant scope.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Documents"
                ],
                "summary": "Show document metadata",
                "operationId": "showDocument",
                "responses": {
                    "200": {
                        "description": "Document metadata and download link for authorized viewers.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Document"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Caller is not authorized to view the requested document.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Document not found within the tenant scope.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "document",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/downloads": {
            "get": {
                "tags": [
                    "Downloads"
                ],
                "summary": "List queued download jobs for the tenant",
                "operationId": "listDownloadJobs",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "queued",
                                "processing",
                                "ready",
                                "failed"
                            ]
                        }
                    },
                    {
                        "name": "format",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pdf",
                                "csv"
                            ]
                        }
                    },
                    {
                        "name": "document_type",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "rfq",
                                "quote",
                                "purchase_order",
                                "invoice",
                                "grn",
                                "credit_note"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor-paginated download jobs scoped to the authenticated company.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items",
                                                        "meta"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/DownloadJob"
                                                            }
                                                        },
                                                        "meta": {
                                                            "type": "object",
                                                            "properties": {
                                                                "per_page": {
                                                                    "type": "integer"
                                                                },
                                                                "next_cursor": {
                                                                    "type": "string",
                                                                    "nullable": true
                                                                },
                                                                "prev_cursor": {
                                                                    "type": "string",
                                                                    "nullable": true
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Downloads"
                ],
                "summary": "Queue a download job",
                "operationId": "createDownloadJob",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "document_type",
                                    "document_id",
                                    "format"
                                ],
                                "properties": {
                                    "document_type": {
                                        "type": "string",
                                        "enum": [
                                            "rfq",
                                            "quote",
                                            "purchase_order",
                                            "invoice",
                                            "grn",
                                            "credit_note"
                                        ]
                                    },
                                    "document_id": {
                                        "type": "integer",
                                        "minimum": 1
                                    },
                                    "format": {
                                        "type": "string",
                                        "enum": [
                                            "pdf",
                                            "csv"
                                        ]
                                    },
                                    "reference": {
                                        "type": "string",
                                        "maxLength": 120
                                    },
                                    "meta": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Download queued for processing.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/DownloadJob"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/downloads/{downloadId}": {
            "get": {
                "tags": [
                    "Downloads"
                ],
                "summary": "Retrieve a download job",
                "operationId": "showDownloadJob",
                "responses": {
                    "200": {
                        "description": "Download job details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/DownloadJob"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "downloadId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/downloads/{downloadId}/file": {
            "get": {
                "tags": [
                    "Downloads"
                ],
                "summary": "Download the generated artifact",
                "operationId": "downloadJobFile",
                "responses": {
                    "200": {
                        "description": "Signed download of the generated PDF or CSV artifact.",
                        "content": {
                            "application/pdf": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            },
                            "text/csv": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Download not ready yet.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "410": {
                        "description": "Download has expired or file is missing.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "downloadId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                },
                {
                    "name": "signature",
                    "in": "query",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }
            ]
        },
        "/api/downloads/{downloadId}/retry": {
            "parameters": [
                {
                    "name": "downloadId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Downloads"
                ],
                "summary": "Retry a failed or expired download job",
                "operationId": "retryDownloadJob",
                "responses": {
                    "200": {
                        "description": "Download job queued again.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/DownloadJob"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/events/deliveries": {
            "get": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "List webhook event deliveries for the tenant",
                "operationId": "listEventDeliveries",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "success",
                                "failed",
                                "dead_letter"
                            ]
                        }
                    },
                    {
                        "name": "event",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "subscription_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "endpoint",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "dlq_only",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor-paginated event deliveries for the company or platform admin scope.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items",
                                                        "meta"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/EventDelivery"
                                                            }
                                                        },
                                                        "meta": {
                                                            "type": "object",
                                                            "properties": {
                                                                "per_page": {
                                                                    "type": "integer"
                                                                },
                                                                "next_cursor": {
                                                                    "type": "string",
                                                                    "nullable": true
                                                                },
                                                                "prev_cursor": {
                                                                    "type": "string",
                                                                    "nullable": true
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/events/deliveries/{deliveryId}/retry": {
            "post": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Retry a failed delivery owned by the tenant",
                "operationId": "retryEventDelivery",
                "parameters": [
                    {
                        "name": "deliveryId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Delivery re-queued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/events/dlq/replay": {
            "post": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Replay dead-lettered deliveries",
                "operationId": "replayDeadLetters",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "ids"
                                ],
                                "properties": {
                                    "ids": {
                                        "type": "array",
                                        "minItems": 1,
                                        "maxItems": 50,
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Dead-lettered deliveries scheduled for replay.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "replayed": {
                                                            "type": "integer"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/exports": {
            "get": {
                "tags": [
                    "Exports"
                ],
                "summary": "List export requests",
                "operationId": "listExportRequests",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor-paginated export requests for the current company.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items",
                                                        "meta"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/ExportRequest"
                                                            }
                                                        },
                                                        "meta": {
                                                            "type": "object",
                                                            "properties": {
                                                                "per_page": {
                                                                    "type": "integer"
                                                                },
                                                                "next_cursor": {
                                                                    "type": "string",
                                                                    "nullable": true
                                                                },
                                                                "prev_cursor": {
                                                                    "type": "string",
                                                                    "nullable": true
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Exports"
                ],
                "summary": "Queue export request",
                "operationId": "createExportRequest",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "type"
                                ],
                                "properties": {
                                    "type": {
                                        "type": "string",
                                        "description": "Export type key (e.g. `orders`, `invoices`)."
                                    },
                                    "filters": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Export request queued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/ExportRequest"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/exports/{exportRequestId}": {
            "get": {
                "tags": [
                    "Exports"
                ],
                "summary": "Retrieve export request",
                "operationId": "showExportRequest",
                "responses": {
                    "200": {
                        "description": "Export request details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/ExportRequest"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "exportRequestId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/exports/{exportRequestId}/download": {
            "get": {
                "tags": [
                    "Exports"
                ],
                "summary": "Download export artifact",
                "operationId": "downloadExport",
                "parameters": [
                    {
                        "name": "signature",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Export zip archive.",
                        "content": {
                            "application/zip": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Export not ready.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "410": {
                        "description": "Export has expired.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "exportRequestId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/files/attachments/{quoteId}": {
            "get": {
                "tags": [
                    "Documents"
                ],
                "summary": "Download quote attachments archive",
                "operationId": "downloadQuoteAttachments",
                "responses": {
                    "200": {
                        "description": "Consolidated quote attachments.",
                        "content": {
                            "application/zip": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "quoteId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/files/cad/{rfqId}": {
            "get": {
                "tags": [
                    "Documents"
                ],
                "summary": "Download RFQ CAD package",
                "operationId": "downloadRfqCad",
                "responses": {
                    "200": {
                        "description": "CAD archive for the RFQ.",
                        "content": {
                            "application/zip": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/files/upload": {
            "post": {
                "tags": [
                    "Documents"
                ],
                "summary": "Upload file to temporary storage",
                "operationId": "uploadFile",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "file"
                                ],
                                "properties": {
                                    "file": {
                                        "type": "string",
                                        "format": "binary"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "File uploaded and staged.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/health": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "API health check",
                "operationId": "getHealth",
                "security": [],
                "responses": {
                    "200": {
                        "description": "Current API health information.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "required": [
                                                "data"
                                            ],
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "healthy",
                                                        "app",
                                                        "env",
                                                        "debug"
                                                    ],
                                                    "properties": {
                                                        "healthy": {
                                                            "type": "boolean"
                                                        },
                                                        "app": {
                                                            "type": "string"
                                                        },
                                                        "env": {
                                                            "type": "string"
                                                        },
                                                        "debug": {
                                                            "type": "boolean"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                },
                                "examples": {
                                    "default": {
                                        "summary": "Healthy response",
                                        "value": {
                                            "status": "success",
                                            "message": null,
                                            "data": {
                                                "healthy": true,
                                                "app": "Elements Supply",
                                                "env": "staging",
                                                "debug": false
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/inventory/items": {
            "get": {
                "tags": [
                    "Inventory"
                ],
                "summary": "List inventory items",
                "operationId": "listInventoryItems",
                "responses": {
                    "200": {
                        "description": "Inventory items for the company.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Create inventory item",
                "operationId": "createInventoryItem",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Inventory item created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/inventory/items/{itemId}": {
            "get": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Show inventory item",
                "operationId": "showInventoryItem",
                "responses": {
                    "200": {
                        "description": "Inventory item detail payload.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "itemId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Update inventory item",
                "operationId": "updateInventoryItem",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Inventory item updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/inventory/locations": {
            "delete": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Delete goods receipt note",
                "operationId": "deleteGrn",
                "responses": {
                    "200": {
                        "description": "Goods receipt deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Inventory"
                ],
                "summary": "List inventory locations",
                "operationId": "listInventoryLocations",
                "responses": {
                    "200": {
                        "description": "Warehouse and bin metadata for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/inventory/low-stock": {
            "get": {
                "tags": [
                    "Inventory"
                ],
                "summary": "List low stock alerts",
                "operationId": "listLowStockAlerts",
                "responses": {
                    "200": {
                        "description": "Low inventory report.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/inventory/movements": {
            "get": {
                "tags": [
                    "Inventory"
                ],
                "summary": "List inventory movements",
                "operationId": "listInventoryMovements",
                "responses": {
                    "200": {
                        "description": "Inventory movement history.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Create inventory movement",
                "operationId": "createInventoryMovement",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Inventory movement recorded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invoices": {
            "get": {
                "tags": [
                    "Invoices"
                ],
                "summary": "List invoices for company",
                "operationId": "listInvoices",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PageQuery"
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "paid",
                                "overdue",
                                "disputed"
                            ]
                        }
                    },
                    {
                        "name": "supplier_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginated invoices for the active company.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/InvoiceCollection"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invoices/from-po": {
            "post": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Create invoice from purchase order reference",
                "operationId": "createInvoiceFromPo",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "po_id",
                                    "lines"
                                ],
                                "properties": {
                                    "po_id": {
                                        "type": "integer"
                                    },
                                    "supplier_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "invoice_number": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "invoice_date": {
                                        "type": "string",
                                        "format": "date",
                                        "nullable": true
                                    },
                                    "currency": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "document": {
                                        "type": "string",
                                        "format": "binary",
                                        "nullable": true
                                    },
                                    "lines": {
                                        "type": "array",
                                        "minItems": 1,
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "po_line_id"
                                            ],
                                            "oneOf": [
                                                {
                                                    "required": [
                                                        "quantity"
                                                    ]
                                                },
                                                {
                                                    "required": [
                                                        "qty_invoiced"
                                                    ]
                                                }
                                            ],
                                            "properties": {
                                                "po_line_id": {
                                                    "type": "integer"
                                                },
                                                "quantity": {
                                                    "type": "integer",
                                                    "nullable": true
                                                },
                                                "qty_invoiced": {
                                                    "type": "integer",
                                                    "nullable": true
                                                },
                                                "unit_price": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "nullable": true
                                                },
                                                "unit_price_minor": {
                                                    "type": "integer",
                                                    "nullable": true
                                                },
                                                "description": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "uom": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "tax_code_ids": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "integer"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invoice created from purchase order lines.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Invoice"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invoices/{invoiceId}": {
            "delete": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Delete invoice",
                "operationId": "deleteInvoice",
                "responses": {
                    "200": {
                        "description": "Invoice deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Retrieve invoice",
                "operationId": "showInvoice",
                "responses": {
                    "200": {
                        "description": "Invoice details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Invoice"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "parameters": [
                {
                    "name": "invoiceId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Update invoice metadata",
                "operationId": "updateInvoice",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "pending",
                                            "paid",
                                            "overdue",
                                            "disputed"
                                        ]
                                    },
                                    "lines": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "id"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "description": {
                                                    "type": "string"
                                                },
                                                "quantity": {
                                                    "type": "integer"
                                                },
                                                "unit_price": {
                                                    "type": "number",
                                                    "format": "float"
                                                },
                                                "tax_code_ids": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "integer"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invoice updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Invoice"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invoices/{invoiceId}/attachments": {
            "post": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Upload supporting file for invoice",
                "operationId": "attachInvoiceFile",
                "parameters": [
                    {
                        "name": "invoiceId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "file"
                                ],
                                "properties": {
                                    "file": {
                                        "type": "string",
                                        "format": "binary"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invoice attachment uploaded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "invoice": {
                                                            "$ref": "#/components/schemas/Invoice"
                                                        },
                                                        "attachment": {
                                                            "$ref": "#/components/schemas/DocumentAttachment"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invoices/{invoiceId}/mark-paid": {
            "post": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Mark invoice as paid",
                "operationId": "markInvoicePaid",
                "parameters": [
                    {
                        "name": "invoiceId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "payment_reference": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invoice marked as paid.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invoices/{invoiceId}/recalculate": {
            "post": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Recalculate invoice totals",
                "operationId": "recalculateInvoice",
                "parameters": [
                    {
                        "name": "invoiceId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Recalculated invoice summary.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Invoice"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invoices/{invoiceId}/review/approve": {
            "post": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Approve invoice review request",
                "operationId": "approveInvoiceReview",
                "parameters": [
                    {
                        "name": "invoiceId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "note": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invoice approved.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invoices/{invoiceId}/review/reject": {
            "post": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Reject invoice during review",
                "operationId": "rejectInvoiceReview",
                "parameters": [
                    {
                        "name": "invoiceId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "note"
                                ],
                                "properties": {
                                    "note": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invoice rejected with reviewer notes.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invoices/{invoiceId}/review/request-changes": {
            "post": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Request changes from supplier invoice",
                "operationId": "requestInvoiceChanges",
                "parameters": [
                    {
                        "name": "invoiceId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "note"
                                ],
                                "properties": {
                                    "note": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Change request recorded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/library/digital-twins": {
            "get": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "List published digital twins in the buyer library",
                "operationId": "listLibraryDigitalTwins",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "name": "q",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Full-text search term applied across titles, summaries, tags, and specs."
                    },
                    {
                        "name": "category_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        },
                        "description": "Restrict results to a single category."
                    },
                    {
                        "name": "has_asset",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Require at least one asset of the given type (CAD, PDF, etc.)."
                    },
                    {
                        "name": "has_assets[]",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "description": "Repeatable version of `has_asset` for filtering on multiple asset types."
                    },
                    {
                        "name": "tags[]",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "description": "Require all provided tags to be present on the digital twin."
                    },
                    {
                        "name": "tag",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Convenience alias for a single tag filter."
                    },
                    {
                        "name": "include[]",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": [
                                    "categories"
                                ]
                            }
                        },
                        "description": "Include additional reference data such as the active category tree."
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "relevance",
                                "updated_at",
                                "title"
                            ]
                        },
                        "description": "Sort mode. Defaults to relevance when a search term is provided, otherwise updated_at."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Published digital twins available to the buyer.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/library/digital-twins/{digitalTwinId}": {
            "get": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Show a published library digital twin",
                "operationId": "showLibraryDigitalTwin",
                "responses": {
                    "200": {
                        "description": "Digital twin detail with specs and assets.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "digitalTwinId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/library/digital-twins/{digitalTwinId}/use-for-rfq": {
            "parameters": [
                {
                    "name": "digitalTwinId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Digital Twin"
                ],
                "summary": "Generate an RFQ draft seeded from a digital twin",
                "operationId": "useLibraryDigitalTwinForRfq",
                "responses": {
                    "200": {
                        "description": "RFQ draft contains prepared line items, specs, and attachments.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/localization/parts/{partId}/convert": {
            "get": {
                "tags": [
                    "Localization"
                ],
                "summary": "Convert quantity using part base unit",
                "operationId": "convertQuantityForPart",
                "parameters": [
                    {
                        "name": "partId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "qty",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "from",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "to",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Conversion result for part.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "qty_converted",
                                                        "base_qty",
                                                        "base_uom"
                                                    ],
                                                    "properties": {
                                                        "qty_converted": {
                                                            "type": "string"
                                                        },
                                                        "base_qty": {
                                                            "type": "string"
                                                        },
                                                        "base_uom": {
                                                            "type": "string"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/localization/settings": {
            "get": {
                "tags": [
                    "Localization"
                ],
                "summary": "Retrieve localization settings",
                "operationId": "showCompanyLocalizationSettings",
                "responses": {
                    "200": {
                        "description": "Current localization preferences for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/LocalizationSettings"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Localization"
                ],
                "summary": "Update localization settings",
                "operationId": "updateCompanyLocalizationSettings",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LocalizationSettings"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Updated localization settings.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/LocalizationSettings"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/localization/uom/convert": {
            "post": {
                "tags": [
                    "Localization"
                ],
                "summary": "Convert quantity between units",
                "operationId": "convertQuantity",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "qty",
                                    "from_code",
                                    "to_code"
                                ],
                                "properties": {
                                    "qty": {
                                        "type": "number"
                                    },
                                    "from_code": {
                                        "type": "string"
                                    },
                                    "to_code": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Converted quantity.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "qty_converted"
                                                    ],
                                                    "properties": {
                                                        "qty_converted": {
                                                            "type": "string"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/localization/uoms": {
            "get": {
                "tags": [
                    "Localization"
                ],
                "summary": "List units of measure",
                "operationId": "listUoms",
                "parameters": [
                    {
                        "name": "dimension",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Available units of measure.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items",
                                                        "meta"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/Uom"
                                                            }
                                                        },
                                                        "meta": {
                                                            "type": "object",
                                                            "properties": {
                                                                "total": {
                                                                    "type": "integer"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Localization"
                ],
                "summary": "Create unit of measure",
                "operationId": "createUom",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Uom"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Unit created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/localization/uoms/conversions": {
            "get": {
                "tags": [
                    "Localization"
                ],
                "summary": "List unit conversions",
                "operationId": "listUomConversions",
                "parameters": [
                    {
                        "name": "from_code",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "to_code",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "dimension",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Mapping of conversions.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/UomConversion"
                                                            }
                                                        },
                                                        "meta": {
                                                            "type": "object",
                                                            "properties": {
                                                                "total": {
                                                                    "type": "integer"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Localization"
                ],
                "summary": "Upsert unit conversion",
                "operationId": "upsertUomConversion",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "from_code",
                                    "to_code",
                                    "factor"
                                ],
                                "properties": {
                                    "from_code": {
                                        "type": "string"
                                    },
                                    "to_code": {
                                        "type": "string"
                                    },
                                    "factor": {
                                        "type": "number"
                                    },
                                    "offset": {
                                        "type": "number",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Conversion saved.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/localization/uoms/{uomCode}": {
            "delete": {
                "tags": [
                    "Localization"
                ],
                "summary": "Delete unit of measure",
                "operationId": "deleteUom",
                "responses": {
                    "200": {
                        "description": "Unit deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "uomCode",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Localization"
                ],
                "summary": "Update unit of measure",
                "operationId": "updateUom",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Uom"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Unit updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/me/apply-supplier": {
            "post": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Submit a supplier application for the authenticated company",
                "description": "Allows the current company owner to self-apply to the supplier directory using the same payload as internal submissions.",
                "operationId": "selfApplySupplierApplication",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SupplierApplicationPayload"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Supplier application submitted for review.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SupplierApplication"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Missing permissions or company context.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Payload failed validation or a pending application already exists.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/me/companies": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "List companies the current user belongs to",
                "operationId": "listUserCompanies",
                "responses": {
                    "200": {
                        "description": "Company memberships.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/UserCompany"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/me/companies/switch": {
            "post": {
                "tags": [
                    "Companies"
                ],
                "summary": "Switch the active company context for the authenticated user",
                "operationId": "switchUserCompany",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "company_id"
                                ],
                                "properties": {
                                    "company_id": {
                                        "type": "integer"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Active company updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/me/profile": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "Fetch the authenticated user's profile",
                "operationId": "getCurrentProfile",
                "responses": {
                    "200": {
                        "description": "Profile retrieved.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/UserProfile"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Companies"
                ],
                "summary": "Update the authenticated user's profile",
                "operationId": "updateCurrentProfile",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "job_title": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "phone": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "locale": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "timezone": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "avatar_path": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/UserProfile"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/me/supplier-application/status": {
            "get": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Get supplier self-service application status",
                "operationId": "showSelfServiceSupplierApplicationStatus",
                "responses": {
                    "200": {
                        "description": "Current status for the authenticated user's company application.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/me/supplier-documents": {
            "get": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "List compliance documents uploaded by the authenticated company",
                "operationId": "listSupplierDocuments",
                "responses": {
                    "200": {
                        "description": "Supplier documents collection.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/SupplierDocument"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Upload a new compliance document for the authenticated company",
                "operationId": "createSupplierDocument",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "type",
                                    "document"
                                ],
                                "properties": {
                                    "type": {
                                        "type": "string",
                                        "description": "Document type code (iso9001, iso14001, as9100, itar, reach, rohs, insurance, nda, other)."
                                    },
                                    "document": {
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "issued_at": {
                                        "type": "string",
                                        "format": "date",
                                        "nullable": true
                                    },
                                    "expires_at": {
                                        "type": "string",
                                        "format": "date",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Supplier document stored.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SupplierDocument"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/me/supplier-documents/{document}": {
            "delete": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Delete a supplier compliance document",
                "operationId": "deleteSupplierDocument",
                "responses": {
                    "200": {
                        "description": "Supplier document deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "document",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/me/supplier/visibility": {
            "put": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Update supplier directory visibility",
                "operationId": "updateSupplierVisibility",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Visibility updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/money/fx": {
            "get": {
                "tags": [
                    "Money"
                ],
                "summary": "List FX rates",
                "operationId": "listFxRates",
                "parameters": [
                    {
                        "name": "base_code",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "quote_code",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "as_of",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginated FX rates.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/FxRate"
                                                            }
                                                        },
                                                        "meta": {
                                                            "$ref": "#/components/schemas/PageMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Money"
                ],
                "summary": "Upsert FX rates",
                "operationId": "upsertFxRates",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "rows"
                                ],
                                "properties": {
                                    "rows": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "base_code",
                                                "quote_code",
                                                "rate",
                                                "as_of"
                                            ],
                                            "properties": {
                                                "base_code": {
                                                    "type": "string"
                                                },
                                                "quote_code": {
                                                    "type": "string"
                                                },
                                                "rate": {
                                                    "type": "number"
                                                },
                                                "as_of": {
                                                    "type": "string",
                                                    "format": "date"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "FX rates updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/money/settings": {
            "get": {
                "tags": [
                    "Money"
                ],
                "summary": "Retrieve money settings",
                "operationId": "showMoneySettings",
                "responses": {
                    "200": {
                        "description": "Money settings for the company.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/MoneySettings"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Money"
                ],
                "summary": "Update money settings",
                "operationId": "updateMoneySettings",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "base_currency": {
                                        "type": "string"
                                    },
                                    "pricing_currency": {
                                        "type": "string"
                                    },
                                    "fx_source": {
                                        "type": "string"
                                    },
                                    "price_round_rule": {
                                        "type": "string"
                                    },
                                    "tax_regime": {
                                        "type": "string"
                                    },
                                    "defaults": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Money settings updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/money/tax-codes": {
            "get": {
                "tags": [
                    "Money"
                ],
                "summary": "List tax codes",
                "operationId": "listTaxCodes",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "active",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor paginated tax codes.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/TaxCode"
                                                            }
                                                        }
                                                    }
                                                },
                                                "meta": {
                                                    "$ref": "#/components/schemas/CursorMeta"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Money"
                ],
                "summary": "Create tax code",
                "operationId": "createTaxCode",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "code",
                                    "name",
                                    "type"
                                ],
                                "properties": {
                                    "code": {
                                        "type": "string"
                                    },
                                    "name": {
                                        "type": "string"
                                    },
                                    "type": {
                                        "type": "string"
                                    },
                                    "rate_percent": {
                                        "type": "number",
                                        "nullable": true
                                    },
                                    "is_compound": {
                                        "type": "boolean"
                                    },
                                    "active": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Tax code created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/money/tax-codes/{taxCodeId}": {
            "delete": {
                "tags": [
                    "Money"
                ],
                "summary": "Delete tax code",
                "operationId": "deleteTaxCode",
                "responses": {
                    "200": {
                        "description": "Tax code removed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Money"
                ],
                "summary": "Retrieve tax code",
                "operationId": "showTaxCode",
                "responses": {
                    "200": {
                        "description": "Tax code details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/TaxCode"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "taxCodeId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Money"
                ],
                "summary": "Partially update tax code",
                "operationId": "patchTaxCode",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Tax code updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Money"
                ],
                "summary": "Update tax code",
                "operationId": "updateTaxCode",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "rate_percent": {
                                        "type": "number",
                                        "nullable": true
                                    },
                                    "is_compound": {
                                        "type": "boolean"
                                    },
                                    "active": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Tax code updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/notification-preferences": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Retrieve notification preferences",
                "operationId": "showNotificationPreferences",
                "responses": {
                    "200": {
                        "description": "Per-channel notification preferences for the current user.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Update notification preferences",
                "operationId": "updateNotificationPreferences",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Preferences updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/notifications": {
            "get": {
                "tags": [
                    "Notifications"
                ],
                "summary": "List user notifications",
                "operationId": "listNotifications",
                "responses": {
                    "200": {
                        "description": "Notification feed for authenticated user.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/notifications/mark-all-read": {
            "post": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Mark all notifications as read",
                "operationId": "markAllNotificationsRead",
                "responses": {
                    "200": {
                        "description": "All notifications marked as read.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/notifications/read": {
            "post": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Mark selected notifications as read",
                "operationId": "markNotificationsRead",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "ids"
                                ],
                                "properties": {
                                    "ids": {
                                        "type": "array",
                                        "minItems": 1,
                                        "maxItems": 50,
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Selected notifications marked as read.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "updated": {
                                                            "type": "integer"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/notifications/{notificationId}/read": {
            "parameters": [
                {
                    "name": "notificationId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Notifications"
                ],
                "summary": "Mark notification as read",
                "operationId": "markNotificationRead",
                "responses": {
                    "200": {
                        "description": "Notification marked as read.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/orders": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "List public supplier orders",
                "operationId": "listOrders",
                "responses": {
                    "200": {
                        "description": "Orders visible to the authenticated supplier.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/orders/{orderId}": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Show supplier order detail",
                "operationId": "showOrder",
                "responses": {
                    "200": {
                        "description": "Order details for supplier view.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "orderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/plans": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "List publicly available subscription plans",
                "operationId": "listPlansCatalog",
                "responses": {
                    "200": {
                        "description": "Catalog of buyer subscription plans.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PlanCatalogEntry"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/pos/from-awards": {
            "post": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "Convert awarded RFQ lines into draft purchase orders",
                "operationId": "createPurchaseOrdersFromAwards",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreatePurchaseOrdersFromAwardsRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Purchase orders drafted from the provided awards.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "purchase_orders"
                                                    ],
                                                    "properties": {
                                                        "purchase_orders": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PurchaseOrder"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "402": {
                        "description": "Plan upgrade required to create purchase orders.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "$ref": "#/components/responses/Forbidden"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/purchase-orders": {
            "get": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "List purchase orders",
                "operationId": "listPurchaseOrders",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PageQuery"
                    },
                    {
                        "name": "supplier",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "oneOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Paginated list of purchase orders.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items",
                                                        "meta"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PurchaseOrder"
                                                            }
                                                        },
                                                        "meta": {
                                                            "$ref": "#/components/schemas/PageMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/purchase-orders/{purchaseOrderId}": {
            "get": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "Retrieve purchase order",
                "operationId": "showPurchaseOrder",
                "responses": {
                    "200": {
                        "description": "Purchase order detail view.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/PurchaseOrder"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "purchaseOrderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/purchase-orders/{purchaseOrderId}/acknowledge": {
            "post": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "Supplier acknowledges purchase order",
                "operationId": "acknowledgePurchaseOrder",
                "parameters": [
                    {
                        "name": "purchaseOrderId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "decision"
                                ],
                                "properties": {
                                    "decision": {
                                        "type": "string",
                                        "enum": [
                                            "acknowledged",
                                            "declined"
                                        ]
                                    },
                                    "reason": {
                                        "type": "string",
                                        "nullable": true,
                                        "maxLength": 2000
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Purchase order acknowledgement recorded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/PurchaseOrder"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/purchase-orders/{purchaseOrderId}/cancel": {
            "post": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "Cancel purchase order",
                "operationId": "cancelPurchaseOrder",
                "parameters": [
                    {
                        "name": "purchaseOrderId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Purchase order cancelled.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/purchase-orders/{purchaseOrderId}/change-orders": {
            "get": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "List change orders for purchase order",
                "operationId": "listPurchaseOrderChangeOrders",
                "responses": {
                    "200": {
                        "description": "Current change orders for the PO.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PoChangeOrder"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "purchaseOrderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "Propose change order",
                "operationId": "createPurchaseOrderChangeOrder",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "reason",
                                    "changes_json"
                                ],
                                "properties": {
                                    "reason": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "changes_json": {
                                        "type": "object",
                                        "additionalProperties": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Change order proposed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/purchase-orders/{purchaseOrderId}/documents/{documentId}/download": {
            "get": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "Download purchase order PDF",
                "operationId": "downloadPurchaseOrderDocument",
                "parameters": [
                    {
                        "name": "purchaseOrderId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "documentId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Purchase order PDF stream.",
                        "content": {
                            "application/pdf": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Document not found for purchase order.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/purchase-orders/{purchaseOrderId}/events": {
            "get": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "List purchase order timeline events",
                "operationId": "listPurchaseOrderEvents",
                "responses": {
                    "200": {
                        "description": "Timeline entries for the purchase order.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/PurchaseOrderEvent"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "purchaseOrderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/purchase-orders/{purchaseOrderId}/export": {
            "post": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "Generate PDF for purchase order",
                "operationId": "exportPurchaseOrder",
                "parameters": [
                    {
                        "name": "purchaseOrderId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Purchase order PDF ready for download.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/ExportPurchaseOrderResponse"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/purchase-orders/{purchaseOrderId}/grns": {
            "get": {
                "tags": [
                    "Inventory"
                ],
                "summary": "List goods receipt notes for purchase order",
                "operationId": "listGrns",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Collection of goods receipt notes.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/GoodsReceiptNote"
                                                            }
                                                        },
                                                        "meta": {
                                                            "$ref": "#/components/schemas/CursorMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "purchaseOrderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Create goods receipt note",
                "operationId": "createGrn",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "lines"
                                ],
                                "properties": {
                                    "lines": {
                                        "type": "array",
                                        "minItems": 1,
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "purchase_order_line_id",
                                                "quantity_received"
                                            ],
                                            "properties": {
                                                "purchase_order_line_id": {
                                                    "type": "integer"
                                                },
                                                "quantity_received": {
                                                    "type": "number"
                                                },
                                                "quantity_accepted": {
                                                    "type": "number",
                                                    "nullable": true
                                                },
                                                "quantity_rejected": {
                                                    "type": "number",
                                                    "nullable": true
                                                },
                                                "rejection_reason": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    },
                                    "inspected_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Goods receipt note created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/purchase-orders/{purchaseOrderId}/grns/{grnId}": {
            "delete": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Delete goods receipt note",
                "operationId": "deleteGrn",
                "responses": {
                    "200": {
                        "description": "Goods receipt deleted with audit trail.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Show goods receipt note",
                "operationId": "showGrn",
                "responses": {
                    "200": {
                        "description": "Goods receipt details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/GoodsReceiptNote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "purchaseOrderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                },
                {
                    "name": "grnId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Update goods receipt note",
                "operationId": "updateGrn",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "draft",
                                            "inspecting",
                                            "accepted",
                                            "rejected"
                                        ]
                                    },
                                    "lines": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "quantity_accepted": {
                                                    "type": "number"
                                                },
                                                "quantity_rejected": {
                                                    "type": "number"
                                                },
                                                "rejection_reason": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Goods receipt updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/purchase-orders/{purchaseOrderId}/invoices": {
            "get": {
                "tags": [
                    "Invoices"
                ],
                "summary": "List invoices for a purchase order",
                "operationId": "listInvoicesForPurchaseOrder",
                "responses": {
                    "200": {
                        "description": "Paginated invoices linked to the purchase order.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/InvoiceCollection"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "purchaseOrderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                },
                {
                    "$ref": "#/components/parameters/PerPageQuery"
                },
                {
                    "$ref": "#/components/parameters/PageQuery"
                },
                {
                    "name": "status",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "string",
                        "enum": [
                            "pending",
                            "paid",
                            "overdue",
                            "disputed"
                        ]
                    }
                },
                {
                    "name": "supplier_id",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "integer"
                    }
                },
                {
                    "name": "from",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "string",
                        "format": "date"
                    }
                },
                {
                    "name": "to",
                    "in": "query",
                    "required": false,
                    "schema": {
                        "type": "string",
                        "format": "date"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Create invoice for purchase order",
                "operationId": "createInvoiceForPurchaseOrder",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "lines"
                                ],
                                "properties": {
                                    "invoice_number": {
                                        "type": "string",
                                        "maxLength": 60
                                    },
                                    "invoice_date": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "currency": {
                                        "type": "string",
                                        "minLength": 3,
                                        "maxLength": 3
                                    },
                                    "document": {
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "lines": {
                                        "type": "array",
                                        "minItems": 1,
                                        "items": {
                                            "$ref": "#/components/schemas/InvoiceLineInput"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invoice captured.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Invoice"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/purchase-orders/{purchaseOrderId}/recalculate": {
            "post": {
                "tags": [
                    "Money"
                ],
                "summary": "Recalculate purchase order totals",
                "operationId": "recalcPurchaseOrderTotals",
                "parameters": [
                    {
                        "name": "purchaseOrderId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Purchase order totals recalculated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/purchase-orders/{purchaseOrderId}/send": {
            "post": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "Issue purchase order to supplier",
                "operationId": "sendPurchaseOrder",
                "parameters": [
                    {
                        "name": "purchaseOrderId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "channel"
                                ],
                                "properties": {
                                    "channel": {
                                        "type": "string",
                                        "enum": [
                                            "email",
                                            "webhook"
                                        ]
                                    },
                                    "to": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "email"
                                        },
                                        "description": "Required when channel is email."
                                    },
                                    "cc": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "email"
                                        }
                                    },
                                    "message": {
                                        "type": "string",
                                        "maxLength": 2000
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Purchase order issued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "purchase_order": {
                                                            "$ref": "#/components/schemas/PurchaseOrder"
                                                        },
                                                        "delivery": {
                                                            "$ref": "#/components/schemas/PurchaseOrderDelivery"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/purchase-orders/{purchaseOrderId}/shipments": {
            "get": {
                "tags": [
                    "Purchase Orders"
                ],
                "summary": "List shipments linked to purchase order",
                "operationId": "listPurchaseOrderShipments",
                "responses": {
                    "200": {
                        "description": "Shipment timeline for the purchase order.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "purchaseOrderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/quotes": {
            "get": {
                "tags": [
                    "Quotes"
                ],
                "summary": "List quotes for inbox",
                "operationId": "listQuotes",
                "parameters": [
                    {
                        "name": "inbox",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "buyer",
                                "supplier"
                            ]
                        }
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "created_at",
                                "submitted_at",
                                "total_minor",
                                "total_price_minor"
                            ]
                        }
                    },
                    {
                        "name": "sort_direction",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    },
                    {
                        "name": "cursor",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 50
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Quotes routed to the requested inbox.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/Quote"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Submit quote directly",
                "operationId": "submitQuote",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "rfq_id",
                                    "currency",
                                    "items"
                                ],
                                "properties": {
                                    "rfq_id": {
                                        "type": "string",
                                        "format": "uuid"
                                    },
                                    "supplier_id": {
                                        "type": "string",
                                        "format": "uuid"
                                    },
                                    "currency": {
                                        "type": "string"
                                    },
                                    "lead_time_days": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "min_order_qty": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "note": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "draft",
                                            "submitted"
                                        ],
                                        "default": "submitted"
                                    },
                                    "items": {
                                        "type": "array",
                                        "minItems": 1,
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "rfq_item_id",
                                                "lead_time_days"
                                            ],
                                            "properties": {
                                                "rfq_item_id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "unit_price_minor": {
                                                    "type": "integer",
                                                    "nullable": true
                                                },
                                                "unit_price": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "nullable": true
                                                },
                                                "currency": {
                                                    "type": "string",
                                                    "minLength": 3,
                                                    "maxLength": 3,
                                                    "nullable": true
                                                },
                                                "lead_time_days": {
                                                    "type": "integer",
                                                    "minimum": 0
                                                },
                                                "note": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "tax_code_ids": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "integer"
                                                    }
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            }
                                        }
                                    },
                                    "attachments": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "uuid"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Quote submitted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Quote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/quotes/{quoteId}": {
            "get": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Fetch a single quote",
                "operationId": "showQuote",
                "responses": {
                    "200": {
                        "description": "Quote details including lines, attachments, and revisions.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Quote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "parameters": [
                {
                    "name": "quoteId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ]
        },
        "/api/quotes/{quoteId}/lines": {
            "parameters": [
                {
                    "name": "quoteId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Add line to draft quote",
                "operationId": "addQuoteLine",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/QuoteLineRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Line added and totals recalculated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Quote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/quotes/{quoteId}/lines/{quoteItemId}": {
            "delete": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Remove a quote line",
                "operationId": "deleteQuoteLine",
                "responses": {
                    "200": {
                        "description": "Updated quote after removal.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Quote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "quoteId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                },
                {
                    "name": "quoteItemId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Update an existing quote line",
                "operationId": "updateQuoteLine",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/QuoteLineUpdateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Line updated and totals recalculated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Quote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/quotes/{quoteId}/recalculate": {
            "post": {
                "tags": [
                    "Money"
                ],
                "summary": "Recalculate quote totals",
                "operationId": "recalcQuoteTotals",
                "parameters": [
                    {
                        "name": "quoteId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Quote totals recalculated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/quotes/{quoteId}/shortlist": {
            "delete": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Remove quote from shortlist",
                "operationId": "unshortlistQuote",
                "responses": {
                    "200": {
                        "description": "Quote removed from shortlist.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "quoteId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Add quote to shortlist",
                "operationId": "shortlistQuote",
                "responses": {
                    "200": {
                        "description": "Quote shortlisted for award consideration.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/quotes/{quoteId}/submit": {
            "post": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Submit a draft quote",
                "operationId": "submitDraftQuote",
                "parameters": [
                    {
                        "name": "quoteId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Quote submitted successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Quote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/receiving/grns": {
            "get": {
                "tags": [
                    "Inventory"
                ],
                "summary": "List company goods receipt notes",
                "operationId": "listCompanyGrns",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "name": "purchase_order_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "supplier_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "draft",
                                "posted",
                                "variance",
                                "all"
                            ]
                        }
                    },
                    {
                        "name": "received_from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "received_to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor paginated goods receipt notes scoped to the authenticated company.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items",
                                                        "meta"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/GoodsReceiptNote"
                                                            }
                                                        },
                                                        "meta": {
                                                            "type": "object",
                                                            "properties": {
                                                                "per_page": {
                                                                    "type": "integer"
                                                                },
                                                                "next_cursor": {
                                                                    "type": "string",
                                                                    "nullable": true
                                                                },
                                                                "prev_cursor": {
                                                                    "type": "string",
                                                                    "nullable": true
                                                                }
                                                            },
                                                            "additionalProperties": false
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Record a goods receipt note for a purchase order",
                "operationId": "storeCompanyGrn",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "purchase_order_id",
                                    "lines"
                                ],
                                "properties": {
                                    "purchase_order_id": {
                                        "type": "integer"
                                    },
                                    "received_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true
                                    },
                                    "reference": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "notes": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "draft",
                                            "posted"
                                        ],
                                        "nullable": true
                                    },
                                    "lines": {
                                        "type": "array",
                                        "minItems": 1,
                                        "items": {
                                            "$ref": "#/components/schemas/CompanyGoodsReceiptLineInput"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Goods receipt stored.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/GoodsReceiptNote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/receiving/grns/{grnId}": {
            "get": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Show a goods receipt note",
                "operationId": "showCompanyGrn",
                "responses": {
                    "200": {
                        "description": "Goods receipt details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/GoodsReceiptNote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "grnId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/receiving/grns/{grnId}/attachments": {
            "post": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Upload attachment to goods receipt note",
                "operationId": "attachCompanyGrnFile",
                "parameters": [
                    {
                        "name": "grnId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "file"
                                ],
                                "properties": {
                                    "file": {
                                        "type": "string",
                                        "format": "binary"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Attachment uploaded and goods receipt note updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/GoodsReceiptNote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/receiving/grns/{grnId}/ncrs": {
            "parameters": [
                {
                    "name": "grnId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Raise a non-conformance for a goods receipt line",
                "operationId": "createReceivingNcr",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "purchase_order_line_id",
                                    "reason"
                                ],
                                "properties": {
                                    "purchase_order_line_id": {
                                        "type": "integer"
                                    },
                                    "reason": {
                                        "type": "string"
                                    },
                                    "disposition": {
                                        "type": "string",
                                        "enum": [
                                            "rework",
                                            "return",
                                            "accept_as_is"
                                        ],
                                        "nullable": true
                                    },
                                    "documents": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "NCR created for the goods receipt line.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Ncr"
                                                },
                                                "message": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/receiving/ncrs/{ncrId}": {
            "parameters": [
                {
                    "name": "ncrId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Update or close a non-conformance record",
                "operationId": "updateReceivingNcr",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "status"
                                ],
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "closed"
                                        ]
                                    },
                                    "disposition": {
                                        "type": "string",
                                        "enum": [
                                            "rework",
                                            "return",
                                            "accept_as_is"
                                        ],
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "NCR updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Ncr"
                                                },
                                                "message": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rfps": {
            "get": {
                "tags": [
                    "RFPs"
                ],
                "summary": "List project RFPs",
                "operationId": "listRfps",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor-paginated list of RFPs within the active tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/RfpCollection"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "RFPs"
                ],
                "summary": "Create RFP",
                "operationId": "createRfp",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RfpRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "RFP authored.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfp"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rfps/{rfpId}": {
            "get": {
                "tags": [
                    "RFPs"
                ],
                "summary": "Show RFP",
                "operationId": "showRfp",
                "responses": {
                    "200": {
                        "description": "RFP detail record.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfp"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfpId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "RFPs"
                ],
                "summary": "Update RFP",
                "operationId": "updateRfp",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RfpUpdateRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "RFP updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfp"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            }
        },
        "/api/rfps/{rfpId}/award": {
            "post": {
                "tags": [
                    "RFPs"
                ],
                "summary": "Award RFP",
                "operationId": "awardRfp",
                "parameters": [
                    {
                        "name": "rfpId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "RFP marked as awarded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfp"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            }
        },
        "/api/rfps/{rfpId}/close-no-award": {
            "post": {
                "tags": [
                    "RFPs"
                ],
                "summary": "Close RFP without award",
                "operationId": "closeRfpWithoutAward",
                "parameters": [
                    {
                        "name": "rfpId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "RFP closed without awarding suppliers.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfp"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            }
        },
        "/api/rfps/{rfpId}/move-to-review": {
            "post": {
                "tags": [
                    "RFPs"
                ],
                "summary": "Move RFP to review",
                "operationId": "moveRfpToReview",
                "parameters": [
                    {
                        "name": "rfpId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "RFP transitioned to review.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfp"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            }
        },
        "/api/rfps/{rfpId}/proposals": {
            "get": {
                "tags": [
                    "RFPs"
                ],
                "summary": "List RFP proposals",
                "operationId": "listRfpProposals",
                "responses": {
                    "200": {
                        "description": "Buyer view of supplier proposals for the RFP.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/RfpProposalCollection"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfpId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "RFPs"
                ],
                "summary": "Submit RFP proposal",
                "operationId": "submitRfpProposal",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/RfpProposalRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Supplier proposal submitted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/RfpProposal"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            }
        },
        "/api/rfps/{rfpId}/publish": {
            "post": {
                "tags": [
                    "RFPs"
                ],
                "summary": "Publish RFP",
                "operationId": "publishRfp",
                "parameters": [
                    {
                        "name": "rfpId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "RFP published.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfp"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            }
        },
        "/api/rfq-quotes/{rfqId}": {
            "get": {
                "tags": [
                    "Quotes"
                ],
                "summary": "List RFQ quotes for buyer or invited supplier personas",
                "operationId": "listStandaloneRfqQuotes",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor-paginated collection of RFQ quotes.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/RfqQuoteCollection"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "RFQ access denied for the active persona.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Submit a supplier RFQ quote via standalone endpoint",
                "operationId": "submitStandaloneRfqQuote",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/RfqQuoteRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "RFQ quote created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/RfqQuote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Supplier access denied or RFQ invitation missing.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs": {
            "get": {
                "tags": [
                    "RFQs"
                ],
                "summary": "List RFQs",
                "operationId": "listRfqs",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "name": "tab",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "all",
                                "open",
                                "received",
                                "sent"
                            ]
                        },
                        "required": false
                    },
                    {
                        "name": "q",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "due_at",
                                "created_at"
                            ]
                        }
                    },
                    {
                        "name": "sort_direction",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Collection of RFQs visible to the current tenant.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/RfqCursorCollection"
                                                }
                                            }
                                        }
                                    ]
                                },
                                "examples": {
                                    "default": {
                                        "summary": "RFQ listing",
                                        "value": {
                                            "status": "success",
                                            "message": null,
                                            "data": {
                                                "items": [
                                                    {
                                                        "id": "3c3f9b08-8a89-4a5f-9074-828840fe3f4f",
                                                        "number": "00421",
                                                        "title": "Precision Bracket",
                                                        "material": "Aluminum 6061",
                                                        "method": "cnc",
                                                        "quantity_total": 250,
                                                        "open_bidding": true,
                                                        "due_at": 1764547199,
                                                        "publish_at": 1762014612,
                                                        "status": "open",
                                                        "notes": "Supplier must certify ISO 9001.",
                                                        "created_at": 1761656505,
                                                        "updated_at": 1761656712
                                                    }
                                                ],
                                                "meta": {
                                                    "per_page": 15,
                                                    "next_cursor": "eyJpZCI6IjNmZjBhIn0=",
                                                    "prev_cursor": null
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Create RFQ",
                "operationId": "createRfq",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "title",
                                    "method",
                                    "items"
                                ],
                                "properties": {
                                    "title": {
                                        "type": "string"
                                    },
                                    "item_name": {
                                        "type": "string",
                                        "nullable": true,
                                        "deprecated": true,
                                        "description": "Legacy alias of `title`."
                                    },
                                    "method": {
                                        "type": "string",
                                        "enum": [
                                            "cnc",
                                            "sheet_metal",
                                            "injection_molding",
                                            "3d_printing",
                                            "casting",
                                            "other"
                                        ]
                                    },
                                    "material": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "tolerance": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "finish": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "quantity_total": {
                                        "type": "integer",
                                        "minimum": 0
                                    },
                                    "delivery_location": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "client_company": {
                                        "type": "string",
                                        "nullable": true,
                                        "deprecated": true,
                                        "description": "Legacy alias of `delivery_location`."
                                    },
                                    "incoterm": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "currency": {
                                        "type": "string",
                                        "nullable": true,
                                        "minLength": 3,
                                        "maxLength": 3
                                    },
                                    "publish_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true
                                    },
                                    "due_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true
                                    },
                                    "close_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true
                                    },
                                    "open_bidding": {
                                        "type": "boolean"
                                    },
                                    "notes": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "cad": {
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "items": {
                                        "type": "array",
                                        "minItems": 1,
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "part_number",
                                                "qty"
                                            ],
                                            "properties": {
                                                "part_number": {
                                                    "type": "string"
                                                },
                                                "part_name": {
                                                    "type": "string",
                                                    "nullable": true,
                                                    "deprecated": true,
                                                    "description": "Legacy alias of `part_number`."
                                                },
                                                "description": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "spec": {
                                                    "type": "string",
                                                    "nullable": true,
                                                    "deprecated": true,
                                                    "description": "Legacy alias of `description`."
                                                },
                                                "method": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "material": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "tolerance": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "finish": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "qty": {
                                                    "type": "integer",
                                                    "minimum": 1
                                                },
                                                "quantity": {
                                                    "type": "integer",
                                                    "nullable": true,
                                                    "deprecated": true,
                                                    "description": "Legacy alias of `qty`."
                                                },
                                                "uom": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "target_price": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "nullable": true
                                                },
                                                "cad_doc_id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "nullable": true
                                                },
                                                "specs_json": {
                                                    "type": "object",
                                                    "nullable": true,
                                                    "additionalProperties": true
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "RFQ created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfq"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}": {
            "delete": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Delete RFQ",
                "operationId": "deleteRfq",
                "responses": {
                    "200": {
                        "description": "RFQ deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "get": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Retrieve RFQ",
                "operationId": "showRfq",
                "responses": {
                    "200": {
                        "description": "RFQ details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfq"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "put": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Update RFQ",
                "operationId": "updateRfq",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "title": {
                                        "type": "string"
                                    },
                                    "item_name": {
                                        "type": "string",
                                        "nullable": true,
                                        "deprecated": true,
                                        "description": "Legacy alias of `title`."
                                    },
                                    "method": {
                                        "type": "string",
                                        "enum": [
                                            "cnc",
                                            "sheet_metal",
                                            "injection_molding",
                                            "3d_printing",
                                            "casting",
                                            "other"
                                        ]
                                    },
                                    "material": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "tolerance": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "finish": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "quantity_total": {
                                        "type": "integer",
                                        "minimum": 0
                                    },
                                    "delivery_location": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "client_company": {
                                        "type": "string",
                                        "nullable": true,
                                        "deprecated": true,
                                        "description": "Legacy alias of `delivery_location`."
                                    },
                                    "incoterm": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "currency": {
                                        "type": "string",
                                        "nullable": true,
                                        "minLength": 3,
                                        "maxLength": 3
                                    },
                                    "publish_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true
                                    },
                                    "due_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true
                                    },
                                    "close_at": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true
                                    },
                                    "open_bidding": {
                                        "type": "boolean"
                                    },
                                    "notes": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "cad": {
                                        "type": "string",
                                        "format": "binary"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "RFQ updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfq"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/attachments": {
            "get": {
                "tags": [
                    "RFQs"
                ],
                "summary": "List RFQ attachments",
                "operationId": "listRfqAttachments",
                "responses": {
                    "200": {
                        "description": "Attachments linked to the RFQ.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/RfqAttachment"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Upload RFQ attachment",
                "operationId": "uploadRfqAttachment",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "file"
                                ],
                                "properties": {
                                    "file": {
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "title": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "description": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Attachment uploaded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/RfqAttachment"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/attachments/{attachmentId}": {
            "delete": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Delete RFQ attachment",
                "operationId": "deleteRfqAttachment",
                "responses": {
                    "200": {
                        "description": "Attachment removed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                },
                {
                    "name": "attachmentId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ]
        },
        "/api/rfqs/{rfqId}/award": {
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Award RFQ",
                "operationId": "awardRfq",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "quote_id"
                                ],
                                "properties": {
                                    "quote_id": {
                                        "type": "string",
                                        "format": "uuid"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Award created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/award-candidates": {
            "get": {
                "tags": [
                    "RFQs"
                ],
                "summary": "List award candidates for an RFQ",
                "operationId": "listRfqAwardCandidates",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Flattened quote candidates per RFQ line with converted price hints.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "rfq",
                                                        "company_currency",
                                                        "lines",
                                                        "awards",
                                                        "meta"
                                                    ],
                                                    "properties": {
                                                        "rfq": {
                                                            "type": "object",
                                                            "required": [
                                                                "id",
                                                                "number",
                                                                "status",
                                                                "currency",
                                                                "is_partially_awarded"
                                                            ],
                                                            "properties": {
                                                                "id": {
                                                                    "type": "integer"
                                                                },
                                                                "number": {
                                                                    "type": "string"
                                                                },
                                                                "title": {
                                                                    "type": "string",
                                                                    "nullable": true
                                                                },
                                                                "status": {
                                                                    "type": "string"
                                                                },
                                                                "currency": {
                                                                    "type": "string"
                                                                },
                                                                "is_partially_awarded": {
                                                                    "type": "boolean"
                                                                }
                                                            }
                                                        },
                                                        "company_currency": {
                                                            "type": "string"
                                                        },
                                                        "lines": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/RfqAwardCandidateLine"
                                                            }
                                                        },
                                                        "awards": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/RfqItemAwardSummary"
                                                            }
                                                        },
                                                        "meta": {
                                                            "type": "object",
                                                            "properties": {
                                                                "quotes": {
                                                                    "type": "integer"
                                                                },
                                                                "suppliers": {
                                                                    "type": "integer"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "$ref": "#/components/responses/Unauthorized"
                    },
                    "403": {
                        "$ref": "#/components/responses/Forbidden"
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/award-lines": {
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Award specific RFQ lines",
                "operationId": "awardRfqLines",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AwardLinesRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Award lines processed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/cancel": {
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Cancel RFQ",
                "operationId": "cancelRfq",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "reason": {
                                        "type": "string",
                                        "nullable": true,
                                        "description": "Optional buyer-supplied rationale for cancelling the RFQ."
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "RFQ cancelled.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfq"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/clarifications": {
            "get": {
                "tags": [
                    "RFQs"
                ],
                "summary": "List clarifications",
                "operationId": "listRfqClarifications",
                "responses": {
                    "200": {
                        "description": "Clarifications for the RFQ.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/RfqClarification"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ]
        },
        "/api/rfqs/{rfqId}/clarifications/amendment": {
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Publish amendment",
                "operationId": "createRfqAmendment",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "body"
                                ],
                                "properties": {
                                    "body": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Amendment published.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/clarifications/answer": {
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Submit clarification answer",
                "operationId": "createRfqClarificationAnswer",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "body"
                                ],
                                "properties": {
                                    "body": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Answer submitted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/clarifications/question": {
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Submit clarification question",
                "operationId": "createRfqClarificationQuestion",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "body"
                                ],
                                "properties": {
                                    "body": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Question submitted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/clarifications/{clarificationId}/attachments/{attachmentId}": {
            "get": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Download clarification attachment",
                "operationId": "downloadRfqClarificationAttachment",
                "responses": {
                    "200": {
                        "description": "Attachment stream for the clarification entry.",
                        "content": {
                            "application/octet-stream": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                },
                {
                    "name": "clarificationId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                },
                {
                    "name": "attachmentId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ]
        },
        "/api/rfqs/{rfqId}/close": {
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Close RFQ",
                "operationId": "closeRfq",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CloseRfqRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "RFQ closed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfq"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/extend-deadline": {
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Extend RFQ deadline",
                "operationId": "extendRfqDeadline",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ExtendRfqDeadlineRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "RFQ deadline extended.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "extension",
                                                        "rfq"
                                                    ],
                                                    "properties": {
                                                        "extension": {
                                                            "$ref": "#/components/schemas/RfqDeadlineExtension"
                                                        },
                                                        "rfq": {
                                                            "$ref": "#/components/schemas/Rfq"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/invitations": {
            "get": {
                "tags": [
                    "RFQs"
                ],
                "summary": "List RFQ invitations",
                "operationId": "listRfqInvitations",
                "responses": {
                    "200": {
                        "description": "Invitations for the given RFQ.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items",
                                                        "meta"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/RfqInvitation"
                                                            }
                                                        },
                                                        "meta": {
                                                            "$ref": "#/components/schemas/PageMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Invite supplier to RFQ",
                "operationId": "inviteSupplierToRfq",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "supplier_id"
                                ],
                                "properties": {
                                    "supplier_id": {
                                        "type": "string",
                                        "format": "uuid"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Invitation created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/lines": {
            "get": {
                "tags": [
                    "RFQs"
                ],
                "summary": "List RFQ lines",
                "operationId": "listRfqLines",
                "responses": {
                    "200": {
                        "description": "Line items belonging to the RFQ.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/RfqItem"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Add RFQ line",
                "operationId": "createRfqLine",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RfqLinePayload"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "RFQ line created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/RfqItem"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/lines/{lineId}": {
            "delete": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Delete RFQ line",
                "operationId": "deleteRfqLine",
                "responses": {
                    "200": {
                        "description": "RFQ line deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                },
                {
                    "name": "lineId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "put": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Update RFQ line",
                "operationId": "updateRfqLine",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RfqLinePayload"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "RFQ line updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/RfqItem"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/publish": {
            "post": {
                "tags": [
                    "RFQs"
                ],
                "summary": "Publish RFQ",
                "operationId": "publishRfq",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PublishRfqRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "RFQ published.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rfq"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/quotes": {
            "get": {
                "tags": [
                    "Quotes"
                ],
                "summary": "List quotes for an RFQ",
                "operationId": "listQuotesForRfq",
                "responses": {
                    "200": {
                        "description": "Quotes submitted for the RFQ.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/Quote"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Create quote draft for RFQ",
                "operationId": "createQuoteForRfq",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/QuoteSubmissionRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Quote draft created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Quote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/quotes/compare": {
            "get": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Compare quotes for RFQ",
                "operationId": "compareQuotesForRfq",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Normalized scoring matrix for all quotes tied to the RFQ.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/QuoteComparisonRow"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/quotes/{quoteId}": {
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                },
                {
                    "name": "quoteId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Withdraw quote",
                "operationId": "withdrawQuote",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WithdrawQuoteRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Quote withdrawn.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Quote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            },
            "put": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Submit quote draft",
                "operationId": "submitQuoteDraft",
                "responses": {
                    "200": {
                        "description": "Quote submitted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Quote"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/quotes/{quoteId}/draft": {
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                },
                {
                    "name": "quoteId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "patch": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Update quote draft details",
                "operationId": "updateRfqQuoteDraft",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Draft quote updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/quotes/{quoteId}/revisions": {
            "get": {
                "tags": [
                    "Quotes"
                ],
                "summary": "List quote revisions",
                "operationId": "listQuoteRevisions",
                "responses": {
                    "200": {
                        "description": "Quote revision history.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/QuoteRevision"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "rfqId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                },
                {
                    "name": "quoteId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Submit quote revision",
                "operationId": "submitQuoteRevision",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "note",
                                    "items"
                                ],
                                "properties": {
                                    "note": {
                                        "type": "string"
                                    },
                                    "items": {
                                        "type": "array",
                                        "minItems": 1,
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "rfq_item_id",
                                                "unit_price_minor",
                                                "quantity"
                                            ],
                                            "properties": {
                                                "rfq_item_id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "quantity": {
                                                    "type": "integer"
                                                },
                                                "unit_price_minor": {
                                                    "type": "integer"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Revision accepted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/quotes/{quoteId}/withdraw": {
            "post": {
                "tags": [
                    "Quotes"
                ],
                "summary": "Withdraw quote",
                "operationId": "withdrawQuote",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "quoteId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "reason"
                                ],
                                "properties": {
                                    "reason": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Quote withdrawn.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rfqs/{rfqId}/timeline": {
            "get": {
                "tags": [
                    "RFQs"
                ],
                "summary": "RFQ timeline entries",
                "operationId": "listRfqTimeline",
                "parameters": [
                    {
                        "name": "rfqId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Chronological timeline of RFQ events.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/RfqTimelineEntry"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "$ref": "#/components/responses/NotFound"
                    }
                }
            }
        },
        "/api/risk": {
            "get": {
                "tags": [
                    "Risk"
                ],
                "summary": "List supplier risk scores",
                "operationId": "listRiskScores",
                "responses": {
                    "200": {
                        "description": "Current risk scores for suppliers in tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/risk/generate": {
            "post": {
                "tags": [
                    "Risk"
                ],
                "summary": "Generate new risk scores for suppliers",
                "operationId": "generateRiskScores",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "202": {
                        "description": "Risk generation queued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/risk/{supplierId}": {
            "get": {
                "tags": [
                    "Risk"
                ],
                "summary": "Retrieve supplier risk score",
                "operationId": "showRiskScore",
                "responses": {
                    "200": {
                        "description": "Supplier risk score snapshot.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "supplierId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/rmas": {
            "get": {
                "tags": [
                    "Inventory"
                ],
                "summary": "List RMAs",
                "operationId": "listRmas",
                "responses": {
                    "200": {
                        "description": "Collection of RMAs.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/Rma"
                                                            }
                                                        },
                                                        "meta": {
                                                            "$ref": "#/components/schemas/PageMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rmas/purchase-orders/{purchaseOrderId}": {
            "post": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Create RMA for purchase order",
                "operationId": "createRma",
                "parameters": [
                    {
                        "name": "purchaseOrderId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "reason"
                                ],
                                "properties": {
                                    "reason": {
                                        "type": "string"
                                    },
                                    "attachments": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "uuid"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "RMA created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rmas/{rmaId}": {
            "get": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Retrieve RMA",
                "operationId": "showRma",
                "parameters": [
                    {
                        "name": "rmaId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "RMA detail.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Rma"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rmas/{rmaId}/review": {
            "post": {
                "tags": [
                    "Inventory"
                ],
                "summary": "Review RMA",
                "operationId": "reviewRma",
                "parameters": [
                    {
                        "name": "rmaId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "decision"
                                ],
                                "properties": {
                                    "decision": {
                                        "type": "string",
                                        "enum": [
                                            "approve",
                                            "reject"
                                        ]
                                    },
                                    "comment": {
                                        "type": "string",
                                        "nullable": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Review recorded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/saved-searches": {
            "get": {
                "tags": [
                    "Search"
                ],
                "summary": "List saved searches",
                "operationId": "listSavedSearches",
                "responses": {
                    "200": {
                        "description": "Saved searches for the authenticated user.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/SavedSearch"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Search"
                ],
                "summary": "Create saved search",
                "operationId": "createSavedSearch",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "name",
                                    "query"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "query": {
                                        "type": "object",
                                        "additionalProperties": true
                                    },
                                    "shared": {
                                        "type": "boolean",
                                        "default": false
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Saved search created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/saved-searches/{savedSearchId}": {
            "delete": {
                "tags": [
                    "Search"
                ],
                "summary": "Delete saved search",
                "operationId": "deleteSavedSearch",
                "responses": {
                    "200": {
                        "description": "Saved search removed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Search"
                ],
                "summary": "Show saved search",
                "operationId": "showSavedSearch",
                "responses": {
                    "200": {
                        "description": "Saved search detail.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SavedSearch"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "savedSearchId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Search"
                ],
                "summary": "Update saved search",
                "operationId": "updateSavedSearch",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "query": {
                                        "type": "object",
                                        "additionalProperties": true
                                    },
                                    "shared": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Saved search updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/search": {
            "get": {
                "tags": [
                    "Search"
                ],
                "summary": "Perform global search across tenant resources",
                "operationId": "searchGlobal",
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "types",
                        "in": "query",
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "description": "Optional filters limiting domain (comma separated)."
                    },
                    {
                        "name": "date_from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Aggregated search results ordered by relevance.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "results": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/SearchResult"
                                                            }
                                                        },
                                                        "meta": {
                                                            "$ref": "#/components/schemas/RequestMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/settings/ai": {
            "get": {
                "tags": [
                    "Settings",
                    "AI"
                ],
                "summary": "Retrieve AI assistant controls",
                "operationId": "showCompanyAiSettings",
                "responses": {
                    "200": {
                        "description": "Current AI assistant configuration for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/AiSettings"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Settings",
                    "AI"
                ],
                "summary": "Update AI assistant controls",
                "operationId": "updateCompanyAiSettings",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "llm_answers_enabled"
                                ],
                                "properties": {
                                    "llm_answers_enabled": {
                                        "type": "boolean",
                                        "description": "Enable (true) or disable (false) LLM-generated responses."
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Updated AI assistant configuration.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/AiSettings"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/settings/company": {
            "get": {
                "tags": [
                    "Settings"
                ],
                "summary": "Retrieve company profile settings",
                "operationId": "showCompanySettings",
                "responses": {
                    "200": {
                        "description": "Current company profile settings.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/CompanySettings"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Settings"
                ],
                "summary": "Update company profile settings",
                "operationId": "updateCompanySettings",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CompanySettings"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Updated company profile settings.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/CompanySettings"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/settings/localization": {
            "get": {
                "tags": [
                    "Settings",
                    "Localization"
                ],
                "summary": "Retrieve localization settings",
                "operationId": "showLocalizationSettings",
                "responses": {
                    "200": {
                        "description": "Current localization preferences for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/LocalizationSettings"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Settings",
                    "Localization"
                ],
                "summary": "Update localization settings",
                "operationId": "updateLocalizationSettings",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LocalizationSettings"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Updated localization settings.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/LocalizationSettings"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/settings/numbering": {
            "get": {
                "tags": [
                    "Settings"
                ],
                "summary": "Retrieve document numbering rules",
                "operationId": "showNumberingSettings",
                "responses": {
                    "200": {
                        "description": "Current numbering configuration for all document types.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/NumberingSettings"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "Settings"
                ],
                "summary": "Update document numbering rules",
                "operationId": "updateNumberingSettings",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/NumberingSettings"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Updated numbering configuration.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/NumberingSettings"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "$ref": "#/components/responses/ValidationError"
                    }
                }
            }
        },
        "/api/supplier-applications": {
            "get": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "List supplier applications",
                "operationId": "listSupplierApplications",
                "responses": {
                    "200": {
                        "description": "Paginated supplier applications.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/SupplierApplication"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Submit supplier application",
                "operationId": "createSupplierApplication",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SupplierApplicationPayload"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Supplier application submitted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SupplierApplication"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/supplier-applications/{applicationId}": {
            "delete": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Delete supplier application",
                "operationId": "deleteSupplierApplication",
                "responses": {
                    "200": {
                        "description": "Supplier application deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Show supplier application",
                "operationId": "showSupplierApplication",
                "responses": {
                    "200": {
                        "description": "Supplier application details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SupplierApplication"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "applicationId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/supplier/dashboard/metrics": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Retrieve supplier dashboard metrics",
                "operationId": "supplierDashboardMetrics",
                "responses": {
                    "200": {
                        "description": "Aggregated metrics for the active supplier persona.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/supplier/invoices": {
            "get": {
                "tags": [
                    "Invoices"
                ],
                "summary": "List supplier-authored invoices",
                "operationId": "listSupplierInvoices",
                "responses": {
                    "200": {
                        "description": "Supplier invoice listing scoped to persona.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/supplier/invoices/{invoiceId}": {
            "get": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Show supplier-authored invoice",
                "operationId": "showSupplierInvoice",
                "responses": {
                    "200": {
                        "description": "Supplier invoice details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "invoiceId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Update supplier invoice draft",
                "operationId": "updateSupplierInvoice",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Supplier invoice updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/supplier/invoices/{invoiceId}/submit": {
            "post": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Submit supplier invoice for buyer review",
                "operationId": "submitSupplierInvoice",
                "parameters": [
                    {
                        "name": "invoiceId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Supplier invoice submitted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/supplier/orders": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "List sales orders for the supplier company",
                "operationId": "listSupplierOrders",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/components/schemas/SalesOrderStatus"
                            }
                        },
                        "style": "form",
                        "explode": true,
                        "description": "Filter by normalized sales order status."
                    },
                    {
                        "name": "buyer_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        },
                        "required": false,
                        "description": "Restrict to purchase orders issued by the specified buyer company ID."
                    },
                    {
                        "name": "date_from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "required": false
                    },
                    {
                        "name": "date_to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "required": false
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "maxLength": 200
                        },
                        "required": false,
                        "description": "Search by PO number or buyer company name."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor-paginated list of supplier-facing sales orders.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SalesOrderCursorCollection"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/supplier/orders/{orderId}": {
            "get": {
                "tags": [
                    "Orders"
                ],
                "summary": "Show a supplier-facing sales order",
                "operationId": "showSupplierOrder",
                "responses": {
                    "200": {
                        "description": "Detailed sales order payload for the supplier.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SalesOrderDetail"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "orderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/supplier/orders/{orderId}/ack": {
            "parameters": [
                {
                    "name": "orderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Orders"
                ],
                "summary": "Record supplier acknowledgement",
                "operationId": "acknowledgeSupplierOrder",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AcknowledgeOrderPayload"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Updated sales order with acknowledgement trail.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SalesOrderDetail"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/supplier/orders/{orderId}/shipments": {
            "parameters": [
                {
                    "name": "orderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Orders"
                ],
                "summary": "Create a supplier shipment for a sales order",
                "operationId": "createSupplierShipment",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateShipmentPayload"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Sales order with refreshed shipment summary.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SalesOrderDetail"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/supplier/purchase-orders/{purchaseOrderId}/invoices": {
            "parameters": [
                {
                    "name": "purchaseOrderId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Invoices"
                ],
                "summary": "Supplier submits invoice for purchase order",
                "operationId": "supplierCreateInvoiceFromPurchaseOrder",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Supplier-authored invoice created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/supplier/quotes": {
            "get": {
                "tags": [
                    "Quotes"
                ],
                "summary": "List quotes for the authenticated supplier company",
                "operationId": "listSupplierQuotes",
                "parameters": [
                    {
                        "name": "rfq_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "description": "Comma-delimited list of statuses to include."
                        }
                    },
                    {
                        "name": "rfq_number",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "$ref": "#/components/parameters/PageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "created_at",
                                "submitted_at",
                                "total_minor"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Supplier quotes list.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items",
                                                        "meta"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/Quote"
                                                            }
                                                        },
                                                        "meta": {
                                                            "type": "object",
                                                            "properties": {
                                                                "total": {
                                                                    "type": "integer"
                                                                },
                                                                "per_page": {
                                                                    "type": "integer"
                                                                },
                                                                "current_page": {
                                                                    "type": "integer"
                                                                },
                                                                "last_page": {
                                                                    "type": "integer"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/supplier/rfqs": {
            "get": {
                "tags": [
                    "RFQs"
                ],
                "summary": "List RFQs for the acting supplier persona",
                "description": "Returns the RFQs that invited the currently selected supplier persona for the active session. Buyer RFQs remain hidden until the user switches personas.",
                "operationId": "listSupplierRfqInbox",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "due_at",
                                "created_at",
                                "close_at"
                            ]
                        },
                        "description": "Column used to order the cursor window. Defaults to `due_at`."
                    },
                    {
                        "name": "direction",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        },
                        "description": "Sort direction applied to the selected column. Defaults to ascending."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor-paginated list of RFQs visible to the supplier persona.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/RfqCursorCollection"
                                                }
                                            }
                                        }
                                    ]
                                },
                                "examples": {
                                    "inbox": {
                                        "summary": "Supplier RFQ inbox listing",
                                        "value": {
                                            "status": "success",
                                            "message": null,
                                            "data": {
                                                "items": [
                                                    {
                                                        "id": "5b3c7a47-9e3a-4e03-9a14-abc402c5d91b",
                                                        "number": "RFQ-00421",
                                                        "title": "Precision Bracket",
                                                        "method": "cnc",
                                                        "quantity_total": 250,
                                                        "open_bidding": false,
                                                        "due_at": 1764547199,
                                                        "close_at": null,
                                                        "status": "open",
                                                        "created_at": 1761656505,
                                                        "updated_at": 1761656712
                                                    }
                                                ],
                                                "meta": {
                                                    "per_page": 15,
                                                    "next_cursor": "eyJpZCI6IjVmZmY1In0=",
                                                    "prev_cursor": null
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Missing or expired authentication token.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "The request was issued without an active supplier persona or supplier approval.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/supplier/shipments/{shipmentId}/status": {
            "parameters": [
                {
                    "name": "shipmentId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Orders"
                ],
                "summary": "Update a supplier shipment status",
                "operationId": "updateSupplierShipmentStatus",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateShipmentStatusPayload"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Sales order with updated shipment status.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/SalesOrderDetail"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/suppliers": {
            "get": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "List suppliers for current company",
                "operationId": "listSuppliers",
                "responses": {
                    "200": {
                        "description": "Paginated suppliers.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/Supplier"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/suppliers/{supplierId}": {
            "get": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Show supplier",
                "operationId": "showSupplier",
                "responses": {
                    "200": {
                        "description": "Supplier details.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Supplier"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "supplierId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/suppliers/{supplierId}/esg": {
            "get": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "List ESG records for supplier",
                "operationId": "listSupplierEsg",
                "responses": {
                    "200": {
                        "description": "Environmental, social, and governance records for the supplier.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "supplierId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Store ESG record for supplier",
                "operationId": "createSupplierEsg",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "ESG record created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/suppliers/{supplierId}/esg/export": {
            "parameters": [
                {
                    "name": "supplierId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Queue ESG export for supplier",
                "operationId": "exportSupplierEsg",
                "responses": {
                    "202": {
                        "description": "ESG export queued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/suppliers/{supplierId}/esg/{recordId}": {
            "delete": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Delete ESG record",
                "operationId": "deleteSupplierEsg",
                "responses": {
                    "200": {
                        "description": "ESG record deleted.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "supplierId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                },
                {
                    "name": "recordId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "put": {
                "tags": [
                    "Suppliers"
                ],
                "summary": "Update ESG record",
                "operationId": "updateSupplierEsg",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "ESG record updated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/ai-training/jobs": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "List AI training jobs",
                "operationId": "adminListAiTrainingJobs",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "name": "feature",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "forecast",
                                "risk",
                                "rag",
                                "actions",
                                "workflows",
                                "chat"
                            ]
                        },
                        "description": "Filter jobs by feature key."
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "running",
                                "completed",
                                "failed"
                            ]
                        },
                        "description": "Filter jobs by status."
                    },
                    {
                        "name": "company_id",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        },
                        "description": "Restrict results to a specific tenant."
                    },
                    {
                        "name": "microservice_job_id",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Filter jobs by the upstream microservice job identifier."
                    },
                    {
                        "name": "started_from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "ISO date to filter jobs started on/after the supplied date."
                    },
                    {
                        "name": "started_to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "ISO date to filter jobs started on/before the supplied date."
                    },
                    {
                        "name": "created_from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "ISO date to filter jobs created on/after the supplied date."
                    },
                    {
                        "name": "created_to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "ISO date to filter jobs created on/before the supplied date."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor paginated AI training jobs.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/AiTrainingJob"
                                                            }
                                                        }
                                                    }
                                                },
                                                "meta": {
                                                    "type": "object",
                                                    "properties": {
                                                        "cursor": {
                                                            "$ref": "#/components/schemas/CursorMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/ai-training/jobs/{job}": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "Show an AI training job",
                "operationId": "adminShowAiTrainingJob",
                "responses": {
                    "200": {
                        "description": "AI training job status.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/AiTrainingJob"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "job",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/v1/admin/ai-training/jobs/{job}/refresh": {
            "parameters": [
                {
                    "name": "job",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Refresh AI training job status from the microservice",
                "operationId": "adminRefreshAiTrainingJob",
                "responses": {
                    "200": {
                        "description": "Job refreshed and status returned.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "job": {
                                                            "$ref": "#/components/schemas/AiTrainingJob"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/ai-training/start": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Start an AI training job",
                "operationId": "adminStartAiTrainingJob",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/StartAiTrainingRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "AI training job queued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "job": {
                                                            "$ref": "#/components/schemas/AiTrainingJob"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/ai/reindex-document": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Queue AI document reindex for a tenant document",
                "operationId": "adminReindexDocument",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AiDocumentReindexRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Document reindex job dispatched to the AI worker queue.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/AiDocumentReindexStatus"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/scraped-suppliers/{scraped_supplier}": {
            "delete": {
                "tags": [
                    "Admin"
                ],
                "summary": "Discard a scraped supplier",
                "operationId": "adminDiscardScrapedSupplier",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/DiscardScrapedSupplierRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Scraped supplier discarded.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "scraped_supplier": {
                                                            "$ref": "#/components/schemas/ScrapedSupplier"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "scraped_supplier",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/v1/admin/scraped-suppliers/{scraped_supplier}/approve": {
            "parameters": [
                {
                    "name": "scraped_supplier",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ],
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Approve a scraped supplier into production",
                "operationId": "adminApproveScrapedSupplier",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/ApproveScrapedSupplierRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Scraped supplier approved and supplier record created.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "scraped_supplier": {
                                                            "$ref": "#/components/schemas/ScrapedSupplier"
                                                        },
                                                        "supplier": {
                                                            "$ref": "#/components/schemas/Supplier"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/supplier-scrapes": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "List supplier scrape jobs",
                "operationId": "adminListSupplierScrapeJobs",
                "parameters": [
                    {
                        "name": "company_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        },
                        "description": "Optional tenant ID to scope scrape jobs to."
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "running",
                                "completed",
                                "failed"
                            ]
                        },
                        "description": "Filter jobs by lifecycle status."
                    },
                    {
                        "name": "query",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Filter jobs whose query contains the provided term."
                    },
                    {
                        "name": "region",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Filter jobs that targeted a specific region."
                    },
                    {
                        "name": "created_from",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "Only return jobs created on or after this date."
                    },
                    {
                        "name": "created_to",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "Only return jobs created on or before this date."
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor paginated supplier scrape jobs.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/SupplierScrapeJob"
                                                            }
                                                        }
                                                    }
                                                },
                                                "meta": {
                                                    "type": "object",
                                                    "properties": {
                                                        "cursor": {
                                                            "$ref": "#/components/schemas/CursorMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/supplier-scrapes/start": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Start a supplier scrape job",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "nullable": true,
                                "allOf": [
                                    {
                                        "$ref": "#/components/schemas/StartSupplierScrapeRequest"
                                    }
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Supplier scrape job queued.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "job": {
                                                            "$ref": "#/components/schemas/SupplierScrapeJob"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/admin/supplier-scrapes/{supplier_scrape_job}/results": {
            "get": {
                "tags": [
                    "Admin"
                ],
                "summary": "List scraped suppliers for a job",
                "operationId": "adminListScrapedSuppliers",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Full-text search over scraped supplier name, website, or description."
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "approved",
                                "discarded"
                            ]
                        },
                        "description": "Filter results by review status."
                    },
                    {
                        "name": "min_confidence",
                        "in": "query",
                        "schema": {
                            "type": "number",
                            "format": "float",
                            "minimum": 0,
                            "maximum": 1
                        },
                        "description": "Minimum confidence score (0-1)."
                    },
                    {
                        "name": "max_confidence",
                        "in": "query",
                        "schema": {
                            "type": "number",
                            "format": "float",
                            "minimum": 0,
                            "maximum": 1
                        },
                        "description": "Maximum confidence score (0-1)."
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor paginated scraped suppliers.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/ScrapedSupplier"
                                                            }
                                                        }
                                                    }
                                                },
                                                "meta": {
                                                    "type": "object",
                                                    "properties": {
                                                        "cursor": {
                                                            "$ref": "#/components/schemas/CursorMeta"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "supplier_scrape_job",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "integer"
                    }
                }
            ]
        },
        "/api/v1/ai/actions/plan": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Generate a Copilot action draft",
                "description": "Invokes the AI planning service to produce a draft action payload scoped to the tenant context.",
                "operationId": "copilotActionPlan",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CopilotActionPlanRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Copilot action draft generated successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "draft"
                                                    ],
                                                    "properties": {
                                                        "draft": {
                                                            "$ref": "#/components/schemas/CopilotActionDraft"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "User is not authorized to run the requested Copilot action.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation failed for the supplied action payload.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Copilot failed to generate a draft from the upstream AI service.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "AI service temporarily unavailable.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/actions/{draft}/approve": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Approve a Copilot action draft",
                "description": "Marks the draft as approved and converts it into the downstream entity defined by the draft payload.",
                "operationId": "copilotActionApprove",
                "parameters": [
                    {
                        "name": "draft",
                        "in": "path",
                        "required": true,
                        "description": "Identifier of the draft to approve.",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Draft approved and converted successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "draft"
                                                    ],
                                                    "properties": {
                                                        "draft": {
                                                            "$ref": "#/components/schemas/CopilotActionDraft"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "User cannot approve this Copilot action.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Draft not found for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Draft is no longer in a state that can be approved or payload conversion failed validation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Copilot failed to finalize the draft due to an internal error.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/actions/{draft}/feedback": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Record feedback for a Copilot action draft",
                "operationId": "copilotActionFeedback",
                "parameters": [
                    {
                        "name": "draft",
                        "in": "path",
                        "required": true,
                        "description": "Identifier of the draft receiving feedback.",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CopilotActionFeedbackRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Feedback captured successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "feedback"
                                                    ],
                                                    "properties": {
                                                        "feedback": {
                                                            "$ref": "#/components/schemas/CopilotActionFeedback"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "User cannot review this Copilot action.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Draft not found.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Feedback payload invalid.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/actions/{draft}/reject": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Reject a Copilot action draft",
                "operationId": "copilotActionReject",
                "parameters": [
                    {
                        "name": "draft",
                        "in": "path",
                        "required": true,
                        "description": "Identifier of the draft to reject.",
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CopilotActionRejectRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Draft rejected successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "draft"
                                                    ],
                                                    "properties": {
                                                        "draft": {
                                                            "$ref": "#/components/schemas/CopilotActionDraft"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "User cannot reject this Copilot action.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Draft not found.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Draft already resolved or validation failed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/admin/usage-metrics": {
            "get": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Retrieve AI admin usage metrics",
                "description": "Aggregates feature-level AI adoption metrics for the authenticated tenant or selected company.",
                "operationId": "getAiAdminUsageMetrics",
                "responses": {
                    "200": {
                        "description": "Aggregated AI usage metrics for the trailing window.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "metrics"
                                                    ],
                                                    "properties": {
                                                        "metrics": {
                                                            "$ref": "#/components/schemas/AiUsageMetrics"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "User lacks AI admin permissions or feature gating blocks access.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/chat/threads": {
            "get": {
                "tags": [
                    "Copilot"
                ],
                "summary": "List Copilot chat threads",
                "operationId": "listAiChatThreads",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "description": "Optional filter accepting comma-separated values or repeated query keys. Supported values are `open` and `closed`.",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/components/schemas/AiChatThreadStatus"
                            }
                        },
                        "style": "form",
                        "explode": false
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor-paginated list of chat threads ordered by activity.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/AiChatThread"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Chat access is disabled for this user or plan.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Create a new Copilot chat thread",
                "operationId": "createAiChatThread",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AiChatCreateThreadRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Chat thread created successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "thread"
                                                    ],
                                                    "properties": {
                                                        "thread": {
                                                            "$ref": "#/components/schemas/AiChatThread"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Chat access is disabled for this user or plan.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/chat/threads/{thread}": {
            "get": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Fetch a chat thread with recent messages",
                "operationId": "showAiChatThread",
                "parameters": [
                    {
                        "name": "thread",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "description": "Maximum number of recent messages to include (1-100).",
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Thread details plus the latest conversation history.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "thread"
                                                    ],
                                                    "properties": {
                                                        "thread": {
                                                            "$ref": "#/components/schemas/AiChatThread"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Chat access is disabled for this user or plan.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Thread not found for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/chat/threads/{thread}/send": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Send a message to Copilot chat",
                "operationId": "sendAiChatMessage",
                "parameters": [
                    {
                        "name": "thread",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AiChatSendMessageRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Message accepted. When `stream=true` the response contains a stream token; otherwise the final assistant message and response payload are returned immediately.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "oneOf": [
                                                        {
                                                            "$ref": "#/components/schemas/AiChatSendMessageResult"
                                                        },
                                                        {
                                                            "$ref": "#/components/schemas/AiChatStreamSession"
                                                        }
                                                    ]
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Chat access is disabled for this user or plan.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Thread not found for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation failed for the chat payload.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Upstream AI service returned an error.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "AI service temporarily unavailable.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/chat/threads/{thread}/stream": {
            "get": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Stream Copilot chat responses via Server-Sent Events",
                "operationId": "streamAiChatThread",
                "parameters": [
                    {
                        "name": "thread",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "token",
                        "in": "query",
                        "required": true,
                        "description": "Stream token issued by the `send` endpoint when `stream=true`.",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "SSE channel emitting `start`, `delta`, `tool`, `complete`, and `final` events.",
                        "content": {
                            "text/event-stream": {
                                "schema": {
                                    "type": "string"
                                },
                                "examples": {
                                    "delta": {
                                        "summary": "Streaming delta frame",
                                        "value": "event: delta\ndata: {\"text\":\"Answer chunk\"}"
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Stream token missing or invalid.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Chat access is disabled for this user or plan.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Thread not found for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/chat/threads/{thread}/tools/resolve": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Resolve workspace tool calls requested by Copilot",
                "operationId": "resolveAiChatTools",
                "parameters": [
                    {
                        "name": "thread",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AiChatResolveToolsRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Tool results stored and final assistant response generated.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/AiChatToolResolveResult"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Chat access is disabled for this user or plan.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Thread not found for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation failed for the requested tool calls.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Upstream AI service returned an error.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "AI service temporarily unavailable.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/drafts/{draft}/approve": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Approve a Copilot action draft (alias)",
                "description": "Alias for `/api/v1/ai/actions/{draft}/approve` to support legacy clients.",
                "operationId": "copilotActionApproveAlias",
                "parameters": [
                    {
                        "name": "draft",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Draft approved and converted successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "draft"
                                                    ],
                                                    "properties": {
                                                        "draft": {
                                                            "$ref": "#/components/schemas/CopilotActionDraft"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "User cannot approve this Copilot action.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Draft not found for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Draft is no longer in a state that can be approved or payload conversion failed validation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Copilot failed to finalize the draft due to an internal error.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/drafts/{draft}/reject": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Reject a Copilot action draft (alias)",
                "description": "Alias for `/api/v1/ai/actions/{draft}/reject` to support legacy clients.",
                "operationId": "copilotActionRejectAlias",
                "parameters": [
                    {
                        "name": "draft",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CopilotActionRejectRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Draft rejected successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "draft"
                                                    ],
                                                    "properties": {
                                                        "draft": {
                                                            "$ref": "#/components/schemas/CopilotActionDraft"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "User cannot reject this Copilot action.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Draft not found.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Draft already resolved or validation failed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/workflows": {
            "get": {
                "tags": [
                    "Copilot"
                ],
                "summary": "List AI workflows for the tenant",
                "operationId": "listAiWorkflows",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "description": "Filter workflows by status. Accepts comma-separated values or repeated query keys.",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/components/schemas/AiWorkflowStatus"
                            }
                        },
                        "style": "form",
                        "explode": false
                    },
                    {
                        "name": "workflow_type",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Optional workflow template identifier."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor-paginated workflow collection.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/AiWorkflow"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Workflow access is disabled for this user or plan.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/workflows/start": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Start a Copilot workflow from a chat thread or workspace context",
                "operationId": "startAiWorkflow",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AiWorkflowStartRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Workflow planned successfully.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "workflow_id"
                                                    ],
                                                    "properties": {
                                                        "workflow_id": {
                                                            "type": "string"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Workflow access is disabled for this user or plan.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Referenced chat thread not found.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation failed for the workflow payload.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Upstream AI service returned an error.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "AI service temporarily unavailable.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/workflows/{workflow}/complete": {
            "post": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Approve or reject the current workflow step",
                "operationId": "completeAiWorkflowStep",
                "parameters": [
                    {
                        "name": "workflow",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AiWorkflowCompleteRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Workflow step resolved and optionally advanced.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "workflow": {
                                                            "$ref": "#/components/schemas/AiWorkflow"
                                                        },
                                                        "step": {
                                                            "$ref": "#/components/schemas/AiWorkflowStep"
                                                        },
                                                        "next_step": {
                                                            "oneOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/AiWorkflowStep"
                                                                },
                                                                {
                                                                    "type": "null"
                                                                }
                                                            ]
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "User cannot resolve the workflow step.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Workflow or step not found.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Workflow step already resolved.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Upstream AI service returned an error.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "AI service temporarily unavailable.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/workflows/{workflow}/events": {
            "get": {
                "tags": [
                    "Copilot"
                ],
                "summary": "List workflow audit events",
                "operationId": "listAiWorkflowEvents",
                "parameters": [
                    {
                        "name": "workflow",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "$ref": "#/components/parameters/CursorQuery"
                    },
                    {
                        "$ref": "#/components/parameters/PerPageQuery"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Cursor-paginated workflow event feed.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "items"
                                                    ],
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/AiWorkflowEvent"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Workflow access is disabled for this user or plan.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Workflow not found for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/ai/workflows/{workflow}/next": {
            "get": {
                "tags": [
                    "Copilot"
                ],
                "summary": "Draft the next step for a workflow",
                "operationId": "nextAiWorkflowStep",
                "parameters": [
                    {
                        "name": "workflow",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Returns the workflow and the drafted step when available.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "workflow": {
                                                            "$ref": "#/components/schemas/AiWorkflow"
                                                        },
                                                        "step": {
                                                            "oneOf": [
                                                                {
                                                                    "$ref": "#/components/schemas/AiWorkflowStep"
                                                                },
                                                                {
                                                                    "type": "null"
                                                                }
                                                            ]
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Workflow access is disabled for this user or plan.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Workflow not found for the tenant.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "502": {
                        "description": "Upstream AI service returned an error.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "503": {
                        "description": "AI service temporarily unavailable.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/analytics/forecast-report": {
            "post": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Generate demand forecast accuracy report",
                "operationId": "generateForecastReport",
                "description": "Returns demand forecast versus actual consumption along with reorder recommendations and an AI summary.",
                "parameters": [
                    {
                        "name": "start_date",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "Inclusive start date for demand analysis. Defaults to 90 days ago when omitted."
                    },
                    {
                        "name": "end_date",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "Inclusive end date for the analysis window. Defaults to today when omitted."
                    },
                    {
                        "name": "part_ids",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "integer",
                                "minimum": 1
                            }
                        },
                        "style": "form",
                        "explode": true,
                        "description": "Limit calculations to the specified part identifiers."
                    },
                    {
                        "name": "category_ids",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "style": "form",
                        "explode": true,
                        "description": "Filter parts by category slug or taxonomy identifier."
                    },
                    {
                        "name": "location_ids",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "integer",
                                "minimum": 1
                            }
                        },
                        "style": "form",
                        "explode": true,
                        "description": "Restrict usage signals to the listed warehouse or site identifiers."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Forecast report payload scoped to the authenticated company.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "report",
                                                        "summary"
                                                    ],
                                                    "properties": {
                                                        "report": {
                                                            "$ref": "#/components/schemas/ForecastReport"
                                                        },
                                                        "summary": {
                                                            "$ref": "#/components/schemas/AnalyticsReportSummary"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Analytics feature disabled or missing permission for forecast reports.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Invalid filter payload supplied.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/analytics/supplier-options": {
            "get": {
                "tags": [
                    "Analytics"
                ],
                "summary": "List supplier filter options",
                "operationId": "listAnalyticsSupplierOptions",
                "description": "Returns supplier names scoped to the authenticated company so analytics filters can present relevant options.",
                "parameters": [
                    {
                        "name": "q",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        },
                        "description": "Optional prefix search applied to supplier names."
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100,
                            "default": 25
                        },
                        "description": "Maximum number of suppliers to return."
                    },
                    {
                        "name": "selected_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        },
                        "description": "Supplier identifier that is prepended to the results even if it falls outside the current search window."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Supplier options eligible for analytics filters.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "properties": {
                                                        "items": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "object",
                                                                "required": [
                                                                    "id",
                                                                    "name"
                                                                ],
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "integer",
                                                                        "minimum": 1
                                                                    },
                                                                    "name": {
                                                                        "type": "string"
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Analytics feature disabled or permission denied for supplier filters.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/analytics/supplier-performance-report": {
            "post": {
                "tags": [
                    "Analytics"
                ],
                "summary": "Generate supplier performance diagnostics",
                "operationId": "generateSupplierPerformanceReport",
                "description": "Aggregates delivery quality, pricing volatility, and responsiveness for a specific supplier with an accompanying AI summary.",
                "parameters": [
                    {
                        "name": "supplier_id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        },
                        "description": "Supplier company identifier to analyze. Required for buyer personas; supplier personas default to their invited supplier ID."
                    },
                    {
                        "name": "start_date",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "Inclusive start date for supplier performance metrics. Defaults to the prior 90 days."
                    },
                    {
                        "name": "end_date",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "Inclusive end date for the reporting range. Defaults to today."
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Supplier performance report for the requested supplier.",
                        "headers": {
                            "X-Request-Id": {
                                "$ref": "#/components/headers/XRequestId"
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiSuccessResponse"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "data": {
                                                    "type": "object",
                                                    "required": [
                                                        "report",
                                                        "summary"
                                                    ],
                                                    "properties": {
                                                        "report": {
                                                            "$ref": "#/components/schemas/SupplierPerformanceReport"
                                                        },
                                                        "summary": {
                                                            "$ref": "#/components/schemas/AnalyticsReportSummary"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Analytics feature disabled or missing permission for supplier performance reports.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Supplier not found within the active company.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Invalid supplier or date filters supplied.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/webhooks/stripe/customer/subscription-updated": {
            "post": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Stripe subscription updated webhook",
                "operationId": "stripeSubscriptionUpdated",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Webhook acknowledged.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/webhooks/stripe/invoice/payment-failed": {
            "post": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Stripe invoice payment failed event hook",
                "operationId": "stripeInvoicePaymentFailed",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Webhook acknowledged.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/webhooks/stripe/invoice/payment-succeeded": {
            "post": {
                "tags": [
                    "Webhooks"
                ],
                "summary": "Stripe invoice payment succeeded event hook",
                "operationId": "stripeInvoicePaymentSucceeded",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Webhook acknowledged.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiSuccessResponse"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}